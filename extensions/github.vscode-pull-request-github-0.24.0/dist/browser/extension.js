(()=>{var ul={9669:(l,F,w)=>{l.exports=w(1609)},5448:(l,F,w)=>{"use strict";var C=w(4867),D=w(6026),E=w(4372),g=w(5327),m=w(4097),f=w(4109),d=w(7985),p=w(5061);l.exports=function(y){return new Promise(function(Q,S){var k=y.data,_=y.headers;C.isFormData(k)&&delete _["Content-Type"];var x=new XMLHttpRequest;if(y.auth){var V=y.auth.username||"",W=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";_.Authorization="Basic "+btoa(V+":"+W)}var j=m(y.baseURL,y.url);if(x.open(y.method.toUpperCase(),g(j,y.params,y.paramsSerializer),!0),x.timeout=y.timeout,x.onreadystatechange=function(){if(!(!x||x.readyState!==4)&&!(x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0))){var G="getAllResponseHeaders"in x?f(x.getAllResponseHeaders()):null,O=!y.responseType||y.responseType==="text"?x.responseText:x.response,I={data:O,status:x.status,statusText:x.statusText,headers:G,config:y,request:x};D(Q,S,I),x=null}},x.onabort=function(){!x||(S(p("Request aborted",y,"ECONNABORTED",x)),x=null)},x.onerror=function(){S(p("Network Error",y,null,x)),x=null},x.ontimeout=function(){var G="timeout of "+y.timeout+"ms exceeded";y.timeoutErrorMessage&&(G=y.timeoutErrorMessage),S(p(G,y,"ECONNABORTED",x)),x=null},C.isStandardBrowserEnv()){var X=(y.withCredentials||d(j))&&y.xsrfCookieName?E.read(y.xsrfCookieName):void 0;X&&(_[y.xsrfHeaderName]=X)}if("setRequestHeader"in x&&C.forEach(_,function(G,O){typeof k=="undefined"&&O.toLowerCase()==="content-type"?delete _[O]:x.setRequestHeader(O,G)}),C.isUndefined(y.withCredentials)||(x.withCredentials=!!y.withCredentials),y.responseType)try{x.responseType=y.responseType}catch(A){if(y.responseType!=="json")throw A}typeof y.onDownloadProgress=="function"&&x.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",y.onUploadProgress),y.cancelToken&&y.cancelToken.promise.then(function(G){!x||(x.abort(),S(G),x=null)}),k||(k=null),x.send(k)})}},1609:(l,F,w)=>{"use strict";var C=w(4867),D=w(1849),E=w(321),g=w(7185),m=w(5655);function f(p){var v=new E(p),y=D(E.prototype.request,v);return C.extend(y,E.prototype,v),C.extend(y,v),y}var d=f(m);d.Axios=E,d.create=function(v){return f(g(d.defaults,v))},d.Cancel=w(5263),d.CancelToken=w(4972),d.isCancel=w(6502),d.all=function(v){return Promise.all(v)},d.spread=w(8713),d.isAxiosError=w(6268),l.exports=d,l.exports.default=d},5263:l=>{"use strict";function F(w){this.message=w}F.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},F.prototype.__CANCEL__=!0,l.exports=F},4972:(l,F,w)=>{"use strict";var C=w(5263);function D(E){if(typeof E!="function")throw new TypeError("executor must be a function.");var g;this.promise=new Promise(function(d){g=d});var m=this;E(function(d){m.reason||(m.reason=new C(d),g(m.reason))})}D.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},D.source=function(){var g,m=new D(function(d){g=d});return{token:m,cancel:g}},l.exports=D},6502:l=>{"use strict";l.exports=function(w){return!!(w&&w.__CANCEL__)}},321:(l,F,w)=>{"use strict";var C=w(4867),D=w(5327),E=w(782),g=w(3572),m=w(7185);function f(d){this.defaults=d,this.interceptors={request:new E,response:new E}}f.prototype.request=function(p){typeof p=="string"?(p=arguments[1]||{},p.url=arguments[0]):p=p||{},p=m(this.defaults,p),p.method?p.method=p.method.toLowerCase():this.defaults.method?p.method=this.defaults.method.toLowerCase():p.method="get";var v=[g,void 0],y=Promise.resolve(p);for(this.interceptors.request.forEach(function(Q){v.unshift(Q.fulfilled,Q.rejected)}),this.interceptors.response.forEach(function(Q){v.push(Q.fulfilled,Q.rejected)});v.length;)y=y.then(v.shift(),v.shift());return y},f.prototype.getUri=function(p){return p=m(this.defaults,p),D(p.url,p.params,p.paramsSerializer).replace(/^\?/,"")},C.forEach(["delete","get","head","options"],function(p){f.prototype[p]=function(v,y){return this.request(m(y||{},{method:p,url:v,data:(y||{}).data}))}}),C.forEach(["post","put","patch"],function(p){f.prototype[p]=function(v,y,N){return this.request(m(N||{},{method:p,url:v,data:y}))}}),l.exports=f},782:(l,F,w)=>{"use strict";var C=w(4867);function D(){this.handlers=[]}D.prototype.use=function(g,m){return this.handlers.push({fulfilled:g,rejected:m}),this.handlers.length-1},D.prototype.eject=function(g){this.handlers[g]&&(this.handlers[g]=null)},D.prototype.forEach=function(g){C.forEach(this.handlers,function(f){f!==null&&g(f)})},l.exports=D},4097:(l,F,w)=>{"use strict";var C=w(1793),D=w(7303);l.exports=function(g,m){return g&&!C(m)?D(g,m):m}},5061:(l,F,w)=>{"use strict";var C=w(481);l.exports=function(E,g,m,f,d){var p=new Error(E);return C(p,g,m,f,d)}},3572:(l,F,w)=>{"use strict";var C=w(4867),D=w(8527),E=w(6502),g=w(5655);function m(f){f.cancelToken&&f.cancelToken.throwIfRequested()}l.exports=function(d){m(d),d.headers=d.headers||{},d.data=D(d.data,d.headers,d.transformRequest),d.headers=C.merge(d.headers.common||{},d.headers[d.method]||{},d.headers),C.forEach(["delete","get","head","post","put","patch","common"],function(y){delete d.headers[y]});var p=d.adapter||g.adapter;return p(d).then(function(y){return m(d),y.data=D(y.data,y.headers,d.transformResponse),y},function(y){return E(y)||(m(d),y&&y.response&&(y.response.data=D(y.response.data,y.response.headers,d.transformResponse))),Promise.reject(y)})}},481:l=>{"use strict";l.exports=function(w,C,D,E,g){return w.config=C,D&&(w.code=D),w.request=E,w.response=g,w.isAxiosError=!0,w.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},w}},7185:(l,F,w)=>{"use strict";var C=w(4867);l.exports=function(E,g){g=g||{};var m={},f=["url","method","data"],d=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],v=["validateStatus"];function y(k,_){return C.isPlainObject(k)&&C.isPlainObject(_)?C.merge(k,_):C.isPlainObject(_)?C.merge({},_):C.isArray(_)?_.slice():_}function N(k){C.isUndefined(g[k])?C.isUndefined(E[k])||(m[k]=y(void 0,E[k])):m[k]=y(E[k],g[k])}C.forEach(f,function(_){C.isUndefined(g[_])||(m[_]=y(void 0,g[_]))}),C.forEach(d,N),C.forEach(p,function(_){C.isUndefined(g[_])?C.isUndefined(E[_])||(m[_]=y(void 0,E[_])):m[_]=y(void 0,g[_])}),C.forEach(v,function(_){_ in g?m[_]=y(E[_],g[_]):_ in E&&(m[_]=y(void 0,E[_]))});var Q=f.concat(d).concat(p).concat(v),S=Object.keys(E).concat(Object.keys(g)).filter(function(_){return Q.indexOf(_)===-1});return C.forEach(S,N),m}},6026:(l,F,w)=>{"use strict";var C=w(5061);l.exports=function(E,g,m){var f=m.config.validateStatus;!m.status||!f||f(m.status)?E(m):g(C("Request failed with status code "+m.status,m.config,null,m.request,m))}},8527:(l,F,w)=>{"use strict";var C=w(4867);l.exports=function(E,g,m){return C.forEach(m,function(d){E=d(E,g)}),E}},5655:(l,F,w)=>{"use strict";var C=w(4867),D=w(6016),E={"Content-Type":"application/x-www-form-urlencoded"};function g(d,p){!C.isUndefined(d)&&C.isUndefined(d["Content-Type"])&&(d["Content-Type"]=p)}function m(){var d;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(d=w(5448)),d}var f={adapter:m(),transformRequest:[function(p,v){return D(v,"Accept"),D(v,"Content-Type"),C.isFormData(p)||C.isArrayBuffer(p)||C.isBuffer(p)||C.isStream(p)||C.isFile(p)||C.isBlob(p)?p:C.isArrayBufferView(p)?p.buffer:C.isURLSearchParams(p)?(g(v,"application/x-www-form-urlencoded;charset=utf-8"),p.toString()):C.isObject(p)?(g(v,"application/json;charset=utf-8"),JSON.stringify(p)):p}],transformResponse:[function(p){if(typeof p=="string")try{p=JSON.parse(p)}catch(v){}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(p){return p>=200&&p<300}};f.headers={common:{Accept:"application/json, text/plain, */*"}},C.forEach(["delete","get","head"],function(p){f.headers[p]={}}),C.forEach(["post","put","patch"],function(p){f.headers[p]=C.merge(E)}),l.exports=f},1849:l=>{"use strict";l.exports=function(w,C){return function(){for(var E=new Array(arguments.length),g=0;g<E.length;g++)E[g]=arguments[g];return w.apply(C,E)}}},5327:(l,F,w)=>{"use strict";var C=w(4867);function D(E){return encodeURIComponent(E).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}l.exports=function(g,m,f){if(!m)return g;var d;if(f)d=f(m);else if(C.isURLSearchParams(m))d=m.toString();else{var p=[];C.forEach(m,function(N,Q){N===null||typeof N=="undefined"||(C.isArray(N)?Q=Q+"[]":N=[N],C.forEach(N,function(k){C.isDate(k)?k=k.toISOString():C.isObject(k)&&(k=JSON.stringify(k)),p.push(D(Q)+"="+D(k))}))}),d=p.join("&")}if(d){var v=g.indexOf("#");v!==-1&&(g=g.slice(0,v)),g+=(g.indexOf("?")===-1?"?":"&")+d}return g}},7303:l=>{"use strict";l.exports=function(w,C){return C?w.replace(/\/+$/,"")+"/"+C.replace(/^\/+/,""):w}},4372:(l,F,w)=>{"use strict";var C=w(4867);l.exports=C.isStandardBrowserEnv()?function(){return{write:function(g,m,f,d,p,v){var y=[];y.push(g+"="+encodeURIComponent(m)),C.isNumber(f)&&y.push("expires="+new Date(f).toGMTString()),C.isString(d)&&y.push("path="+d),C.isString(p)&&y.push("domain="+p),v===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(g){var m=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove:function(g){this.write(g,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:l=>{"use strict";l.exports=function(w){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(w)}},6268:l=>{"use strict";l.exports=function(w){return typeof w=="object"&&w.isAxiosError===!0}},7985:(l,F,w)=>{"use strict";var C=w(4867);l.exports=C.isStandardBrowserEnv()?function(){var E=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a"),m;function f(d){var p=d;return E&&(g.setAttribute("href",p),p=g.href),g.setAttribute("href",p),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return m=f(window.location.href),function(p){var v=C.isString(p)?f(p):p;return v.protocol===m.protocol&&v.host===m.host}}():function(){return function(){return!0}}()},6016:(l,F,w)=>{"use strict";var C=w(4867);l.exports=function(E,g){C.forEach(E,function(f,d){d!==g&&d.toUpperCase()===g.toUpperCase()&&(E[g]=f,delete E[d])})}},4109:(l,F,w)=>{"use strict";var C=w(4867),D=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];l.exports=function(g){var m={},f,d,p;return g&&C.forEach(g.split(`
`),function(y){if(p=y.indexOf(":"),f=C.trim(y.substr(0,p)).toLowerCase(),d=C.trim(y.substr(p+1)),f){if(m[f]&&D.indexOf(f)>=0)return;f==="set-cookie"?m[f]=(m[f]?m[f]:[]).concat([d]):m[f]=m[f]?m[f]+", "+d:d}}),m}},8713:l=>{"use strict";l.exports=function(w){return function(D){return w.apply(null,D)}}},4867:(l,F,w)=>{"use strict";var C=w(1849),D=Object.prototype.toString;function E(P){return D.call(P)==="[object Array]"}function g(P){return typeof P=="undefined"}function m(P){return P!==null&&!g(P)&&P.constructor!==null&&!g(P.constructor)&&typeof P.constructor.isBuffer=="function"&&P.constructor.isBuffer(P)}function f(P){return D.call(P)==="[object ArrayBuffer]"}function d(P){return typeof FormData!="undefined"&&P instanceof FormData}function p(P){var U;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?U=ArrayBuffer.isView(P):U=P&&P.buffer&&P.buffer instanceof ArrayBuffer,U}function v(P){return typeof P=="string"}function y(P){return typeof P=="number"}function N(P){return P!==null&&typeof P=="object"}function Q(P){if(D.call(P)!=="[object Object]")return!1;var U=Object.getPrototypeOf(P);return U===null||U===Object.prototype}function S(P){return D.call(P)==="[object Date]"}function k(P){return D.call(P)==="[object File]"}function _(P){return D.call(P)==="[object Blob]"}function x(P){return D.call(P)==="[object Function]"}function V(P){return N(P)&&x(P.pipe)}function W(P){return typeof URLSearchParams!="undefined"&&P instanceof URLSearchParams}function j(P){return P.replace(/^\s*/,"").replace(/\s*$/,"")}function X(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function A(P,U){if(!(P===null||typeof P=="undefined"))if(typeof P!="object"&&(P=[P]),E(P))for(var T=0,M=P.length;T<M;T++)U.call(null,P[T],T,P);else for(var B in P)Object.prototype.hasOwnProperty.call(P,B)&&U.call(null,P[B],B,P)}function G(){var P={};function U(B,J){Q(P[J])&&Q(B)?P[J]=G(P[J],B):Q(B)?P[J]=G({},B):E(B)?P[J]=B.slice():P[J]=B}for(var T=0,M=arguments.length;T<M;T++)A(arguments[T],U);return P}function O(P,U,T){return A(U,function(B,J){T&&typeof B=="function"?P[J]=C(B,T):P[J]=B}),P}function I(P){return P.charCodeAt(0)===65279&&(P=P.slice(1)),P}l.exports={isArray:E,isArrayBuffer:f,isBuffer:m,isFormData:d,isArrayBufferView:p,isString:v,isNumber:y,isObject:N,isPlainObject:Q,isUndefined:g,isDate:S,isFile:k,isBlob:_,isFunction:x,isStream:V,isURLSearchParams:W,isStandardBrowserEnv:X,forEach:A,merge:G,extend:O,trim:j,stripBOM:I}},5186:(l,F,w)=>{var C=w(3698),D=w(2505),E=w(6417),g=Function.bind,m=g.bind(g);function f(N,Q,S){var k=m(E,null).apply(null,S?[Q,S]:[Q]);N.api={remove:k},N.remove=k,["before","error","after","wrap"].forEach(function(_){var x=S?[Q,_,S]:[Q,_];N[_]=N.api[_]=m(D,null).apply(null,x)})}function d(){var N="h",Q={registry:{}},S=C.bind(null,Q,N);return f(S,Q,N),S}function p(){var N={registry:{}},Q=C.bind(null,N);return f(Q,N),Q}var v=!1;function y(){return v||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),v=!0),p()}y.Singular=d.bind(),y.Collection=p.bind(),l.exports=y,l.exports.Hook=y,l.exports.Singular=y.Singular,l.exports.Collection=y.Collection},2505:l=>{l.exports=F;function F(w,C,D,E){var g=E;w.registry[D]||(w.registry[D]=[]),C==="before"&&(E=function(m,f){return Promise.resolve().then(g.bind(null,f)).then(m.bind(null,f))}),C==="after"&&(E=function(m,f){var d;return Promise.resolve().then(m.bind(null,f)).then(function(p){return d=p,g(d,f)}).then(function(){return d})}),C==="error"&&(E=function(m,f){return Promise.resolve().then(m.bind(null,f)).catch(function(d){return g(d,f)})}),w.registry[D].push({hook:E,orig:g})}},3698:l=>{l.exports=F;function F(w,C,D,E){if(typeof D!="function")throw new Error("method for before hook must be a function");return E||(E={}),Array.isArray(C)?C.reverse().reduce(function(g,m){return F.bind(null,w,m,g,E)},D)():Promise.resolve().then(function(){return w.registry[C]?w.registry[C].reduce(function(g,m){return m.hook.bind(null,g,E)},D)():D(E)})}},6417:l=>{l.exports=F;function F(w,C,D){if(!!w.registry[C]){var E=w.registry[C].map(function(g){return g.orig}).indexOf(D);E!==-1&&w.registry[C].splice(E,1)}}},4098:function(l,F){var w=function(C){function D(){this.fetch=!1,this.DOMException=C.DOMException}return D.prototype=C,new D}(typeof self!="undefined"?self:this);(function(C){var D=function(E){var g={searchParams:"URLSearchParams"in C,iterable:"Symbol"in C&&"iterator"in Symbol,blob:"FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch(T){return!1}}(),formData:"FormData"in C,arrayBuffer:"ArrayBuffer"in C};function m(T){return T&&DataView.prototype.isPrototypeOf(T)}if(g.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&f.indexOf(Object.prototype.toString.call(T))>-1};function p(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(T))throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function v(T){return typeof T!="string"&&(T=String(T)),T}function y(T){var M={next:function(){var B=T.shift();return{done:B===void 0,value:B}}};return g.iterable&&(M[Symbol.iterator]=function(){return M}),M}function N(T){this.map={},T instanceof N?T.forEach(function(M,B){this.append(B,M)},this):Array.isArray(T)?T.forEach(function(M){this.append(M[0],M[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(M){this.append(M,T[M])},this)}N.prototype.append=function(T,M){T=p(T),M=v(M);var B=this.map[T];this.map[T]=B?B+", "+M:M},N.prototype.delete=function(T){delete this.map[p(T)]},N.prototype.get=function(T){return T=p(T),this.has(T)?this.map[T]:null},N.prototype.has=function(T){return this.map.hasOwnProperty(p(T))},N.prototype.set=function(T,M){this.map[p(T)]=v(M)},N.prototype.forEach=function(T,M){for(var B in this.map)this.map.hasOwnProperty(B)&&T.call(M,this.map[B],B,this)},N.prototype.keys=function(){var T=[];return this.forEach(function(M,B){T.push(B)}),y(T)},N.prototype.values=function(){var T=[];return this.forEach(function(M){T.push(M)}),y(T)},N.prototype.entries=function(){var T=[];return this.forEach(function(M,B){T.push([B,M])}),y(T)},g.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function Q(T){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}function S(T){return new Promise(function(M,B){T.onload=function(){M(T.result)},T.onerror=function(){B(T.error)}})}function k(T){var M=new FileReader,B=S(M);return M.readAsArrayBuffer(T),B}function _(T){var M=new FileReader,B=S(M);return M.readAsText(T),B}function x(T){for(var M=new Uint8Array(T),B=new Array(M.length),J=0;J<M.length;J++)B[J]=String.fromCharCode(M[J]);return B.join("")}function V(T){if(T.slice)return T.slice(0);var M=new Uint8Array(T.byteLength);return M.set(new Uint8Array(T)),M.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(T){this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:g.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:g.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():g.arrayBuffer&&g.blob&&m(T)?(this._bodyArrayBuffer=V(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=V(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var T=Q(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var T=Q(this);if(T)return T;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(T){var M=T.toUpperCase();return j.indexOf(M)>-1?M:T}function A(T,M){M=M||{};var B=M.body;if(T instanceof A){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,M.headers||(this.headers=new N(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!B&&T._bodyInit!=null&&(B=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=M.credentials||this.credentials||"same-origin",(M.headers||!this.headers)&&(this.headers=new N(M.headers)),this.method=X(M.method||this.method||"GET"),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(B)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function G(T){var M=new FormData;return T.trim().split("&").forEach(function(B){if(B){var J=B.split("="),ie=J.shift().replace(/\+/g," "),ee=J.join("=").replace(/\+/g," ");M.append(decodeURIComponent(ie),decodeURIComponent(ee))}}),M}function O(T){var M=new N,B=T.replace(/\r?\n[\t ]+/g," ");return B.split(/\r?\n/).forEach(function(J){var ie=J.split(":"),ee=ie.shift().trim();if(ee){var se=ie.join(":").trim();M.append(ee,se)}}),M}W.call(A.prototype);function I(T,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new N(M.headers),this.url=M.url||"",this._initBody(T)}W.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},I.error=function(){var T=new I(null,{status:0,statusText:""});return T.type="error",T};var P=[301,302,303,307,308];I.redirect=function(T,M){if(P.indexOf(M)===-1)throw new RangeError("Invalid status code");return new I(null,{status:M,headers:{location:T}})},E.DOMException=C.DOMException;try{new E.DOMException}catch(T){E.DOMException=function(M,B){this.message=M,this.name=B;var J=Error(M);this.stack=J.stack},E.DOMException.prototype=Object.create(Error.prototype),E.DOMException.prototype.constructor=E.DOMException}function U(T,M){return new Promise(function(B,J){var ie=new A(T,M);if(ie.signal&&ie.signal.aborted)return J(new E.DOMException("Aborted","AbortError"));var ee=new XMLHttpRequest;function se(){ee.abort()}ee.onload=function(){var ue={status:ee.status,statusText:ee.statusText,headers:O(ee.getAllResponseHeaders()||"")};ue.url="responseURL"in ee?ee.responseURL:ue.headers.get("X-Request-URL");var pe="response"in ee?ee.response:ee.responseText;B(new I(pe,ue))},ee.onerror=function(){J(new TypeError("Network request failed"))},ee.ontimeout=function(){J(new TypeError("Network request failed"))},ee.onabort=function(){J(new E.DOMException("Aborted","AbortError"))},ee.open(ie.method,ie.url,!0),ie.credentials==="include"?ee.withCredentials=!0:ie.credentials==="omit"&&(ee.withCredentials=!1),"responseType"in ee&&g.blob&&(ee.responseType="blob"),ie.headers.forEach(function(ue,pe){ee.setRequestHeader(pe,ue)}),ie.signal&&(ie.signal.addEventListener("abort",se),ee.onreadystatechange=function(){ee.readyState===4&&ie.signal.removeEventListener("abort",se)}),ee.send(typeof ie._bodyInit=="undefined"?null:ie._bodyInit)})}return U.polyfill=!0,C.fetch||(C.fetch=U,C.Headers=N,C.Request=A,C.Response=I),E.Headers=N,E.Request=A,E.Response=I,E.fetch=U,E}({})})(w),delete w.fetch.polyfill,F=w.fetch,F.default=w.fetch,F.fetch=w.fetch,F.Headers=w.Headers,F.Request=w.Request,F.Response=w.Response,l.exports=F},7484:function(l){(function(F,w){l.exports=w()})(this,function(){"use strict";var F="millisecond",w="second",C="minute",D="hour",E="day",g="week",m="month",f="quarter",d="year",p="date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Q=function(G,O,I){var P=String(G);return!P||P.length>=O?G:""+Array(O+1-P.length).join(I)+G},S={s:Q,z:function(G){var O=-G.utcOffset(),I=Math.abs(O),P=Math.floor(I/60),U=I%60;return(O<=0?"+":"-")+Q(P,2,"0")+":"+Q(U,2,"0")},m:function G(O,I){if(O.date()<I.date())return-G(I,O);var P=12*(I.year()-O.year())+(I.month()-O.month()),U=O.clone().add(P,m),T=I-U<0,M=O.clone().add(P+(T?-1:1),m);return+(-(P+(I-U)/(T?U-M:M-U))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:m,y:d,w:g,d:E,D:p,h:D,m:C,s:w,ms:F,Q:f}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},k="en",_={};_[k]=N;var x=function(G){return G instanceof X},V=function(G,O,I){var P;if(!G)return k;if(typeof G=="string")_[G]&&(P=G),O&&(_[G]=O,P=G);else{var U=G.name;_[U]=G,P=U}return!I&&P&&(k=P),P||!I&&k},W=function(G,O){if(x(G))return G.clone();var I=typeof O=="object"?O:{};return I.date=G,I.args=arguments,new X(I)},j=S;j.l=V,j.i=x,j.w=function(G,O){return W(G,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var X=function(){function G(I){this.$L=V(I.locale,null,!0),this.parse(I)}var O=G.prototype;return O.parse=function(I){this.$d=function(P){var U=P.date,T=P.utc;if(U===null)return new Date(NaN);if(j.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var M=U.match(v);if(M){var B=M[2]-1||0,J=(M[7]||"0").substring(0,3);return T?new Date(Date.UTC(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,J)):new Date(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,J)}}return new Date(U)}(I),this.$x=I.x||{},this.init()},O.init=function(){var I=this.$d;this.$y=I.getFullYear(),this.$M=I.getMonth(),this.$D=I.getDate(),this.$W=I.getDay(),this.$H=I.getHours(),this.$m=I.getMinutes(),this.$s=I.getSeconds(),this.$ms=I.getMilliseconds()},O.$utils=function(){return j},O.isValid=function(){return this.$d.toString()!=="Invalid Date"},O.isSame=function(I,P){var U=W(I);return this.startOf(P)<=U&&U<=this.endOf(P)},O.isAfter=function(I,P){return W(I)<this.startOf(P)},O.isBefore=function(I,P){return this.endOf(P)<W(I)},O.$g=function(I,P,U){return j.u(I)?this[P]:this.set(U,I)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(I,P){var U=this,T=!!j.u(P)||P,M=j.p(I),B=function(ze,ye){var rt=j.w(U.$u?Date.UTC(U.$y,ye,ze):new Date(U.$y,ye,ze),U);return T?rt:rt.endOf(E)},J=function(ze,ye){return j.w(U.toDate()[ze].apply(U.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},ie=this.$W,ee=this.$M,se=this.$D,ue="set"+(this.$u?"UTC":"");switch(M){case d:return T?B(1,0):B(31,11);case m:return T?B(1,ee):B(0,ee+1);case g:var pe=this.$locale().weekStart||0,mt=(ie<pe?ie+7:ie)-pe;return B(T?se-mt:se+(6-mt),ee);case E:case p:return J(ue+"Hours",0);case D:return J(ue+"Minutes",1);case C:return J(ue+"Seconds",2);case w:return J(ue+"Milliseconds",3);default:return this.clone()}},O.endOf=function(I){return this.startOf(I,!1)},O.$set=function(I,P){var U,T=j.p(I),M="set"+(this.$u?"UTC":""),B=(U={},U[E]=M+"Date",U[p]=M+"Date",U[m]=M+"Month",U[d]=M+"FullYear",U[D]=M+"Hours",U[C]=M+"Minutes",U[w]=M+"Seconds",U[F]=M+"Milliseconds",U)[T],J=T===E?this.$D+(P-this.$W):P;if(T===m||T===d){var ie=this.clone().set(p,1);ie.$d[B](J),ie.init(),this.$d=ie.set(p,Math.min(this.$D,ie.daysInMonth())).$d}else B&&this.$d[B](J);return this.init(),this},O.set=function(I,P){return this.clone().$set(I,P)},O.get=function(I){return this[j.p(I)]()},O.add=function(I,P){var U,T=this;I=Number(I);var M=j.p(P),B=function(ee){var se=W(T);return j.w(se.date(se.date()+Math.round(ee*I)),T)};if(M===m)return this.set(m,this.$M+I);if(M===d)return this.set(d,this.$y+I);if(M===E)return B(1);if(M===g)return B(7);var J=(U={},U[C]=6e4,U[D]=36e5,U[w]=1e3,U)[M]||1,ie=this.$d.getTime()+I*J;return j.w(ie,this)},O.subtract=function(I,P){return this.add(-1*I,P)},O.format=function(I){var P=this;if(!this.isValid())return"Invalid Date";var U=I||"YYYY-MM-DDTHH:mm:ssZ",T=j.z(this),M=this.$locale(),B=this.$H,J=this.$m,ie=this.$M,ee=M.weekdays,se=M.months,ue=function(ye,rt,Ue,ht){return ye&&(ye[rt]||ye(P,U))||Ue[rt].substr(0,ht)},pe=function(ye){return j.s(B%12||12,ye,"0")},mt=M.meridiem||function(ye,rt,Ue){var ht=ye<12?"AM":"PM";return Ue?ht.toLowerCase():ht},ze={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ie+1,MM:j.s(ie+1,2,"0"),MMM:ue(M.monthsShort,ie,se,3),MMMM:ue(se,ie),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:ue(M.weekdaysMin,this.$W,ee,2),ddd:ue(M.weekdaysShort,this.$W,ee,3),dddd:ee[this.$W],H:String(B),HH:j.s(B,2,"0"),h:pe(1),hh:pe(2),a:mt(B,J,!0),A:mt(B,J,!1),m:String(J),mm:j.s(J,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:T};return U.replace(y,function(ye,rt){return rt||ze[ye]||T.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(I,P,U){var T,M=j.p(P),B=W(I),J=6e4*(B.utcOffset()-this.utcOffset()),ie=this-B,ee=j.m(this,B);return ee=(T={},T[d]=ee/12,T[m]=ee,T[f]=ee/3,T[g]=(ie-J)/6048e5,T[E]=(ie-J)/864e5,T[D]=ie/36e5,T[C]=ie/6e4,T[w]=ie/1e3,T)[M]||ie,U?ee:j.a(ee)},O.daysInMonth=function(){return this.endOf(m).$D},O.$locale=function(){return _[this.$L]},O.locale=function(I,P){if(!I)return this.$L;var U=this.clone(),T=V(I,P,!0);return T&&(U.$L=T),U},O.clone=function(){return j.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},G}(),A=X.prototype;return W.prototype=A,[["$ms",F],["$s",w],["$m",C],["$H",D],["$W",E],["$M",m],["$y",d],["$D",p]].forEach(function(G){A[G[1]]=function(O){return this.$g(O,G[0],G[1])}}),W.extend=function(G,O){return G.$i||(G(O,X,W),G.$i=!0),W},W.locale=V,W.isDayjs=x,W.unix=function(G){return W(1e3*G)},W.en=_[k],W.Ls=_,W.p={},W})},4110:function(l){(function(F,w){l.exports=w()})(this,function(){"use strict";return function(F,w,C){F=F||{};var D=w.prototype,E={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(f,d,p,v){return D.fromToBase(f,d,p,v)}C.en.relativeTime=E,D.fromToBase=function(f,d,p,v,y){for(var N,Q,S,k=p.$locale().relativeTime||E,_=F.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=_.length,V=0;V<x;V+=1){var W=_[V];W.d&&(N=v?C(f).diff(p,W.d,!0):p.diff(f,W.d,!0));var j=(F.rounding||Math.round)(Math.abs(N));if(S=N>0,j<=W.r||!W.r){j<=1&&V>0&&(W=_[V-1]);var X=k[W.l];y&&(j=y(""+j)),Q=typeof X=="string"?X.replace("%d",j):X(j,d,W.l,S);break}}if(d)return Q;var A=S?k.future:k.past;return typeof A=="function"?A(Q):A.replace("%s",Q)},D.to=function(f,d){return g(f,d,this,!0)},D.from=function(f,d){return g(f,d,this)};var m=function(f){return f.$u?C.utc():C()};D.toNow=function(f){return this.to(m(this),f)},D.fromNow=function(f){return this.from(m(this),f)}}})},660:function(l){(function(F,w){l.exports=w()})(this,function(){"use strict";return function(F,w,C){C.updateLocale=function(D,E){var g=C.Ls[D];if(g)return(E?Object.keys(E):[]).forEach(function(m){g[m]=E[m]}),g}}})},5035:l=>{"use strict";l.exports=function(F,w){w||(w={}),typeof w=="function"&&(w={cmp:w});var C=typeof w.cycles=="boolean"?w.cycles:!1,D=w.cmp&&function(g){return function(m){return function(f,d){var p={key:f,value:m[f]},v={key:d,value:m[d]};return g(p,v)}}}(w.cmp),E=[];return function g(m){if(m&&m.toJSON&&typeof m.toJSON=="function"&&(m=m.toJSON()),m!==void 0){if(typeof m=="number")return isFinite(m)?""+m:"null";if(typeof m!="object")return JSON.stringify(m);var f,d;if(Array.isArray(m)){for(d="[",f=0;f<m.length;f++)f&&(d+=","),d+=g(m[f])||"null";return d+"]"}if(m===null)return"null";if(E.indexOf(m)!==-1){if(C)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var p=E.push(m)-1,v=Object.keys(m).sort(D&&D(m));for(d="",f=0;f<v.length;f++){var y=v[f],N=g(m[y]);!N||(d&&(d+=","),d+=JSON.stringify(y)+":"+N)}return E.splice(p,1),"{"+d+"}"}}(F)}},9967:l=>{var F={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:12228}};F.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					isResolved
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			baseRef {
				...Ref
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
			comments(first: 1) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var w={};function C(f){return f.filter(function(d){if(d.kind!=="FragmentDefinition")return!0;var p=d.name.value;return w[p]?!1:(w[p]=!0,!0)})}function D(f,d){if(f.kind==="FragmentSpread")d.add(f.name.value);else if(f.kind==="VariableDefinition"){var p=f.type;p.kind==="NamedType"&&d.add(p.name.value)}f.selectionSet&&f.selectionSet.selections.forEach(function(v){D(v,d)}),f.variableDefinitions&&f.variableDefinitions.forEach(function(v){D(v,d)}),f.definitions&&f.definitions.forEach(function(v){D(v,d)})}var E={};(function(){F.definitions.forEach(function(d){if(d.name){var p=new Set;D(d,p),E[d.name.value]=p}})})();function g(f,d){for(var p=0;p<f.definitions.length;p++){var v=f.definitions[p];if(v.name&&v.name.value==d)return v}}function m(f,d){var p={kind:f.kind,definitions:[g(f,d)]};f.hasOwnProperty("loc")&&(p.loc=f.loc);var v=E[d]||new Set,y=new Set,N=new Set;for(v.forEach(function(S){N.add(S)});N.size>0;){var Q=N;N=new Set,Q.forEach(function(S){if(!y.has(S)){y.add(S);var k=E[S]||new Set;k.forEach(function(_){N.add(_)})}})}return y.forEach(function(S){var k=g(f,S);k&&p.definitions.push(k)}),p}l.exports=F,l.exports.TimelineEvents=m(F,"TimelineEvents"),l.exports.IssueTimelineEvents=m(F,"IssueTimelineEvents"),l.exports.GetPendingReviewId=m(F,"GetPendingReviewId"),l.exports.PullRequestComments=m(F,"PullRequestComments"),l.exports.PullRequest=m(F,"PullRequest"),l.exports.Issue=m(F,"Issue"),l.exports.IssueWithComments=m(F,"IssueWithComments"),l.exports.GetUser=m(F,"GetUser"),l.exports.PullRequestMergeability=m(F,"PullRequestMergeability"),l.exports.PullRequestState=m(F,"PullRequestState"),l.exports.AddComment=m(F,"AddComment"),l.exports.EditComment=m(F,"EditComment"),l.exports.ReadyForReview=m(F,"ReadyForReview"),l.exports.StartReview=m(F,"StartReview"),l.exports.SubmitReview=m(F,"SubmitReview"),l.exports.DeleteReview=m(F,"DeleteReview"),l.exports.AddReaction=m(F,"AddReaction"),l.exports.DeleteReaction=m(F,"DeleteReaction"),l.exports.UpdatePullRequest=m(F,"UpdatePullRequest"),l.exports.AddIssueComment=m(F,"AddIssueComment"),l.exports.EditIssueComment=m(F,"EditIssueComment"),l.exports.GetMentionableUsers=m(F,"GetMentionableUsers"),l.exports.GetAssignableUsers=m(F,"GetAssignableUsers"),l.exports.IssuesWithoutMilestone=m(F,"IssuesWithoutMilestone"),l.exports.MaxIssue=m(F,"MaxIssue"),l.exports.GetMilestones=m(F,"GetMilestones"),l.exports.Issues=m(F,"Issues"),l.exports.GetViewerPermission=m(F,"GetViewerPermission"),l.exports.GetRepositoryForkDetails=m(F,"GetRepositoryForkDetails"),l.exports.GetChecks=m(F,"GetChecks")},972:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=g;var C=E(w(7706)),D=E(w(8554));function E(m){return m&&m.__esModule?m:{default:m}}function g(m){var f=m.prototype.toJSON;typeof f=="function"||(0,C.default)(0),m.prototype.inspect=f,D.default&&(m.prototype[D.default]=f)}},8002:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=f;var C=D(w(8554));function D(S){return S&&S.__esModule?S:{default:S}}function E(S){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(_){return typeof _}:E=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},E(S)}var g=10,m=2;function f(S){return d(S,[])}function d(S,k){switch(E(S)){case"string":return JSON.stringify(S);case"function":return S.name?"[function ".concat(S.name,"]"):"[function]";case"object":return S===null?"null":p(S,k);default:return String(S)}}function p(S,k){if(k.indexOf(S)!==-1)return"[Circular]";var _=[].concat(k,[S]),x=N(S);if(x!==void 0){var V=x.call(S);if(V!==S)return typeof V=="string"?V:d(V,_)}else if(Array.isArray(S))return y(S,_);return v(S,_)}function v(S,k){var _=Object.keys(S);if(_.length===0)return"{}";if(k.length>m)return"["+Q(S)+"]";var x=_.map(function(V){var W=d(S[V],k);return V+": "+W});return"{ "+x.join(", ")+" }"}function y(S,k){if(S.length===0)return"[]";if(k.length>m)return"[Array]";for(var _=Math.min(g,S.length),x=S.length-_,V=[],W=0;W<_;++W)V.push(d(S[W],k));return x===1?V.push("... 1 more item"):x>1&&V.push("... ".concat(x," more items")),"["+V.join(", ")+"]"}function N(S){var k=S[String(C.default)];if(typeof k=="function")return k;if(typeof S.inspect=="function")return S.inspect}function Q(S){var k=Object.prototype.toString.call(S).replace(/^\[object /,"").replace(/]$/,"");if(k==="Object"&&typeof S.constructor=="function"){var _=S.constructor.name;if(typeof _=="string"&&_!=="")return _}return k}},7706:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=w;function w(C,D){var E=Boolean(C);if(!E)throw new Error(D!=null?D:"Unexpected invariant triggered.")}},8554:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var w=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,C=w;F.default=C},1807:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isNode=m,F.Token=F.Location=void 0;var C=D(w(972));function D(f){return f&&f.__esModule?f:{default:f}}var E=function(){function f(p,v,y){this.start=p.start,this.end=v.end,this.startToken=p,this.endToken=v,this.source=y}var d=f.prototype;return d.toJSON=function(){return{start:this.start,end:this.end}},f}();F.Location=E,(0,C.default)(E);var g=function(){function f(p,v,y,N,Q,S,k){this.kind=p,this.start=v,this.end=y,this.line=N,this.column=Q,this.value=k,this.prev=S,this.next=null}var d=f.prototype;return d.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},f}();F.Token=g,(0,C.default)(g);function m(f){return f!=null&&typeof f.kind=="string"}},849:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.dedentBlockStringValue=w,F.getBlockStringIndentation=D,F.printBlockString=E;function w(g){var m=g.split(/\r\n|[\n\r]/g),f=D(g);if(f!==0)for(var d=1;d<m.length;d++)m[d]=m[d].slice(f);for(var p=0;p<m.length&&C(m[p]);)++p;for(var v=m.length;v>p&&C(m[v-1]);)--v;return m.slice(p,v).join(`
`)}function C(g){for(var m=0;m<g.length;++m)if(g[m]!==" "&&g[m]!=="	")return!1;return!0}function D(g){for(var m,f=!0,d=!0,p=0,v=null,y=0;y<g.length;++y)switch(g.charCodeAt(y)){case 13:g.charCodeAt(y+1)===10&&++y;case 10:f=!1,d=!0,p=0;break;case 9:case 32:++p;break;default:d&&!f&&(v===null||p<v)&&(v=p),d=!1}return(m=v)!==null&&m!==void 0?m:0}function E(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=g.indexOf(`
`)===-1,p=g[0]===" "||g[0]==="	",v=g[g.length-1]==='"',y=g[g.length-1]==="\\",N=!d||v||y||f,Q="";return N&&!(d&&p)&&(Q+=`
`+m),Q+=m?g.replace(/\n/g,`
`+m):g,N&&(Q+=`
`),'"""'+Q.replace(/"""/g,'\\"""')+'"""'}},3033:(l,F,w)=>{"use strict";var C;C={value:!0},F.S=g;var D=w(285),E=w(849);function g(k){return(0,D.visit)(k,{leave:f})}var m=80,f={Name:function(_){return _.value},Variable:function(_){return"$"+_.name},Document:function(_){return p(_.definitions,`

`)+`
`},OperationDefinition:function(_){var x=_.operation,V=_.name,W=y("(",p(_.variableDefinitions,", "),")"),j=p(_.directives," "),X=_.selectionSet;return!V&&!j&&!W&&x==="query"?X:p([x,p([V,W]),j,X]," ")},VariableDefinition:function(_){var x=_.variable,V=_.type,W=_.defaultValue,j=_.directives;return x+": "+V+y(" = ",W)+y(" ",p(j," "))},SelectionSet:function(_){var x=_.selections;return v(x)},Field:function(_){var x=_.alias,V=_.name,W=_.arguments,j=_.directives,X=_.selectionSet,A=y("",x,": ")+V,G=A+y("(",p(W,", "),")");return G.length>m&&(G=A+y(`(
`,N(p(W,`
`)),`
)`)),p([G,p(j," "),X]," ")},Argument:function(_){var x=_.name,V=_.value;return x+": "+V},FragmentSpread:function(_){var x=_.name,V=_.directives;return"..."+x+y(" ",p(V," "))},InlineFragment:function(_){var x=_.typeCondition,V=_.directives,W=_.selectionSet;return p(["...",y("on ",x),p(V," "),W]," ")},FragmentDefinition:function(_){var x=_.name,V=_.typeCondition,W=_.variableDefinitions,j=_.directives,X=_.selectionSet;return"fragment ".concat(x).concat(y("(",p(W,", "),")")," ")+"on ".concat(V," ").concat(y("",p(j," ")," "))+X},IntValue:function(_){var x=_.value;return x},FloatValue:function(_){var x=_.value;return x},StringValue:function(_,x){var V=_.value,W=_.block;return W?(0,E.printBlockString)(V,x==="description"?"":"  "):JSON.stringify(V)},BooleanValue:function(_){var x=_.value;return x?"true":"false"},NullValue:function(){return"null"},EnumValue:function(_){var x=_.value;return x},ListValue:function(_){var x=_.values;return"["+p(x,", ")+"]"},ObjectValue:function(_){var x=_.fields;return"{"+p(x,", ")+"}"},ObjectField:function(_){var x=_.name,V=_.value;return x+": "+V},Directive:function(_){var x=_.name,V=_.arguments;return"@"+x+y("(",p(V,", "),")")},NamedType:function(_){var x=_.name;return x},ListType:function(_){var x=_.type;return"["+x+"]"},NonNullType:function(_){var x=_.type;return x+"!"},SchemaDefinition:d(function(k){var _=k.directives,x=k.operationTypes;return p(["schema",p(_," "),v(x)]," ")}),OperationTypeDefinition:function(_){var x=_.operation,V=_.type;return x+": "+V},ScalarTypeDefinition:d(function(k){var _=k.name,x=k.directives;return p(["scalar",_,p(x," ")]," ")}),ObjectTypeDefinition:d(function(k){var _=k.name,x=k.interfaces,V=k.directives,W=k.fields;return p(["type",_,y("implements ",p(x," & ")),p(V," "),v(W)]," ")}),FieldDefinition:d(function(k){var _=k.name,x=k.arguments,V=k.type,W=k.directives;return _+(S(x)?y(`(
`,N(p(x,`
`)),`
)`):y("(",p(x,", "),")"))+": "+V+y(" ",p(W," "))}),InputValueDefinition:d(function(k){var _=k.name,x=k.type,V=k.defaultValue,W=k.directives;return p([_+": "+x,y("= ",V),p(W," ")]," ")}),InterfaceTypeDefinition:d(function(k){var _=k.name,x=k.interfaces,V=k.directives,W=k.fields;return p(["interface",_,y("implements ",p(x," & ")),p(V," "),v(W)]," ")}),UnionTypeDefinition:d(function(k){var _=k.name,x=k.directives,V=k.types;return p(["union",_,p(x," "),V&&V.length!==0?"= "+p(V," | "):""]," ")}),EnumTypeDefinition:d(function(k){var _=k.name,x=k.directives,V=k.values;return p(["enum",_,p(x," "),v(V)]," ")}),EnumValueDefinition:d(function(k){var _=k.name,x=k.directives;return p([_,p(x," ")]," ")}),InputObjectTypeDefinition:d(function(k){var _=k.name,x=k.directives,V=k.fields;return p(["input",_,p(x," "),v(V)]," ")}),DirectiveDefinition:d(function(k){var _=k.name,x=k.arguments,V=k.repeatable,W=k.locations;return"directive @"+_+(S(x)?y(`(
`,N(p(x,`
`)),`
)`):y("(",p(x,", "),")"))+(V?" repeatable":"")+" on "+p(W," | ")}),SchemaExtension:function(_){var x=_.directives,V=_.operationTypes;return p(["extend schema",p(x," "),v(V)]," ")},ScalarTypeExtension:function(_){var x=_.name,V=_.directives;return p(["extend scalar",x,p(V," ")]," ")},ObjectTypeExtension:function(_){var x=_.name,V=_.interfaces,W=_.directives,j=_.fields;return p(["extend type",x,y("implements ",p(V," & ")),p(W," "),v(j)]," ")},InterfaceTypeExtension:function(_){var x=_.name,V=_.interfaces,W=_.directives,j=_.fields;return p(["extend interface",x,y("implements ",p(V," & ")),p(W," "),v(j)]," ")},UnionTypeExtension:function(_){var x=_.name,V=_.directives,W=_.types;return p(["extend union",x,p(V," "),W&&W.length!==0?"= "+p(W," | "):""]," ")},EnumTypeExtension:function(_){var x=_.name,V=_.directives,W=_.values;return p(["extend enum",x,p(V," "),v(W)]," ")},InputObjectTypeExtension:function(_){var x=_.name,V=_.directives,W=_.fields;return p(["extend input",x,p(V," "),v(W)]," ")}};function d(k){return function(_){return p([_.description,k(_)],`
`)}}function p(k){var _,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(_=k==null?void 0:k.filter(function(V){return V}).join(x))!==null&&_!==void 0?_:""}function v(k){return y(`{
`,N(p(k,`
`)),`
}`)}function y(k,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return _!=null&&_!==""?k+_+x:""}function N(k){return y("  ",k.replace(/\n/g,`
  `))}function Q(k){return k.indexOf(`
`)!==-1}function S(k){return k!=null&&k.some(Q)}},285:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.visit=f,F.visitInParallel=d,F.getVisitFn=p,F.BREAK=F.QueryDocumentKeys=void 0;var C=E(w(8002)),D=w(1807);function E(v){return v&&v.__esModule?v:{default:v}}var g={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};F.QueryDocumentKeys=g;var m=Object.freeze({});F.BREAK=m;function f(v,y){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g,Q=void 0,S=Array.isArray(v),k=[v],_=-1,x=[],V=void 0,W=void 0,j=void 0,X=[],A=[],G=v;do{_++;var O=_===k.length,I=O&&x.length!==0;if(O){if(W=A.length===0?void 0:X[X.length-1],V=j,j=A.pop(),I){if(S)V=V.slice();else{for(var P={},U=0,T=Object.keys(V);U<T.length;U++){var M=T[U];P[M]=V[M]}V=P}for(var B=0,J=0;J<x.length;J++){var ie=x[J][0],ee=x[J][1];S&&(ie-=B),S&&ee===null?(V.splice(ie,1),B++):V[ie]=ee}}_=Q.index,k=Q.keys,x=Q.edits,S=Q.inArray,Q=Q.prev}else{if(W=j?S?_:k[_]:void 0,V=j?j[W]:G,V==null)continue;j&&X.push(W)}var se=void 0;if(!Array.isArray(V)){if(!(0,D.isNode)(V))throw new Error("Invalid AST Node: ".concat((0,C.default)(V),"."));var ue=p(y,V.kind,O);if(ue){if(se=ue.call(y,V,W,j,X,A),se===m)break;if(se===!1){if(!O){X.pop();continue}}else if(se!==void 0&&(x.push([W,se]),!O))if((0,D.isNode)(se))V=se;else{X.pop();continue}}}if(se===void 0&&I&&x.push([W,V]),O)X.pop();else{var pe;Q={inArray:S,index:_,keys:k,edits:x,prev:Q},S=Array.isArray(V),k=S?V:(pe=N[V.kind])!==null&&pe!==void 0?pe:[],_=-1,x=[],j&&A.push(j),j=V}}while(Q!==void 0);return x.length!==0&&(G=x[x.length-1][1]),G}function d(v){var y=new Array(v.length);return{enter:function(Q){for(var S=0;S<v.length;S++)if(y[S]==null){var k=p(v[S],Q.kind,!1);if(k){var _=k.apply(v[S],arguments);if(_===!1)y[S]=Q;else if(_===m)y[S]=m;else if(_!==void 0)return _}}},leave:function(Q){for(var S=0;S<v.length;S++)if(y[S]==null){var k=p(v[S],Q.kind,!0);if(k){var _=k.apply(v[S],arguments);if(_===m)y[S]=m;else if(_!==void 0&&_!==!1)return _}}else y[S]===Q&&(y[S]=null)}}}function p(v,y,N){var Q=v[y];if(Q){if(!N&&typeof Q=="function")return Q;var S=N?Q.leave:Q.enter;if(typeof S=="function")return S}else{var k=N?v.leave:v.enter;if(k){if(typeof k=="function")return k;var _=k[y];if(typeof _=="function")return _}}}},9593:(l,F,w)=>{"use strict";const C=w(4411),D=Symbol("max"),E=Symbol("length"),g=Symbol("lengthCalculator"),m=Symbol("allowStale"),f=Symbol("maxAge"),d=Symbol("dispose"),p=Symbol("noDisposeOnSet"),v=Symbol("lruList"),y=Symbol("cache"),N=Symbol("updateAgeOnGet"),Q=()=>1;class S{constructor(A){if(typeof A=="number"&&(A={max:A}),A||(A={}),A.max&&(typeof A.max!="number"||A.max<0))throw new TypeError("max must be a non-negative number");const G=this[D]=A.max||Infinity,O=A.length||Q;if(this[g]=typeof O!="function"?Q:O,this[m]=A.stale||!1,A.maxAge&&typeof A.maxAge!="number")throw new TypeError("maxAge must be a number");this[f]=A.maxAge||0,this[d]=A.dispose,this[p]=A.noDisposeOnSet||!1,this[N]=A.updateAgeOnGet||!1,this.reset()}set max(A){if(typeof A!="number"||A<0)throw new TypeError("max must be a non-negative number");this[D]=A||Infinity,x(this)}get max(){return this[D]}set allowStale(A){this[m]=!!A}get allowStale(){return this[m]}set maxAge(A){if(typeof A!="number")throw new TypeError("maxAge must be a non-negative number");this[f]=A,x(this)}get maxAge(){return this[f]}set lengthCalculator(A){typeof A!="function"&&(A=Q),A!==this[g]&&(this[g]=A,this[E]=0,this[v].forEach(G=>{G.length=this[g](G.value,G.key),this[E]+=G.length})),x(this)}get lengthCalculator(){return this[g]}get length(){return this[E]}get itemCount(){return this[v].length}rforEach(A,G){G=G||this;for(let O=this[v].tail;O!==null;){const I=O.prev;j(this,A,O,G),O=I}}forEach(A,G){G=G||this;for(let O=this[v].head;O!==null;){const I=O.next;j(this,A,O,G),O=I}}keys(){return this[v].toArray().map(A=>A.key)}values(){return this[v].toArray().map(A=>A.value)}reset(){this[d]&&this[v]&&this[v].length&&this[v].forEach(A=>this[d](A.key,A.value)),this[y]=new Map,this[v]=new C,this[E]=0}dump(){return this[v].map(A=>_(this,A)?!1:{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[v]}set(A,G,O){if(O=O||this[f],O&&typeof O!="number")throw new TypeError("maxAge must be a number");const I=O?Date.now():0,P=this[g](G,A);if(this[y].has(A)){if(P>this[D])return V(this,this[y].get(A)),!1;const M=this[y].get(A).value;return this[d]&&(this[p]||this[d](A,M.value)),M.now=I,M.maxAge=O,M.value=G,this[E]+=P-M.length,M.length=P,this.get(A),x(this),!0}const U=new W(A,G,P,I,O);return U.length>this[D]?(this[d]&&this[d](A,G),!1):(this[E]+=U.length,this[v].unshift(U),this[y].set(A,this[v].head),x(this),!0)}has(A){if(!this[y].has(A))return!1;const G=this[y].get(A).value;return!_(this,G)}get(A){return k(this,A,!0)}peek(A){return k(this,A,!1)}pop(){const A=this[v].tail;return A?(V(this,A),A.value):null}del(A){V(this,this[y].get(A))}load(A){this.reset();const G=Date.now();for(let O=A.length-1;O>=0;O--){const I=A[O],P=I.e||0;if(P===0)this.set(I.k,I.v);else{const U=P-G;U>0&&this.set(I.k,I.v,U)}}}prune(){this[y].forEach((A,G)=>k(this,G,!1))}}const k=(X,A,G)=>{const O=X[y].get(A);if(O){const I=O.value;if(_(X,I)){if(V(X,O),!X[m])return}else G&&(X[N]&&(O.value.now=Date.now()),X[v].unshiftNode(O));return I.value}},_=(X,A)=>{if(!A||!A.maxAge&&!X[f])return!1;const G=Date.now()-A.now;return A.maxAge?G>A.maxAge:X[f]&&G>X[f]},x=X=>{if(X[E]>X[D])for(let A=X[v].tail;X[E]>X[D]&&A!==null;){const G=A.prev;V(X,A),A=G}},V=(X,A)=>{if(A){const G=A.value;X[d]&&X[d](G.key,G.value),X[E]-=G.length,X[y].delete(G.key),X[v].removeNode(A)}};class W{constructor(A,G,O,I,P){this.key=A,this.value=G,this.length=O,this.now=I,this.maxAge=P||0}}const j=(X,A,G,O)=>{let I=G.value;_(X,I)&&(V(X,G),X[m]||(I=void 0)),I&&A.call(O,I.value,I.key,X)};l.exports=S},7468:(l,F,w)=>{const C=w(9930),{defaults:D}=w(8644),{inline:E}=w(9709),{findClosingBracket:g,escape:m}=w(621);l.exports=class Hi{constructor(d,p){if(this.options=p||D,this.links=d,this.rules=E.normal,this.options.renderer=this.options.renderer||new C,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=E.pedantic:this.options.gfm&&(this.options.breaks?this.rules=E.breaks:this.rules=E.gfm)}static get rules(){return E}static output(d,p,v){return new Hi(p,v).output(d)}output(d){let p="",v,y,N,Q,S,k;for(;d;){if(S=this.rules.escape.exec(d)){d=d.substring(S[0].length),p+=m(S[1]);continue}if(S=this.rules.tag.exec(d)){!this.inLink&&/^<a /i.test(S[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(S[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(S[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(S[0])&&(this.inRawBlock=!1),d=d.substring(S[0].length),p+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(S[0]):m(S[0]):S[0]);continue}if(S=this.rules.link.exec(d)){const _=g(S[2],"()");if(_>-1){const V=(S[0].indexOf("!")===0?5:4)+S[1].length+_;S[2]=S[2].substring(0,_),S[0]=S[0].substring(0,V).trim(),S[3]=""}d=d.substring(S[0].length),this.inLink=!0,N=S[2],this.options.pedantic?(v=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(N),v?(N=v[1],Q=v[3]):Q=""):Q=S[3]?S[3].slice(1,-1):"",N=N.trim().replace(/^<([\s\S]*)>$/,"$1"),p+=this.outputLink(S,{href:Hi.escapes(N),title:Hi.escapes(Q)}),this.inLink=!1;continue}if((S=this.rules.reflink.exec(d))||(S=this.rules.nolink.exec(d))){if(d=d.substring(S[0].length),v=(S[2]||S[1]).replace(/\s+/g," "),v=this.links[v.toLowerCase()],!v||!v.href){p+=S[0].charAt(0),d=S[0].substring(1)+d;continue}this.inLink=!0,p+=this.outputLink(S,v),this.inLink=!1;continue}if(S=this.rules.strong.exec(d)){d=d.substring(S[0].length),p+=this.renderer.strong(this.output(S[4]||S[3]||S[2]||S[1]));continue}if(S=this.rules.em.exec(d)){d=d.substring(S[0].length),p+=this.renderer.em(this.output(S[6]||S[5]||S[4]||S[3]||S[2]||S[1]));continue}if(S=this.rules.code.exec(d)){d=d.substring(S[0].length),p+=this.renderer.codespan(m(S[2].trim(),!0));continue}if(S=this.rules.br.exec(d)){d=d.substring(S[0].length),p+=this.renderer.br();continue}if(S=this.rules.del.exec(d)){d=d.substring(S[0].length),p+=this.renderer.del(this.output(S[1]));continue}if(S=this.rules.autolink.exec(d)){d=d.substring(S[0].length),S[2]==="@"?(y=m(this.mangle(S[1])),N="mailto:"+y):(y=m(S[1]),N=y),p+=this.renderer.link(N,null,y);continue}if(!this.inLink&&(S=this.rules.url.exec(d))){if(S[2]==="@")y=m(S[0]),N="mailto:"+y;else{do k=S[0],S[0]=this.rules._backpedal.exec(S[0])[0];while(k!==S[0]);y=m(S[0]),S[1]==="www."?N="http://"+y:N=y}d=d.substring(S[0].length),p+=this.renderer.link(N,null,y);continue}if(S=this.rules.text.exec(d)){d=d.substring(S[0].length),this.inRawBlock?p+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(S[0]):m(S[0]):S[0]):p+=this.renderer.text(m(this.smartypants(S[0])));continue}if(d)throw new Error("Infinite loop on byte: "+d.charCodeAt(0))}return p}static escapes(d){return d&&d.replace(Hi.rules._escapes,"$1")}outputLink(d,p){const v=p.href,y=p.title?m(p.title):null;return d[0].charAt(0)!=="!"?this.renderer.link(v,y,this.output(d[1])):this.renderer.image(v,y,m(d[1]))}smartypants(d){return this.options.smartypants?d.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):d}mangle(d){if(!this.options.mangle)return d;const p=d.length;let v="",y=0,N;for(;y<p;y++)N=d.charCodeAt(y),Math.random()>.5&&(N="x"+N.toString(16)),v+="&#"+N+";";return v}}},1092:(l,F,w)=>{const{defaults:C}=w(8644),{block:D}=w(9709),{rtrim:E,splitCells:g,escape:m}=w(621);l.exports=class ol{constructor(d){this.tokens=[],this.tokens.links=Object.create(null),this.options=d||C,this.rules=D.normal,this.options.pedantic?this.rules=D.pedantic:this.options.gfm&&(this.rules=D.gfm)}static get rules(){return D}static lex(d,p){return new ol(p).lex(d)}lex(d){return d=d.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(d,!0)}token(d,p){d=d.replace(/^ +$/gm,"");let v,y,N,Q,S,k,_,x,V,W,j,X,A,G,O,I;for(;d;){if((N=this.rules.newline.exec(d))&&(d=d.substring(N[0].length),N[0].length>1&&this.tokens.push({type:"space"})),N=this.rules.code.exec(d)){const P=this.tokens[this.tokens.length-1];d=d.substring(N[0].length),P&&P.type==="paragraph"?P.text+=`
`+N[0].trimRight():(N=N[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?N:E(N,`
`)}));continue}if(N=this.rules.fences.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"code",lang:N[2]?N[2].trim():N[2],text:N[3]||""});continue}if(N=this.rules.heading.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"heading",depth:N[1].length,text:N[2]});continue}if((N=this.rules.nptable.exec(d))&&(k={type:"table",header:g(N[1].replace(/^ *| *\| *$/g,"")),align:N[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:N[3]?N[3].replace(/\n$/,"").split(`
`):[]},k.header.length===k.align.length)){for(d=d.substring(N[0].length),j=0;j<k.align.length;j++)/^ *-+: *$/.test(k.align[j])?k.align[j]="right":/^ *:-+: *$/.test(k.align[j])?k.align[j]="center":/^ *:-+ *$/.test(k.align[j])?k.align[j]="left":k.align[j]=null;for(j=0;j<k.cells.length;j++)k.cells[j]=g(k.cells[j],k.header.length);this.tokens.push(k);continue}if(N=this.rules.hr.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"hr"});continue}if(N=this.rules.blockquote.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"blockquote_start"}),N=N[0].replace(/^ *> ?/gm,""),this.token(N,p),this.tokens.push({type:"blockquote_end"});continue}if(N=this.rules.list.exec(d)){for(d=d.substring(N[0].length),Q=N[2],G=Q.length>1,_={type:"list_start",ordered:G,start:G?+Q:"",loose:!1},this.tokens.push(_),N=N[0].match(this.rules.item),x=[],v=!1,A=N.length,j=0;j<A;j++)k=N[j],W=k.length,k=k.replace(/^ *([*+-]|\d+\.) */,""),~k.indexOf(`
 `)&&(W-=k.length,k=this.options.pedantic?k.replace(/^ {1,4}/gm,""):k.replace(new RegExp("^ {1,"+W+"}","gm"),"")),j!==A-1&&(S=D.bullet.exec(N[j+1])[0],(Q.length>1?S.length===1:S.length>1||this.options.smartLists&&S!==Q)&&(d=N.slice(j+1).join(`
`)+d,j=A-1)),y=v||/\n\n(?!\s*$)/.test(k),j!==A-1&&(v=k.charAt(k.length-1)===`
`,y||(y=v)),y&&(_.loose=!0),O=/^\[[ xX]\] /.test(k),I=void 0,O&&(I=k[1]!==" ",k=k.replace(/^\[[ xX]\] +/,"")),V={type:"list_item_start",task:O,checked:I,loose:y},x.push(V),this.tokens.push(V),this.token(k,!1),this.tokens.push({type:"list_item_end"});if(_.loose)for(A=x.length,j=0;j<A;j++)x[j].loose=!0;this.tokens.push({type:"list_end"});continue}if(N=this.rules.html.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(N[1]==="pre"||N[1]==="script"||N[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(N[0]):m(N[0]):N[0]});continue}if(p&&(N=this.rules.def.exec(d))){d=d.substring(N[0].length),N[3]&&(N[3]=N[3].substring(1,N[3].length-1)),X=N[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[X]||(this.tokens.links[X]={href:N[2],title:N[3]});continue}if((N=this.rules.table.exec(d))&&(k={type:"table",header:g(N[1].replace(/^ *| *\| *$/g,"")),align:N[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:N[3]?N[3].replace(/\n$/,"").split(`
`):[]},k.header.length===k.align.length)){for(d=d.substring(N[0].length),j=0;j<k.align.length;j++)/^ *-+: *$/.test(k.align[j])?k.align[j]="right":/^ *:-+: *$/.test(k.align[j])?k.align[j]="center":/^ *:-+ *$/.test(k.align[j])?k.align[j]="left":k.align[j]=null;for(j=0;j<k.cells.length;j++)k.cells[j]=g(k.cells[j].replace(/^ *\| *| *\| *$/g,""),k.header.length);this.tokens.push(k);continue}if(N=this.rules.lheading.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"heading",depth:N[2].charAt(0)==="="?1:2,text:N[1]});continue}if(p&&(N=this.rules.paragraph.exec(d))){d=d.substring(N[0].length),this.tokens.push({type:"paragraph",text:N[1].charAt(N[1].length-1)===`
`?N[1].slice(0,-1):N[1]});continue}if(N=this.rules.text.exec(d)){d=d.substring(N[0].length),this.tokens.push({type:"text",text:N[0]});continue}if(d)throw new Error("Infinite loop on byte: "+d.charCodeAt(0))}return this.tokens}}},9170:(l,F,w)=>{const C=w(9930),D=w(1846),E=w(7468),g=w(1477),{defaults:m}=w(8644),{merge:f,unescape:d}=w(621);l.exports=class ll{constructor(v){this.tokens=[],this.token=null,this.options=v||m,this.options.renderer=this.options.renderer||new C,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new D}static parse(v,y){return new ll(y).parse(v)}parse(v){this.inline=new E(v.links,this.options),this.inlineText=new E(v.links,f({},this.options,{renderer:new g})),this.tokens=v.reverse();let y="";for(;this.next();)y+=this.tok();return y}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let v=this.token.text;for(;this.peek().type==="text";)v+=`
`+this.next().text;return this.inline.output(v)}tok(){let v="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,d(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let y="",N,Q,S,k;for(S="",N=0;N<this.token.header.length;N++)S+=this.renderer.tablecell(this.inline.output(this.token.header[N]),{header:!0,align:this.token.align[N]});for(y+=this.renderer.tablerow(S),N=0;N<this.token.cells.length;N++){for(Q=this.token.cells[N],S="",k=0;k<Q.length;k++)S+=this.renderer.tablecell(this.inline.output(Q[k]),{header:!1,align:this.token.align[k]});v+=this.renderer.tablerow(S)}return this.renderer.table(y,v)}case"blockquote_start":{for(v="";this.next().type!=="blockquote_end";)v+=this.tok();return this.renderer.blockquote(v)}case"list_start":{v="";const y=this.token.ordered,N=this.token.start;for(;this.next().type!=="list_end";)v+=this.tok();return this.renderer.list(v,y,N)}case"list_item_start":{v="";const y=this.token.loose,N=this.token.checked,Q=this.token.task;if(this.token.task)if(y)if(this.peek().type==="text"){const S=this.peek();S.text=this.renderer.checkbox(N)+" "+S.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(N)});else v+=this.renderer.checkbox(N);for(;this.next().type!=="list_item_end";)v+=!y&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(v,Q,N)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const y='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(y);else throw new Error(y)}}}}},9930:(l,F,w)=>{const{defaults:C}=w(8644),{cleanUrl:D,escape:E}=w(621);l.exports=class{constructor(m){this.options=m||C}code(m,f,d){const p=(f||"").match(/\S*/)[0];if(this.options.highlight){const v=this.options.highlight(m,p);v!=null&&v!==m&&(d=!0,m=v)}return p?'<pre><code class="'+this.options.langPrefix+E(p,!0)+'">'+(d?m:E(m,!0))+`</code></pre>
`:"<pre><code>"+(d?m:E(m,!0))+"</code></pre>"}blockquote(m){return`<blockquote>
`+m+`</blockquote>
`}html(m){return m}heading(m,f,d,p){return this.options.headerIds?"<h"+f+' id="'+this.options.headerPrefix+p.slug(d)+'">'+m+"</h"+f+`>
`:"<h"+f+">"+m+"</h"+f+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(m,f,d){const p=f?"ol":"ul",v=f&&d!==1?' start="'+d+'"':"";return"<"+p+v+`>
`+m+"</"+p+`>
`}listitem(m){return"<li>"+m+`</li>
`}checkbox(m){return"<input "+(m?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(m){return"<p>"+m+`</p>
`}table(m,f){return f&&(f="<tbody>"+f+"</tbody>"),`<table>
<thead>
`+m+`</thead>
`+f+`</table>
`}tablerow(m){return`<tr>
`+m+`</tr>
`}tablecell(m,f){const d=f.header?"th":"td";return(f.align?"<"+d+' align="'+f.align+'">':"<"+d+">")+m+"</"+d+`>
`}strong(m){return"<strong>"+m+"</strong>"}em(m){return"<em>"+m+"</em>"}codespan(m){return"<code>"+m+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(m){return"<del>"+m+"</del>"}link(m,f,d){if(m=D(this.options.sanitize,this.options.baseUrl,m),m===null)return d;let p='<a href="'+E(m)+'"';return f&&(p+=' title="'+f+'"'),p+=">"+d+"</a>",p}image(m,f,d){if(m=D(this.options.sanitize,this.options.baseUrl,m),m===null)return d;let p='<img src="'+m+'" alt="'+d+'"';return f&&(p+=' title="'+f+'"'),p+=this.options.xhtml?"/>":">",p}text(m){return m}}},1846:l=>{l.exports=class{constructor(){this.seen={}}slug(w){let C=w.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(C)){const D=C;do this.seen[D]++,C=D+"-"+this.seen[D];while(this.seen.hasOwnProperty(C))}return this.seen[C]=0,C}}},1477:l=>{l.exports=class{strong(w){return w}em(w){return w}codespan(w){return w}del(w){return w}html(w){return w}text(w){return w}link(w,C,D){return""+D}image(w,C,D){return""+D}br(){return""}}},8644:l=>{function F(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function w(C){l.exports.defaults=C}l.exports={defaults:F(),getDefaults:F,changeDefaults:w}},621:l=>{const F=/[&<>"']/,w=/[&<>"']/g,C=/[<>"']|&(?!#?\w+;)/,D=/[<>"']|&(?!#?\w+;)/g,E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=I=>E[I];function m(I,P){if(P){if(F.test(I))return I.replace(w,g)}else if(C.test(I))return I.replace(D,g);return I}const f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function d(I){return I.replace(f,(P,U)=>(U=U.toLowerCase(),U==="colon"?":":U.charAt(0)==="#"?U.charAt(1)==="x"?String.fromCharCode(parseInt(U.substring(2),16)):String.fromCharCode(+U.substring(1)):""))}const p=/(^|[^\[])\^/g;function v(I,P){I=I.source||I,P=P||"";const U={replace:(T,M)=>(M=M.source||M,M=M.replace(p,"$1"),I=I.replace(T,M),U),getRegex:()=>new RegExp(I,P)};return U}const y=/[^\w:]/g,N=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Q(I,P,U){if(I){let T;try{T=decodeURIComponent(d(U)).replace(y,"").toLowerCase()}catch(M){return null}if(T.indexOf("javascript:")===0||T.indexOf("vbscript:")===0||T.indexOf("data:")===0)return null}P&&!N.test(U)&&(U=V(P,U));try{U=encodeURI(U).replace(/%25/g,"%")}catch(T){return null}return U}const S={},k=/^[^:]+:\/*[^/]*$/,_=/^([^:]+:)[\s\S]*$/,x=/^([^:]+:\/*[^/]*)[\s\S]*$/;function V(I,P){S[" "+I]||(k.test(I)?S[" "+I]=I+"/":S[" "+I]=A(I,"/",!0)),I=S[" "+I];const U=I.indexOf(":")===-1;return P.substring(0,2)==="//"?U?P:I.replace(_,"$1")+P:P.charAt(0)==="/"?U?P:I.replace(x,"$1")+P:I+P}const W={exec:function(){}};function j(I){let P=1,U,T;for(;P<arguments.length;P++){U=arguments[P];for(T in U)Object.prototype.hasOwnProperty.call(U,T)&&(I[T]=U[T])}return I}function X(I,P){const U=I.replace(/\|/g,(B,J,ie)=>{let ee=!1,se=J;for(;--se>=0&&ie[se]==="\\";)ee=!ee;return ee?"|":" |"}),T=U.split(/ \|/);let M=0;if(T.length>P)T.splice(P);else for(;T.length<P;)T.push("");for(;M<T.length;M++)T[M]=T[M].trim().replace(/\\\|/g,"|");return T}function A(I,P,U){const T=I.length;if(T===0)return"";let M=0;for(;M<T;){const B=I.charAt(T-M-1);if(B===P&&!U)M++;else if(B!==P&&U)M++;else break}return I.substr(0,T-M)}function G(I,P){if(I.indexOf(P[1])===-1)return-1;const U=I.length;let T=0,M=0;for(;M<U;M++)if(I[M]==="\\")M++;else if(I[M]===P[0])T++;else if(I[M]===P[1]&&(T--,T<0))return M;return-1}function O(I){I&&I.sanitize&&!I.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}l.exports={escape:m,unescape:d,edit:v,cleanUrl:Q,resolveUrl:V,noopTest:W,merge:j,splitCells:X,rtrim:A,findClosingBracket:G,checkSanitizeDeprecation:O}},7228:(l,F,w)=>{const C=w(1092),D=w(9170),E=w(9930),g=w(1477),m=w(7468),f=w(1846),{merge:d,checkSanitizeDeprecation:p,escape:v}=w(621),{getDefaults:y,changeDefaults:N,defaults:Q}=w(8644);function S(k,_,x){if(typeof k=="undefined"||k===null)throw new Error("marked(): input parameter is undefined or null");if(typeof k!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(k)+", string expected");if(x||typeof _=="function"){x||(x=_,_=null),_=d({},S.defaults,_||{}),p(_);const V=_.highlight;let W,j,X=0;try{W=C.lex(k,_)}catch(G){return x(G)}j=W.length;const A=function(G){if(G)return _.highlight=V,x(G);let O;try{O=D.parse(W,_)}catch(I){G=I}return _.highlight=V,G?x(G):x(null,O)};if(!V||V.length<3||(delete _.highlight,!j))return A();for(;X<W.length;X++)(function(G){return G.type!=="code"?--j||A():V(G.text,G.lang,function(O,I){if(O)return A(O);if(I==null||I===G.text)return--j||A();G.text=I,G.escaped=!0,--j||A()})})(W[X]);return}try{return _=d({},S.defaults,_||{}),p(_),D.parse(C.lex(k,_),_)}catch(V){if(V.message+=`
Please report this to https://github.com/markedjs/marked.`,(_||S.defaults).silent)return"<p>An error occurred:</p><pre>"+v(V.message+"",!0)+"</pre>";throw V}}S.options=S.setOptions=function(k){return d(S.defaults,k),N(S.defaults),S},S.getDefaults=y,S.defaults=Q,S.Parser=D,S.parser=D.parse,S.Renderer=E,S.TextRenderer=g,S.Lexer=C,S.lexer=C.lex,S.InlineLexer=m,S.inlineLexer=m.output,S.Slugger=f,S.parse=S,l.exports=S},9709:(l,F,w)=>{const{noopTest:C,edit:D,merge:E}=w(621),g={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:C,table:C,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};g._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,g._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,g.def=D(g.def).replace("label",g._label).replace("title",g._title).getRegex(),g.bullet=/(?:[*+-]|\d{1,9}\.)/,g.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,g.item=D(g.item,"gm").replace(/bull/g,g.bullet).getRegex(),g.list=D(g.list).replace(/bull/g,g.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+g.def.source+")").getRegex(),g._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",g._comment=/<!--(?!-?>)[\s\S]*?-->/,g.html=D(g.html,"i").replace("comment",g._comment).replace("tag",g._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),g.paragraph=D(g._paragraph).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.blockquote=D(g.blockquote).replace("paragraph",g.paragraph).getRegex(),g.normal=E({},g),g.gfm=E({},g.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),g.gfm.nptable=D(g.gfm.nptable).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.gfm.table=D(g.gfm.table).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.pedantic=E({},g.normal,{html:D(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",g._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:C,paragraph:D(g.normal._paragraph).replace("hr",g.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",g.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const m={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:C,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:C,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};m._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,m.em=D(m.em).replace(/punctuation/g,m._punctuation).getRegex(),m._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,m._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,m._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,m.autolink=D(m.autolink).replace("scheme",m._scheme).replace("email",m._email).getRegex(),m._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,m.tag=D(m.tag).replace("comment",g._comment).replace("attribute",m._attribute).getRegex(),m._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,m._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,m._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,m.link=D(m.link).replace("label",m._label).replace("href",m._href).replace("title",m._title).getRegex(),m.reflink=D(m.reflink).replace("label",m._label).getRegex(),m.normal=E({},m),m.pedantic=E({},m.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:D(/^!?\[(label)\]\((.*?)\)/).replace("label",m._label).getRegex(),reflink:D(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",m._label).getRegex()}),m.gfm=E({},m.normal,{escape:D(m.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),m.gfm.url=D(m.gfm.url,"i").replace("email",m.gfm._extended_email).getRegex(),m.breaks=E({},m.gfm,{br:D(m.br).replace("{2,}","*").getRegex(),text:D(m.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),l.exports={block:g,inline:m}},778:(l,F,w)=>{var C=w(2479);l.exports=C(D),l.exports.strict=C(E),D.proto=D(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return D(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return E(this)},configurable:!0})});function D(g){var m=function(){return m.called?m.value:(m.called=!0,m.value=g.apply(this,arguments))};return m.called=!1,m}function E(g){var m=function(){if(m.called)throw new Error(m.onceError);return m.called=!0,m.value=g.apply(this,arguments)},f=g.name||"Function wrapped with `once`";return m.onceError=f+" shouldn't be called more than once",m.called=!1,m}},6470:l=>{"use strict";function F(E){if(typeof E!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(E))}function w(E,g){for(var m="",f=0,d=-1,p=0,v,y=0;y<=E.length;++y){if(y<E.length)v=E.charCodeAt(y);else{if(v===47)break;v=47}if(v===47){if(!(d===y-1||p===1))if(d!==y-1&&p===2){if(m.length<2||f!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var N=m.lastIndexOf("/");if(N!==m.length-1){N===-1?(m="",f=0):(m=m.slice(0,N),f=m.length-1-m.lastIndexOf("/")),d=y,p=0;continue}}else if(m.length===2||m.length===1){m="",f=0,d=y,p=0;continue}}g&&(m.length>0?m+="/..":m="..",f=2)}else m.length>0?m+="/"+E.slice(d+1,y):m=E.slice(d+1,y),f=y-d-1;d=y,p=0}else v===46&&p!==-1?++p:p=-1}return m}function C(E,g){var m=g.dir||g.root,f=g.base||(g.name||"")+(g.ext||"");return m?m===g.root?m+f:m+E+f:f}var D={resolve:function(){for(var g="",m=!1,f,d=arguments.length-1;d>=-1&&!m;d--){var p;d>=0?p=arguments[d]:(f===void 0&&(f=process.cwd()),p=f),F(p),p.length!==0&&(g=p+"/"+g,m=p.charCodeAt(0)===47)}return g=w(g,!m),m?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(g){if(F(g),g.length===0)return".";var m=g.charCodeAt(0)===47,f=g.charCodeAt(g.length-1)===47;return g=w(g,!m),g.length===0&&!m&&(g="."),g.length>0&&f&&(g+="/"),m?"/"+g:g},isAbsolute:function(g){return F(g),g.length>0&&g.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var g,m=0;m<arguments.length;++m){var f=arguments[m];F(f),f.length>0&&(g===void 0?g=f:g+="/"+f)}return g===void 0?".":D.normalize(g)},relative:function(g,m){if(F(g),F(m),g===m||(g=D.resolve(g),m=D.resolve(m),g===m))return"";for(var f=1;f<g.length&&g.charCodeAt(f)===47;++f);for(var d=g.length,p=d-f,v=1;v<m.length&&m.charCodeAt(v)===47;++v);for(var y=m.length,N=y-v,Q=p<N?p:N,S=-1,k=0;k<=Q;++k){if(k===Q){if(N>Q){if(m.charCodeAt(v+k)===47)return m.slice(v+k+1);if(k===0)return m.slice(v+k)}else p>Q&&(g.charCodeAt(f+k)===47?S=k:k===0&&(S=0));break}var _=g.charCodeAt(f+k),x=m.charCodeAt(v+k);if(_!==x)break;_===47&&(S=k)}var V="";for(k=f+S+1;k<=d;++k)(k===d||g.charCodeAt(k)===47)&&(V.length===0?V+="..":V+="/..");return V.length>0?V+m.slice(v+S):(v+=S,m.charCodeAt(v)===47&&++v,m.slice(v))},_makeLong:function(g){return g},dirname:function(g){if(F(g),g.length===0)return".";for(var m=g.charCodeAt(0),f=m===47,d=-1,p=!0,v=g.length-1;v>=1;--v)if(m=g.charCodeAt(v),m===47){if(!p){d=v;break}}else p=!1;return d===-1?f?"/":".":f&&d===1?"//":g.slice(0,d)},basename:function(g,m){if(m!==void 0&&typeof m!="string")throw new TypeError('"ext" argument must be a string');F(g);var f=0,d=-1,p=!0,v;if(m!==void 0&&m.length>0&&m.length<=g.length){if(m.length===g.length&&m===g)return"";var y=m.length-1,N=-1;for(v=g.length-1;v>=0;--v){var Q=g.charCodeAt(v);if(Q===47){if(!p){f=v+1;break}}else N===-1&&(p=!1,N=v+1),y>=0&&(Q===m.charCodeAt(y)?--y==-1&&(d=v):(y=-1,d=N))}return f===d?d=N:d===-1&&(d=g.length),g.slice(f,d)}else{for(v=g.length-1;v>=0;--v)if(g.charCodeAt(v)===47){if(!p){f=v+1;break}}else d===-1&&(p=!1,d=v+1);return d===-1?"":g.slice(f,d)}},extname:function(g){F(g);for(var m=-1,f=0,d=-1,p=!0,v=0,y=g.length-1;y>=0;--y){var N=g.charCodeAt(y);if(N===47){if(!p){f=y+1;break}continue}d===-1&&(p=!1,d=y+1),N===46?m===-1?m=y:v!==1&&(v=1):m!==-1&&(v=-1)}return m===-1||d===-1||v===0||v===1&&m===d-1&&m===f+1?"":g.slice(m,d)},format:function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return C("/",g)},parse:function(g){F(g);var m={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return m;var f=g.charCodeAt(0),d=f===47,p;d?(m.root="/",p=1):p=0;for(var v=-1,y=0,N=-1,Q=!0,S=g.length-1,k=0;S>=p;--S){if(f=g.charCodeAt(S),f===47){if(!Q){y=S+1;break}continue}N===-1&&(Q=!1,N=S+1),f===46?v===-1?v=S:k!==1&&(k=1):v!==-1&&(k=-1)}return v===-1||N===-1||k===0||k===1&&v===N-1&&v===y+1?N!==-1&&(y===0&&d?m.base=m.name=g.slice(1,N):m.base=m.name=g.slice(y,N)):(y===0&&d?(m.name=g.slice(1,v),m.base=g.slice(1,N)):(m.name=g.slice(y,v),m.base=g.slice(y,N)),m.ext=g.slice(v,N)),y>0?m.dir=g.slice(0,y-1):d&&(m.dir="/"),m},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D,l.exports=D},7121:(l,F,w)=>{"use strict";w.d(F,{Z:()=>g});function C(m){var f,d=m.Symbol;return typeof d=="function"?d.observable?f=d.observable:(f=d("observable"),d.observable=f):f="@@observable",f}l=w.hmd(l);var D;typeof self!="undefined"?D=self:typeof window!="undefined"?D=window:typeof w.g!="undefined"?D=w.g:D=l;var E=C(D);const g=E},4802:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var C=w(6363);F.ExperimentationService=C.ExperimentationService},6363:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(4067),D=w(4234),E=w(5975);class g extends E.ExperimentationServiceAutoPolling{constructor(f){super(f.telemetry,f.filterProviders||[],f.refetchInterval!=null?f.refetchInterval:0,f.featuresTelemetryPropertyName,f.assignmentContextTelemetryPropertyName,f.telemetryEventName,f.storageKey,f.keyValueStorage);this.options=f,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new C.TasApiFeatureProvider(new D.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}F.ExperimentationService=g,g.REFRESH_RATE_IN_MINUTES=30},5975:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(3663),D=w(3334);class E extends C.ExperimentationServiceBase{constructor(m,f,d,p,v,y,N,Q){super(m,p,v,y,N,Q);if(this.telemetry=m,this.filterProviders=f,this.refreshRateMs=d,this.featuresTelemetryPropertyName=p,this.assignmentContextTelemetryPropertyName=v,this.telemetryEventName=y,this.storageKey=N,this.storage=Q,d<1e3&&d!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");d>0&&(this.pollingService=new D.PollingService(d),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(m=!1){if(this.pollingService){this.pollingService.StopPolling();let f=await super.getFeaturesAsync(m);return this.pollingService.StartPolling(),f}else return await super.getFeaturesAsync(m)}}F.ExperimentationServiceAutoPolling=E},3663:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(7002);class D{constructor(g,m,f,d,p,v){this.telemetry=g,this.featuresTelemetryPropertyName=m,this.assignmentContextTelemetryPropertyName=f,this.telemetryEventName=d,this.storageKey=p,this.storage=v,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(v=new C.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(g){this._features=g,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(g=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async f=>await f.getFeatures()));let m=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(m,g),this.features}updateFeatures(g,m=!1){let f={features:[],assignmentContext:"",configs:[]};for(let d of g){for(let p of d.features)f.features.includes(p)||f.features.push(p);for(let p of d.configs){const v=f.configs.find(y=>y.Id===p.Id);v?v.Parameters=Object.assign(Object.assign({},v.Parameters),p.Parameters):f.configs.push(p)}f.assignmentContext+=d.assignmentContext}(m||!this.featuresConsumed)&&(this.features=f),this.storage&&this.storage.setValue(this.storageKey,f)}async loadCachedFeatureData(){let g;this.storage&&(g=await this.storage.getValue(this.storageKey),g!==void 0&&g.configs===void 0&&(g.configs=[])),this.features.features.length===0&&(this.features=g||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(g){return this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isCachedFlightEnabled(g){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isFlightEnabledAsync(g){const m=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(g),m.features.includes(g)}getTreatmentVariable(g,m){var f;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${g}.${m}`),(f=this.features.configs.find(p=>p.Id===g))===null||f===void 0?void 0:f.Parameters[m]}async getTreatmentVariableAsync(g,m){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(g,m)}PostEventToTelemetry(g){this.cachedTelemetryEvents.includes(g)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",g]])),this.cachedTelemetryEvents.push(g))}invokeInit(){this.init()}addFeatureProvider(...g){if(!(g==null||this.featureProviders==null))for(let m of g)this.featureProviders.push(m)}}F.ExperimentationServiceBase=D},69:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class w{constructor(D){this.telemetry=D,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let D=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,D}}F.BaseFeatureProvider=w},4e3:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(69);class D extends C.BaseFeatureProvider{constructor(g,m){super(g);this.telemetry=g,this.filterProviders=m,this.cachedTelemetryEvents=[]}getFilters(){let g=new Map;for(let m of this.filterProviders){let f=m.getFilters();for(let d of f.keys()){let p=f.get(d);g.set(d,p)}}return g}PostEventToTelemetry(g){if(this.cachedTelemetryEvents.includes(g))return;const m=JSON.stringify(g);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",m]])),this.cachedTelemetryEvents.push(g)}}F.FilteredFeatureProvider=D},4067:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(4e3);class D extends C.FilteredFeatureProvider{constructor(g,m,f){super(m,f);this.httpClient=g,this.telemetry=m,this.filterProviders=f}async fetch(){let g=this.getFilters(),m={};for(let y of g.keys()){const N=g.get(y);m[y]=N}let f=await this.httpClient.get({headers:m});g.keys.length>0&&this.PostEventToTelemetry(m);let d=f.data,p=d.Configs,v=[];for(let y of p)if(!!y.Parameters)for(let N of Object.keys(y.Parameters)){const Q=N+(y.Parameters[N]?"":"cf");v.includes(Q)||v.push(Q)}return{features:v,assignmentContext:d.AssignmentContext,configs:p}}}F.TasApiFeatureProvider=D},4234:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(9669);class D{constructor(g){this.endpoint=g}get(g){return C.default.get(this.endpoint,Object.assign(Object.assign({},g),{proxy:!1}))}}F.AxiosHttpClient=D},7002:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class w{constructor(){this.storage=new Map}async getValue(D,E){return this.storage.has(D)?await Promise.resolve(this.storage.get(D)):await Promise.resolve(E||void 0)}setValue(D,E){this.storage.set(D,E)}}F.MemoryKeyValueStorage=w},3334:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class w{constructor(D){this.fetchInterval=D}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(D){this.onTick=D}StartPolling(D=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(D&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}F.PollingService=w},9035:(l,F,w)=>{"use strict";var C;C={value:!0};var D=w(5654);C=D.getExperimentationService,C=D.getExperimentationServiceAsync;var E=w(2560);C=E.TargetPopulation},5708:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class w{constructor(D){this.mementoGlobalStorage=D}async getValue(D,E){return await this.mementoGlobalStorage.get(D)||E}setValue(D,E){this.mementoGlobalStorage.update(D,E)}}F.MementoKeyValueStorage=w},2560:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(7549);class D{constructor(f,d,p){this.extensionName=f,this.extensionVersion=d,this.targetPopulation=p}static trimVersionSuffix(f){const d=/\-[a-zA-Z0-9]+$/;return f.split(d)[0]}getFilterValue(f){switch(f){case E.ApplicationVersion:return D.trimVersionSuffix(C.version);case E.Build:return C.env.appName;case E.ClientId:return C.env.machineId;case E.ExtensionName:return this.extensionName;case E.ExtensionVersion:return D.trimVersionSuffix(this.extensionVersion);case E.Language:return C.env.language;case E.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let f=new Map,d=Object.values(E);for(let p of d)f.set(p,this.getFilterValue(p));return f}}F.VSCodeFilterProvider=D;var E;(function(m){m.Market="X-MSEdge-Market",m.CorpNet="X-FD-Corpnet",m.ApplicationVersion="X-VSCode-AppVersion",m.Build="X-VSCode-Build",m.ClientId="X-MSEdge-ClientId",m.ExtensionName="X-VSCode-ExtensionName",m.ExtensionVersion="X-VSCode-ExtensionVersion",m.Language="X-VSCode-Language",m.TargetPopulation="X-VSCode-TargetPopulation"})(E=F.Filters||(F.Filters={}));var g;(function(m){m.Team="team",m.Internal="internal",m.Insiders="insider",m.Public="public"})(g=F.TargetPopulation||(F.TargetPopulation={}))},5654:(l,F,w)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const C=w(2560),D=w(4802),E=w(5708),g="https://default.exp-tas.com/vscode/ab",m="query-expfeature",f="VSCode.ABExp.Features",d="abexp.assignmentcontext",p="VSCode.ABExp.FeatureData",v=1e3*60*30;function y(Q,S,k,_,x,...V){if(!x)throw new Error("Memento storage was not provided.");const j=[new C.VSCodeFilterProvider(Q,S,k),...V],X=new E.MementoKeyValueStorage(x);return new D.ExperimentationService({filterProviders:j,telemetry:_,storageKey:p,keyValueStorage:X,featuresTelemetryPropertyName:f,assignmentContextTelemetryPropertyName:d,telemetryEventName:m,endpoint:g,refetchInterval:v})}F.getExperimentationService=y;async function N(Q,S,k,_,x,...V){const W=y(Q,S,k,_,x,...V);return await W.initializePromise,W}F.getExperimentationServiceAsync=N},2479:l=>{l.exports=F;function F(w,C){if(w&&C)return F(w)(C);if(typeof w!="function")throw new TypeError("need wrapper function");return Object.keys(w).forEach(function(E){D[E]=w[E]}),D;function D(){for(var E=new Array(arguments.length),g=0;g<E.length;g++)E[g]=arguments[g];var m=w.apply(this,E),f=E[E.length-1];return typeof m=="function"&&m!==f&&Object.keys(f).forEach(function(d){m[d]=f[d]}),m}}},9602:l=>{"use strict";l.exports=function(F){F.prototype[Symbol.iterator]=function*(){for(let w=this.head;w;w=w.next)yield w.value}}},4411:(l,F,w)=>{"use strict";l.exports=C,C.Node=m,C.create=C;function C(f){var d=this;if(d instanceof C||(d=new C),d.tail=null,d.head=null,d.length=0,f&&typeof f.forEach=="function")f.forEach(function(y){d.push(y)});else if(arguments.length>0)for(var p=0,v=arguments.length;p<v;p++)d.push(arguments[p]);return d}C.prototype.removeNode=function(f){if(f.list!==this)throw new Error("removing node which does not belong to this list");var d=f.next,p=f.prev;return d&&(d.prev=p),p&&(p.next=d),f===this.head&&(this.head=d),f===this.tail&&(this.tail=p),f.list.length--,f.next=null,f.prev=null,f.list=null,d},C.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var d=this.head;f.list=this,f.next=d,d&&(d.prev=f),this.head=f,this.tail||(this.tail=f),this.length++}},C.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var d=this.tail;f.list=this,f.prev=d,d&&(d.next=f),this.tail=f,this.head||(this.head=f),this.length++}},C.prototype.push=function(){for(var f=0,d=arguments.length;f<d;f++)E(this,arguments[f]);return this.length},C.prototype.unshift=function(){for(var f=0,d=arguments.length;f<d;f++)g(this,arguments[f]);return this.length},C.prototype.pop=function(){if(!!this.tail){var f=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,f}},C.prototype.shift=function(){if(!!this.head){var f=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,f}},C.prototype.forEach=function(f,d){d=d||this;for(var p=this.head,v=0;p!==null;v++)f.call(d,p.value,v,this),p=p.next},C.prototype.forEachReverse=function(f,d){d=d||this;for(var p=this.tail,v=this.length-1;p!==null;v--)f.call(d,p.value,v,this),p=p.prev},C.prototype.get=function(f){for(var d=0,p=this.head;p!==null&&d<f;d++)p=p.next;if(d===f&&p!==null)return p.value},C.prototype.getReverse=function(f){for(var d=0,p=this.tail;p!==null&&d<f;d++)p=p.prev;if(d===f&&p!==null)return p.value},C.prototype.map=function(f,d){d=d||this;for(var p=new C,v=this.head;v!==null;)p.push(f.call(d,v.value,this)),v=v.next;return p},C.prototype.mapReverse=function(f,d){d=d||this;for(var p=new C,v=this.tail;v!==null;)p.push(f.call(d,v.value,this)),v=v.prev;return p},C.prototype.reduce=function(f,d){var p,v=this.head;if(arguments.length>1)p=d;else if(this.head)v=this.head.next,p=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=0;v!==null;y++)p=f(p,v.value,y),v=v.next;return p},C.prototype.reduceReverse=function(f,d){var p,v=this.tail;if(arguments.length>1)p=d;else if(this.tail)v=this.tail.prev,p=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=this.length-1;v!==null;y--)p=f(p,v.value,y),v=v.prev;return p},C.prototype.toArray=function(){for(var f=new Array(this.length),d=0,p=this.head;p!==null;d++)f[d]=p.value,p=p.next;return f},C.prototype.toArrayReverse=function(){for(var f=new Array(this.length),d=0,p=this.tail;p!==null;d++)f[d]=p.value,p=p.prev;return f},C.prototype.slice=function(f,d){d=d||this.length,d<0&&(d+=this.length),f=f||0,f<0&&(f+=this.length);var p=new C;if(d<f||d<0)return p;f<0&&(f=0),d>this.length&&(d=this.length);for(var v=0,y=this.head;y!==null&&v<f;v++)y=y.next;for(;y!==null&&v<d;v++,y=y.next)p.push(y.value);return p},C.prototype.sliceReverse=function(f,d){d=d||this.length,d<0&&(d+=this.length),f=f||0,f<0&&(f+=this.length);var p=new C;if(d<f||d<0)return p;f<0&&(f=0),d>this.length&&(d=this.length);for(var v=this.length,y=this.tail;y!==null&&v>d;v--)y=y.prev;for(;y!==null&&v>f;v--,y=y.prev)p.push(y.value);return p},C.prototype.splice=function(f,d,...p){f>this.length&&(f=this.length-1),f<0&&(f=this.length+f);for(var v=0,y=this.head;y!==null&&v<f;v++)y=y.next;for(var N=[],v=0;y&&v<d;v++)N.push(y.value),y=this.removeNode(y);y===null&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev);for(var v=0;v<p.length;v++)y=D(this,y,p[v]);return N},C.prototype.reverse=function(){for(var f=this.head,d=this.tail,p=f;p!==null;p=p.prev){var v=p.prev;p.prev=p.next,p.next=v}return this.head=d,this.tail=f,this};function D(f,d,p){var v=d===f.head?new m(p,null,d,f):new m(p,d,d.next,f);return v.next===null&&(f.tail=v),v.prev===null&&(f.head=v),f.length++,v}function E(f,d){f.tail=new m(d,f.tail,null,f),f.head||(f.head=f.tail),f.length++}function g(f,d){f.head=new m(d,null,f.head,f),f.tail||(f.tail=f.head),f.length++}function m(f,d,p,v){if(!(this instanceof m))return new m(f,d,p,v);this.list=v,this.value=f,d?(d.next=this,this.prev=d):this.prev=null,p?(p.prev=this,this.next=p):this.next=null}try{w(9602)(C)}catch(f){}},9329:(l,F,w)=>{l.exports=w(516).Observable},516:(l,F)=>{"use strict";var w;w={value:!0},F.Observable=void 0;function C(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function D(O,I){for(var P=0;P<I.length;P++){var U=I[P];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}function E(O,I,P){return I&&D(O.prototype,I),P&&D(O,P),O}var g=function(){return typeof Symbol=="function"},m=function(O){return g()&&Boolean(Symbol[O])},f=function(O){return m(O)?Symbol[O]:"@@"+O};g()&&!m("observable")&&(Symbol.observable=Symbol("observable"));var d=f("iterator"),p=f("observable"),v=f("species");function y(O,I){var P=O[I];if(P!=null){if(typeof P!="function")throw new TypeError(P+" is not a function");return P}}function N(O){var I=O.constructor;return I!==void 0&&(I=I[v],I===null&&(I=void 0)),I!==void 0?I:G}function Q(O){return O instanceof G}function S(O){S.log?S.log(O):setTimeout(function(){throw O})}function k(O){Promise.resolve().then(function(){try{O()}catch(I){S(I)}})}function _(O){var I=O._cleanup;if(I!==void 0&&(O._cleanup=void 0,!!I))try{if(typeof I=="function")I();else{var P=y(I,"unsubscribe");P&&P.call(I)}}catch(U){S(U)}}function x(O){O._observer=void 0,O._queue=void 0,O._state="closed"}function V(O){var I=O._queue;if(!!I){O._queue=void 0,O._state="ready";for(var P=0;P<I.length&&(W(O,I[P].type,I[P].value),O._state!=="closed");++P);}}function W(O,I,P){O._state="running";var U=O._observer;try{var T=y(U,I);switch(I){case"next":T&&T.call(U,P);break;case"error":if(x(O),T)T.call(U,P);else throw P;break;case"complete":x(O),T&&T.call(U);break}}catch(M){S(M)}O._state==="closed"?_(O):O._state==="running"&&(O._state="ready")}function j(O,I,P){if(O._state!=="closed"){if(O._state==="buffering"){O._queue.push({type:I,value:P});return}if(O._state!=="ready"){O._state="buffering",O._queue=[{type:I,value:P}],k(function(){return V(O)});return}W(O,I,P)}}var X=function(){function O(I,P){C(this,O),this._cleanup=void 0,this._observer=I,this._queue=void 0,this._state="initializing";var U=new A(this);try{this._cleanup=P.call(void 0,U)}catch(T){U.error(T)}this._state==="initializing"&&(this._state="ready")}return E(O,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(x(this),_(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),O}(),A=function(){function O(I){C(this,O),this._subscription=I}return E(O,[{key:"next",value:function(P){j(this._subscription,"next",P)}},{key:"error",value:function(P){j(this._subscription,"error",P)}},{key:"complete",value:function(){j(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),O}(),G=function(){function O(I){if(C(this,O),!(this instanceof O))throw new TypeError("Observable cannot be called as a function");if(typeof I!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=I}return E(O,[{key:"subscribe",value:function(P){return(typeof P!="object"||P===null)&&(P={next:P,error:arguments[1],complete:arguments[2]}),new X(P,this._subscriber)}},{key:"forEach",value:function(P){var U=this;return new Promise(function(T,M){if(typeof P!="function"){M(new TypeError(P+" is not a function"));return}function B(){J.unsubscribe(),T()}var J=U.subscribe({next:function(ie){try{P(ie,B)}catch(ee){M(ee),J.unsubscribe()}},error:M,complete:T})})}},{key:"map",value:function(P){var U=this;if(typeof P!="function")throw new TypeError(P+" is not a function");var T=N(this);return new T(function(M){return U.subscribe({next:function(B){try{B=P(B)}catch(J){return M.error(J)}M.next(B)},error:function(B){M.error(B)},complete:function(){M.complete()}})})}},{key:"filter",value:function(P){var U=this;if(typeof P!="function")throw new TypeError(P+" is not a function");var T=N(this);return new T(function(M){return U.subscribe({next:function(B){try{if(!P(B))return}catch(J){return M.error(J)}M.next(B)},error:function(B){M.error(B)},complete:function(){M.complete()}})})}},{key:"reduce",value:function(P){var U=this;if(typeof P!="function")throw new TypeError(P+" is not a function");var T=N(this),M=arguments.length>1,B=!1,J=arguments[1],ie=J;return new T(function(ee){return U.subscribe({next:function(se){var ue=!B;if(B=!0,!ue||M)try{ie=P(ie,se)}catch(pe){return ee.error(pe)}else ie=se},error:function(se){ee.error(se)},complete:function(){if(!B&&!M)return ee.error(new TypeError("Cannot reduce an empty sequence"));ee.next(ie),ee.complete()}})})}},{key:"concat",value:function(){for(var P=this,U=arguments.length,T=new Array(U),M=0;M<U;M++)T[M]=arguments[M];var B=N(this);return new B(function(J){var ie,ee=0;function se(ue){ie=ue.subscribe({next:function(pe){J.next(pe)},error:function(pe){J.error(pe)},complete:function(){ee===T.length?(ie=void 0,J.complete()):se(B.from(T[ee++]))}})}return se(P),function(){ie&&(ie.unsubscribe(),ie=void 0)}})}},{key:"flatMap",value:function(P){var U=this;if(typeof P!="function")throw new TypeError(P+" is not a function");var T=N(this);return new T(function(M){var B=[],J=U.subscribe({next:function(ee){if(P)try{ee=P(ee)}catch(ue){return M.error(ue)}var se=T.from(ee).subscribe({next:function(ue){M.next(ue)},error:function(ue){M.error(ue)},complete:function(){var ue=B.indexOf(se);ue>=0&&B.splice(ue,1),ie()}});B.push(se)},error:function(ee){M.error(ee)},complete:function(){ie()}});function ie(){J.closed&&B.length===0&&M.complete()}return function(){B.forEach(function(ee){return ee.unsubscribe()}),J.unsubscribe()}})}},{key:p,value:function(){return this}}],[{key:"from",value:function(P){var U=typeof this=="function"?this:O;if(P==null)throw new TypeError(P+" is not an object");var T=y(P,p);if(T){var M=T.call(P);if(Object(M)!==M)throw new TypeError(M+" is not an object");return Q(M)&&M.constructor===U?M:new U(function(B){return M.subscribe(B)})}if(m("iterator")&&(T=y(P,d),T))return new U(function(B){k(function(){if(!B.closed){var J=!0,ie=!1,ee=void 0;try{for(var se=T.call(P)[Symbol.iterator](),ue;!(J=(ue=se.next()).done);J=!0){var pe=ue.value;if(B.next(pe),B.closed)return}}catch(mt){ie=!0,ee=mt}finally{try{!J&&se.return!=null&&se.return()}finally{if(ie)throw ee}}B.complete()}})});if(Array.isArray(P))return new U(function(B){k(function(){if(!B.closed){for(var J=0;J<P.length;++J)if(B.next(P[J]),B.closed)return;B.complete()}})});throw new TypeError(P+" is not observable")}},{key:"of",value:function(){for(var P=arguments.length,U=new Array(P),T=0;T<P;T++)U[T]=arguments[T];var M=typeof this=="function"?this:O;return new M(function(B){k(function(){if(!B.closed){for(var J=0;J<U.length;++J)if(B.next(U[J]),B.closed)return;B.complete()}})})}},{key:v,get:function(){return this}}]),O}();F.Observable=G,g()&&Object.defineProperty(G,Symbol("extensions"),{value:{symbol:p,hostReportError:S},configurable:!0})},3730:(l,F)=>{"use strict";var w;w={value:!0};let C=function(){function D(E,g,m){}return D.prototype.updateUserOptIn=function(E){},D.prototype.createAppInsightsClient=function(E){},D.prototype.getCommonProperties=function(){},D.prototype.sendTelemetryEvent=function(E,g,m){},D.prototype.dispose=function(){},D.TELEMETRY_CONFIG_ID="telemetry",D.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",D}();F.Z=C},7549:l=>{"use strict";l.exports=require("vscode")},6355:()=>{}},_r={};function oe(l){if(_r[l])return _r[l].exports;var F=_r[l]={id:l,loaded:!1,exports:{}};return ul[l].call(F.exports,F,F.exports,oe),F.loaded=!0,F.exports}(()=>{oe.n=l=>{var F=l&&l.__esModule?()=>l.default:()=>l;return oe.d(F,{a:F}),F}})(),(()=>{oe.d=(l,F)=>{for(var w in F)oe.o(F,w)&&!oe.o(l,w)&&Object.defineProperty(l,w,{enumerable:!0,get:F[w]})}})(),(()=>{oe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(l){if(typeof window=="object")return window}}()})(),(()=>{oe.hmd=l=>(l=Object.create(l),l.children||(l.children=[]),Object.defineProperty(l,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+l.id)}}),l)})(),(()=>{oe.o=(l,F)=>Object.prototype.hasOwnProperty.call(l,F)})(),(()=>{oe.r=l=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})}})();var Rr={};(()=>{"use strict";oe.r(Rr),oe.d(Rr,{activate:()=>Rp,deactivate:()=>Sp});var l=oe(7549),F=oe(3730),w=oe(6470),C=oe(7484),D=oe.n(C),E=oe(4110),g=oe.n(E),m=oe(660),f=oe.n(m),d=Object.defineProperty,p=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);D().extend(g(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),D().extend(f()),D().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function v(t,e){const i=Object.create(null);return t.filter(r=>{const n=e(r);return i[n]?!1:(i[n]=!0,!0)})}function y(t){return t.forEach(e=>e.dispose()),[]}function N(t){return{dispose:t}}function Q(t){return N(()=>y(t))}function S(...t){return(e,i=null,r)=>{const n=Q(t.map(s=>s(a=>e.call(i,a))));return r&&r.push(n),n}}function k(t,e){return(i,r=null,n)=>t(s=>e(s)&&i.call(r,s),null,n)}function _(t){return(e,i=null,r)=>{const n=t(s=>(n.dispose(),e.call(i,s)),null,r);return n}}function x(t){return/^[a-zA-Z]:\\/.test(t)}function V(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),x(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function W(t,e){return t.reduce((i,r)=>{const n=e(r);return i[n]=[...i[n]||[],r],i},Object.create(null))}function j(t){return!!t.errors}function X(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const i of t.errors)if(!i.field||!i.value||!i.code){e=!1;break}}else e=!1;return e}function A(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:"Error";let e=t.message,i;if(t.message==="Validation Failed"&&X(t))i=t.errors.map(r=>`Value "${r.value}" cannot be set for field ${r.field} (code: ${r.code})`).join(", ");else if(j(t)&&t.errors)return t.errors.map(r=>typeof r=="string"?r:r.message).join(", ");return i&&(e=`${e}: ${i}`),e}const G=(t,e)=>e(t);async function O(t,e=G){let i;return new Promise((r,n)=>i=t(s=>{try{Promise.resolve(e(s,r,n)).catch(n)}catch(a){n(a)}})).then(r=>(i.dispose(),r),r=>{throw i.dispose(),r})}function I(t){const e=dayjs(t),i=Date.now();return e.diff(i,"month"),e.diff(i,"month")<1?e.fromNow():e.diff(i,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var P;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(P||(P={}));function U(t,e){return t<e?-1:t>e?1:0}function T(t,e,i=0,r=t.length,n=0,s=e.length){for(;i<r&&n<s;i++,n++){const u=t.charCodeAt(i),c=e.charCodeAt(n);if(u<c)return-1;if(u>c)return 1}const a=r-i,o=s-n;return a<o?-1:a>o?1:0}function M(t,e){return B(t,e,0,t.length,0,e.length)}function B(t,e,i=0,r=t.length,n=0,s=e.length){for(;i<r&&n<s;i++,n++){let u=t.charCodeAt(i),c=e.charCodeAt(n);if(u===c)continue;const h=u-c;if(!(h===32&&ie(c))&&!(h===-32&&ie(u)))return J(u)&&J(c)?h:T(t.toLowerCase(),e.toLowerCase(),i,r,n,s)}const a=r-i,o=s-n;return a<o?-1:a>o?1:0}function J(t){return t>=97&&t<=122}function ie(t){return t>=65&&t<=90}class ee{constructor(){p(this,"_value",""),p(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const i=e.charCodeAt(0),r=this._value.charCodeAt(this._pos);return i-r}value(){return this._value[this._pos]}}class se{constructor(e=!0){this._caseSensitive=e,p(this,"_value"),p(this,"_from"),p(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?T(e,this._value,0,e.length,this._from,this._to):B(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ue{constructor(e=!0,i=!0){this._splitOnBackslash=e,this._caseSensitive=i,p(this,"_value"),p(this,"_from"),p(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const i=this._value.charCodeAt(this._to);if(i===47||this._splitOnBackslash&&i===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?T(e,this._value,0,e.length,this._from,this._to):B(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var pe;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(pe||(pe={}));class mt{constructor(e){this._ignorePathCasing=e,p(this,"_pathIterator"),p(this,"_value"),p(this,"_states",[]),p(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ue(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return M(e,this._value.scheme);if(this._states[this._stateIdx]===2)return M(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return U(e,this._value.query);if(this._states[this._stateIdx]===5)return U(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class ze{constructor(){p(this,"segment"),p(this,"value"),p(this,"key"),p(this,"left"),p(this,"mid"),p(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class ye{constructor(e){p(this,"_iter"),p(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new ye(new mt(e))}static forPaths(){return new ye(new ue)}static forStrings(){return new ye(new ee)}static forConfigKeys(){return new ye(new se)}clear(){this._root=void 0}set(e,i){const r=this._iter.reset(e);let n;for(this._root||(this._root=new ze,this._root.segment=r.value()),n=this._root;;){const a=r.cmp(n.segment);if(a>0)n.left||(n.left=new ze,n.left.segment=r.value()),n=n.left;else if(a<0)n.right||(n.right=new ze,n.right.segment=r.value()),n=n.right;else if(r.hasNext())r.next(),n.mid||(n.mid=new ze,n.mid.segment=r.value()),n=n.mid;else break}const s=n.value;return n.value=i,n.key=e,s}get(e){var i;return(i=this._getNode(e))==null?void 0:i.value}_getNode(e){const i=this._iter.reset(e);let r=this._root;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(e){const i=this._getNode(e);return!((i==null?void 0:i.value)===void 0&&(i==null?void 0:i.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,i){const r=this._iter.reset(e),n=[];let s=this._root;for(;s;){const a=r.cmp(s.segment);if(a>0)n.push([1,s]),s=s.left;else if(a<0)n.push([-1,s]),s=s.right;else if(r.hasNext())r.next(),n.push([0,s]),s=s.mid;else{for(i?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;n.length>0&&s.isEmpty();){let[o,u]=n.pop();switch(o){case 1:u.left=void 0;break;case 0:u.mid=void 0;break;case-1:u.right=void 0;break}s=u}break}}}findSubstr(e){const i=this._iter.reset(e);let r=this._root,n;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),n=r.value||n,r=r.mid;else break}return r&&r.value||n}findSuperstr(e){const i=this._iter.reset(e);let r=this._root;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(e){for(const[i,r]of this)e(r,i)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var rt=Object.defineProperty,Ue=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),ht;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(ht||(ht={}));var Ct;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(Ct||(Ct={}));const Wn=class{constructor(){Ue(this,"_providers",new Map),Ue(this,"_onDidOpenRepository",new l.EventEmitter),Ue(this,"onDidOpenRepository",this._onDidOpenRepository.event),Ue(this,"_onDidCloseRepository",new l.EventEmitter),Ue(this,"onDidCloseRepository",this._onDidCloseRepository.event),Ue(this,"_onDidChangeState",new l.EventEmitter),Ue(this,"onDidChangeState",this._onDidChangeState.event),Ue(this,"_onDidPublish",new l.EventEmitter),Ue(this,"onDidPublish",this._onDidPublish.event),Ue(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}registerGitProvider(t){const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(i=>this._onDidCloseRepository.fire(i))),this._disposables.push(t.onDidOpenRepository(i=>this._onDidOpenRepository.fire(i))),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(i=>this._onDidChangeState.fire(i))),t.onDidPublish&&this._disposables.push(t.onDidPublish(i=>this._onDidPublish.fire(i))),t.repositories.forEach(i=>{this._onDidOpenRepository.fire(i)}),{dispose:()=>{const i=t==null?void 0:t.repositories;i&&i.length>0&&i.forEach(r=>this._onDidCloseRepository.fire(r)),this._providers.delete(e)}}}getGitProvider(t){const e=ye.forUris();return this._providers.forEach(i=>{const r=i.repositories;if(r&&r.length>0)for(const n of r)e.set(n.rootUri,i)}),e.findSubstr(t)}_nextHandle(){return Wn._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let zn=Wn;Ue(zn,"_handlePool",0);var cl=Object.defineProperty,Cr=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?cl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),Kn;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(Kn||(Kn={}));const dl="githubPullRequests",ml="logLevel";class hl{constructor(){Cr(this,"_outputChannel"),Cr(this,"_logLevel"),Cr(this,"_disposable"),this._outputChannel=l.window.createOutputChannel("GitHub Pull Request"),this._disposable=l.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,i){switch(this._logLevel){case 2:return;case 1:const n=`${new Date().getTime()/1e3}s`,s=i?`${i}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${n}] ${s}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(i?`${i}> ${e}`:`${e}`));return}}debug(e,i){this._logLevel===1&&this.appendLine(e,i)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(l.workspace.getConfiguration(dl).get(ml)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const H=new hl,Sr=new Map;function Yn(t,e){Sr.set(t,e)}function Jn(t){Sr.delete(t)}function Yt(t){for(const e of Sr.values())if(e.hasCommentThread(t))return e;H.appendLine(`Unable to find handler for comment thread ${t.threadId}`)}function Ke(t){return JSON.parse(t.query)}function be(t){try{return JSON.parse(t.query)}catch(e){}}function pl(t){try{return JSON.parse(t.query)}catch(e){}}const fl=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],Zn=l.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function Er(t,e){try{const{commit:i,baseCommit:r,headCommit:n,isBase:s}=JSON.parse(t.query),a=t.scheme==="review"?i:s?r:n,{size:o,object:u}=await e.getObjectDetails(a,t.fsPath),{mimetype:c}=await e.detectObjectType(u);if(c==="text/plain")return;if(fl.indexOf(c)>-1){const h=await e.buffer(a,t.fsPath);return l.Uri.parse(`data:${c};label:${w.basename(t.fsPath)};description:${a};size:${o};base64,${h.toString("base64")}`)}}catch(i){return}}function St(t,e,i,r,n,s,a){const o={path:e||t.path,ref:i,commit:r,base:s.base,isOutdated:n,rootPath:a.path};let u=t.path;return s.replaceFileExtension&&(u=`${u}.git`),t.with({scheme:"review",path:u,query:JSON.stringify(o)})}function Xn(t,e,i,r){const n={prNumber:e,fileName:i,status:r};return t.with({query:JSON.stringify(n)})}function es(t){try{return JSON.parse(t.query)}catch(e){}}function Jt(t,e,i,r,n,s,a){const o={baseCommit:i,headCommit:r,isBase:s,fileName:n,prNumber:e.number,status:a,remoteName:e.githubRepository.remote.remoteName},u=t.path;return t.with({scheme:"pr",path:u,query:JSON.stringify(o)})}class gl extends l.EventEmitter{handleUri(e){this.fire(e)}}const vl=new gl,Ot="GitHub.vscode-pull-request-github",Pr="git",ts="ghpr",is="initialize",rs="statechange",qt="github:focusedReview";var ne;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(ne||(ne={}));class ns{constructor(e,i,r,n,s,a,o,u){this.baseCommit=e,this.status=i,this.fileName=r,this.previousFileName=n,this.patch=s,this.diffHunks=a,this.isPartial=o,this.blobUrl=u}}class ss{constructor(e,i,r,n,s){this.baseCommit=e,this.blobUrl=i,this.status=r,this.fileName=n,this.previousFileName=s}}var bl=Object.defineProperty,wl=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?bl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),_e;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(_e||(_e={}));class as{constructor(e,i,r,n,s,a=!0){this.type=e,this.oldLineNumber=i,this.newLineNumber=r,this.positionInHunk=n,this._raw=s,this.endwithLineBreak=a}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function yl(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class kl{constructor(e,i,r,n,s){this.oldLineNumber=e,this.oldLength=i,this.newLineNumber=r,this.newLength=n,this.positionInHunk=s,wl(this,"diffLines",[])}}const os=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function _l(t){let e=0,i=0;for(;(i=t.indexOf("\r",i))!==-1;)i++,e++;return e}function*Rl(t){let e=0;for(;e!==-1&&e<t.length;){const i=e;e=t.indexOf(`
`,e);let n=(e!==-1?e:t.length)-i;e!==-1&&(e>0&&t[e-1]==="\r"&&n--,e++),yield t.substr(i,n)}}function*Zt(t){const e=Rl(t);let i=e.next(),r,n=-1,s=-1,a=-1;for(;!i.done;){const o=i.value;if(os.test(o)){r&&(yield r,r=void 0),n===-1&&(n=0);const u=os.exec(o),c=s=Number(u[1]),h=Number(u[3])||1,b=a=Number(u[5]),R=Number(u[7])||1;r=new kl(c,h,b,R,n),r.diffLines.push(new as(3,-1,-1,n,o))}else if(r){const u=yl(o);if(u===3)r.diffLines&&r.diffLines.length&&(r.diffLines[r.diffLines.length-1].endwithLineBreak=!1);else{r.diffLines.push(new as(u,u!==1?s:-1,u!==2?a:-1,n,o));const c=1+_l(o);switch(u){case 0:s+=c,a+=c;break;case 2:s+=c;break;case 1:a+=c;break}}}n!==-1&&++n,i=e.next()}r&&(yield r)}function Nr(t){const e=Zt(t);let i=e.next();const r=[],n=[];for(;!i.done;){const s=i.value;r.push(s);for(let a=0;a<s.diffLines.length;a++){const o=s.diffLines[a];if(!(o.type===2||o.type===3))if(o.type===1)n.push(o.text);else{const u=o.text;n.push(u)}}i=e.next()}return r}function Cl(t,e){const i=t.split(/\r?\n/),r=Zt(e);let n=r.next();const s=[],a=[];let o=0;for(;!n.done;){const u=n.value;s.push(u);const c=u.oldLineNumber;for(let h=o+1;h<c;h++)a.push(i[h-1]);o=c+u.oldLength-1;for(let h=0;h<u.diffLines.length;h++){const b=u.diffLines[h];if(!(b.type===2||b.type===3))if(b.type===1)a.push(b.text);else{const R=b.text;a.push(R)}}n=r.next()}if(o<i.length)for(let u=o+1;u<=i.length;u++)a.push(i[u-1]);return a.join(`
`)}function Tr(t){switch(t){case"removed":return ne.DELETE;case"added":return ne.ADD;case"renamed":return ne.RENAME;case"modified":return ne.MODIFY;default:return ne.UNKNOWN}}async function Dr(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=t[n],a=Tr(s.status);if(!s.patch){r.push(new ss(i,s.blob_url,a,s.filename,s.previous_filename));continue}let o=!1;switch(a){case ne.DELETE:case ne.MODIFY:try{await e.getObjectDetails(i,s.filename),o=!0}catch(h){}break;case ne.RENAME:try{await e.getObjectDetails(i,s.previous_filename),o=!0}catch(h){}break}const u=Nr(s.patch),c=!o&&a!==ne.ADD;r.push(new ns(i,a,s.filename,s.previous_filename,s.patch,u,c,s.blob_url))}return r}const Sl=t=>{};var El=Object.defineProperty,wi=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?El(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),ls;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(ls||(ls={}));class Ut{constructor(e){if(wi(this,"type",4),wi(this,"host",""),wi(this,"owner",""),wi(this,"repositoryName",""),wi(this,"url"),!this.parseSshProtocol(e))try{this.url=l.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(i){H.appendLine(`Failed to parse '${e}'`),l.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const i=Sl(e);if(!i)return!1;const{Hostname:r,HostName:n,path:s}=i;return this.host=n||r,this.owner=this.getOwnerName(s)||"",this.repositoryName=this.getRepositoryName(s)||"",this.type=2,!0}getHostName(e){const i=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return i&&i.length>=2?i[1].toLocaleLowerCase()==="www.github.com"?"github.com":i[1]:""}getRepositoryName(e){let i=e.replace(/\\/g,"/");i.endsWith("/")&&(i=i.substr(0,i.length-1));const r=i.lastIndexOf("/"),n=i.substr(r+1);if(!(n===""||n==="/"))return n.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let i=e.replace(/\\/g,"/");i.endsWith("/")&&(i=i.substr(0,i.length-1));const r=i.split("/");if(r.length>1)return r[r.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return l.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(i){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const i=this.normalizeUri();if(!i)return!1;const r=e.normalizeUri();return r?i.toString().toLocaleLowerCase()===r.toString().toLocaleLowerCase():!1}}var Pl=Object.defineProperty,Nl=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class us{constructor(e,i,r,n){this.ref=e,this.label=i,this.sha=r,Nl(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Ut(n)}}var Ee;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(Ee||(Ee={}));function Fr(t){return t.event===4}function Tl(t){return t.event===0}function Dl(t){return t.event===3}function Pp(t){return t.event===9}function Np(t){return t.event===7}function Tp(t){return t.event===8}function Fl(t){return!!t.conclusion}var Te;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(Te||(Te={}));var pt;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(pt||(pt={}));var Re;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Re||(Re={}));var Et;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Et||(Et={}));var Il=Object.defineProperty,Al=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Il(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const cs=class{static initialize(t){cs.icons={reactions:{THUMBS_UP:t.asAbsolutePath(w.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(w.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(w.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(w.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(w.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(w.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(w.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(w.join("resources","icons","reactions","rocket.png"))}}}};let nt=cs;Al(nt,"icons");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ir=function(t,e){return Ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},Ir(t,e)};function ft(t,e){Ir(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var K=function(){return K=Object.assign||function(e){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},K.apply(this,arguments)};function ds(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]]);return i}function Dp(t,e,i,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,i,s):a(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function Fp(t,e){return function(i,r){e(i,r,t)}}function Ip(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Pt(t,e,i,r){function n(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(r.next(h))}catch(b){a(b)}}function u(h){try{c(r.throw(h))}catch(b){a(b)}}function c(h){h.done?s(h.value):n(h.value).then(o,u)}c((r=r.apply(t,e||[])).next())})}function Nt(t,e){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){i.label=c[1];break}if(c[0]===6&&i.label<s[1]){i.label=s[1],s=c;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(c);break}s[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(h){c=[6,h],n=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ap(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}function Mp(t,e){for(var i in t)i!=="default"&&!e.hasOwnProperty(i)&&(e[i]=t[i])}function ms(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ml(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var r=i.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(a)throw a.error}}return s}function xp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ml(arguments[e]));return t}function Ar(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r}function Gi(t){return this instanceof Gi?(this.v=t,this):new Gi(t)}function Op(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(R){r[R]&&(n[R]=function(q){return new Promise(function(L,$){s.push([R,q,L,$])>1||o(R,q)})})}function o(R,q){try{u(r[R](q))}catch(L){b(s[0][3],L)}}function u(R){R.value instanceof Gi?Promise.resolve(R.value.v).then(c,h):b(s[0][2],R)}function c(R){o("next",R)}function h(R){o("throw",R)}function b(R,q){R(q),s.shift(),s.length&&o(s[0][0],s[0][1])}}function qp(t){var e,i;return e={},r("next"),r("throw",function(n){throw n}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(n,s){e[n]=t[n]?function(a){return(i=!i)?{value:Gi(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function Up(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof ms=="function"?ms(t):t[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(s){i[s]=t[s]&&function(a){return new Promise(function(o,u){a=t[s](a),n(o,u,a.done,a.value)})}}function n(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}function Lp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function $p(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function Vp(t){return t&&t.__esModule?t:{default:t}}function Hp(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Gp(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i}var gt=oe(285),Mr="Invariant Violation",hs=Object.setPrototypeOf,xl=hs===void 0?function(t,e){return t.__proto__=e,t}:hs,De=function(t){ft(e,t);function e(i){i===void 0&&(i=Mr);var r=t.call(this,typeof i=="number"?Mr+": "+i+" (see https://github.com/apollographql/invariant-packages)":i)||this;return r.framesToPop=1,r.name=Mr,xl(r,e.prototype),r}return e}(Error);function ce(t,e){if(!t)throw new De(e)}function ps(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=ps("warn"),t.error=ps("error")})(ce||(ce={}));var fs={env:{}};if(typeof process=="object")fs=process;else try{Function("stub","process = stub")(fs)}catch(t){}var Bp=null;const jp=null;var Ol=oe(5035),ql=oe.n(Ol),gs=Object.prototype,vs=gs.toString,Ul=gs.hasOwnProperty,xr=new Map;function Ye(t,e){try{return Or(t,e)}finally{xr.clear()}}function Or(t,e){if(t===e)return!0;var i=vs.call(t),r=vs.call(e);if(i!==r)return!1;switch(i){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(bs(t,e))return!0;var n=Object.keys(t),s=Object.keys(e),a=n.length;if(a!==s.length)return!1;for(var o=0;o<a;++o)if(!Ul.call(e,n[o]))return!1;for(var o=0;o<a;++o){var u=n[o];if(!Or(t[u],e[u]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(bs(t,e))return!0;for(var c=t.entries(),h=i==="[object Map]";;){var b=c.next();if(b.done)break;var R=b.value,q=R[0],L=R[1];if(!e.has(q)||h&&!Or(L,e.get(q)))return!1}return!0}}return!1}function bs(t,e){var i=xr.get(t);if(i){if(i.has(e))return!0}else xr.set(t,i=new Set);return i.add(e),!1}const Qp=null;function Wp(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function zp(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function Ll(t){return t.kind==="StringValue"}function $l(t){return t.kind==="BooleanValue"}function Vl(t){return t.kind==="IntValue"}function Hl(t){return t.kind==="FloatValue"}function Gl(t){return t.kind==="Variable"}function Bl(t){return t.kind==="ObjectValue"}function jl(t){return t.kind==="ListValue"}function Ql(t){return t.kind==="EnumValue"}function Wl(t){return t.kind==="NullValue"}function Xt(t,e,i,r){if(Vl(i)||Hl(i))t[e.value]=Number(i.value);else if($l(i)||Ll(i))t[e.value]=i.value;else if(Bl(i)){var n={};i.fields.map(function(a){return Xt(n,a.name,a.value,r)}),t[e.value]=n}else if(Gl(i)){var s=(r||{})[i.name.value];t[e.value]=s}else if(jl(i))t[e.value]=i.values.map(function(a){var o={};return Xt(o,e,a,r),o[e.value]});else if(Ql(i))t[e.value]=i.value;else if(Wl(i))t[e.value]=null;else throw new De(17)}function zl(t,e){var i=null;t.directives&&(i={},t.directives.forEach(function(n){i[n.name.value]={},n.arguments&&n.arguments.forEach(function(s){var a=s.name,o=s.value;return Xt(i[n.name.value],a,o,e)})}));var r=null;return t.arguments&&t.arguments.length&&(r={},t.arguments.forEach(function(n){var s=n.name,a=n.value;return Xt(r,s,a,e)})),ws(t.name.value,r,i)}var Kl=["connection","include","skip","client","rest","export"];function ws(t,e,i){if(i&&i.connection&&i.connection.key)if(i.connection.filter&&i.connection.filter.length>0){var r=i.connection.filter?i.connection.filter:[];r.sort();var n=e,s={};return r.forEach(function(u){s[u]=n[u]}),i.connection.key+"("+JSON.stringify(s)+")"}else return i.connection.key;var a=t;if(e){var o=ql()(e);a+="("+o+")"}return i&&Object.keys(i).forEach(function(u){Kl.indexOf(u)===-1&&(i[u]&&Object.keys(i[u]).length?a+="@"+u+"("+JSON.stringify(i[u])+")":a+="@"+u)}),a}function qr(t,e){if(t.arguments&&t.arguments.length){var i={};return t.arguments.forEach(function(r){var n=r.name,s=r.value;return Xt(i,n,s,e)}),i}return null}function yi(t){return t.alias?t.alias.value:t.name.value}function Tt(t){return t.kind==="Field"}function Bi(t){return t.kind==="InlineFragment"}function ji(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function Qi(t,e){return e===void 0&&(e=!1),K({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Yl(t){return t!=null&&typeof t=="object"&&t.type==="json"}function Jl(t){throw new InvariantError(18)}function ys(t,e){switch(e===void 0&&(e=Jl),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(a){return ys(a,e)});case"ObjectValue":{for(var i={},r=0,n=t.fields;r<n.length;r++){var s=n[r];i[s.name.value]=ys(s.value,e)}return i}default:return t.value}}function Zl(t,e){if(t.directives&&t.directives.length){var i={};return t.directives.forEach(function(r){i[r.name.value]=qr(r,e)}),i}return null}function Ur(t,e){return e===void 0&&(e={}),iu(t.directives).every(function(i){var r=i.directive,n=i.ifArgument,s=!1;return n.value.kind==="Variable"?(s=e[n.value.name.value],ce(s!==void 0,13)):s=n.value.value,r.name.value==="skip"?!s:s})}function Xl(t){var e=[];return(0,gt.visit)(t,{Directive:function(i){e.push(i.name.value)}}),e}function Wi(t,e){return Xl(e).some(function(i){return t.indexOf(i)>-1})}function eu(t){return t&&Wi(["client"],t)&&Wi(["export"],t)}function tu(t){var e=t.name.value;return e==="skip"||e==="include"}function iu(t){return t?t.filter(tu).map(function(e){var i=e.arguments,r=e.name.value;ce(i&&i.length===1,14);var n=i[0];ce(n.name&&n.name.value==="if",15);var s=n.value;return ce(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),16),{directive:e,ifArgument:n}}):[]}function ks(t,e){var i=e,r=[];t.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw new De(11);s.kind==="FragmentDefinition"&&r.push(s)}),typeof i=="undefined"&&(ce(r.length===1,12),i=r[0].name.value);var n=K(K({},t),{definitions:Ar([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:i}}]}}],t.definitions)});return n}function Lr(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.forEach(function(r){typeof r=="undefined"||r===null||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function Kp(t){Lt(t);var e=t.definitions.filter(function(i){return i.kind==="OperationDefinition"&&i.operation==="mutation"})[0];return invariant(e,1),e}function Lt(t){ce(t&&t.kind==="Document",2);var e=t.definitions.filter(function(i){return i.kind!=="FragmentDefinition"}).map(function(i){if(i.kind!=="OperationDefinition")throw new De(3);return i});return ce(e.length<=1,4),t}function ei(t){return Lt(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Yp(t){var e=ei(t);return invariant(e,5),e}function $r(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function zi(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function ru(t){var e=ei(t);return ce(e&&e.operation==="query",6),e}function nu(t){ce(t.kind==="Document",7),ce(t.definitions.length<=1,8);var e=t.definitions[0];return ce(e.kind==="FragmentDefinition",9),e}function Vr(t){Lt(t);for(var e,i=0,r=t.definitions;i<r.length;i++){var n=r[i];if(n.kind==="OperationDefinition"){var s=n.operation;if(s==="query"||s==="mutation"||s==="subscription")return n}n.kind==="FragmentDefinition"&&!e&&(e=n)}if(e)return e;throw new De(10)}function Ki(t){t===void 0&&(t=[]);var e={};return t.forEach(function(i){e[i.name.value]=i}),e}function Hr(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(i){var r=i.defaultValue;return r}).map(function(i){var r=i.variable,n=i.defaultValue,s={};return Xt(s,r.name,n),s});return Lr.apply(void 0,Ar([{}],e))}return{}}function Jp(t){var e=new Set;if(t.variableDefinitions)for(var i=0,r=t.variableDefinitions;i<r.length;i++){var n=r[i];e.add(n.variable.name.value)}return e}function _s(t,e,i){var r=0;return t.forEach(function(n,s){e.call(this,n,s,t)&&(t[r++]=n)},i),t.length=r,t}var su={kind:"Field",name:{kind:"Name",value:"__typename"}};function Rs(t,e){return t.selectionSet.selections.every(function(i){return i.kind==="FragmentSpread"&&Rs(e[i.name.value],e)})}function Yi(t){return Rs(ei(t)||nu(t),Ki(zi(t)))?null:t}function Gr(t){return function(i){return t.some(function(r){return r.name&&r.name===i.name.value||r.test&&r.test(i)})}}function Cs(t,e){var i=Object.create(null),r=[],n=Object.create(null),s=[],a=Yi((0,gt.visit)(e,{Variable:{enter:function(o,u,c){c.kind!=="VariableDefinition"&&(i[o.name.value]=!0)}},Field:{enter:function(o){if(t&&o.directives){var u=t.some(function(c){return c.remove});if(u&&o.directives&&o.directives.some(Gr(t)))return o.arguments&&o.arguments.forEach(function(c){c.value.kind==="Variable"&&r.push({name:c.value.name.value})}),o.selectionSet&&Ps(o.selectionSet).forEach(function(c){s.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(o){n[o.name.value]=!0}},Directive:{enter:function(o){if(Gr(t)(o))return null}}}));return a&&_s(r,function(o){return!i[o.name]}).length&&(a=cu(r,a)),a&&_s(s,function(o){return!n[o.name]}).length&&(a=du(s,a)),a}function au(t){return(0,gt.visit)(Lt(t),{SelectionSet:{enter:function(e,i,r){if(!(r&&r.kind==="OperationDefinition")){var n=e.selections;if(!!n){var s=n.some(function(o){return Tt(o)&&(o.name.value==="__typename"||o.name.value.lastIndexOf("__",0)===0)});if(!s){var a=r;if(!(Tt(a)&&a.directives&&a.directives.some(function(o){return o.name.value==="export"})))return K(K({},e),{selections:Ar(n,[su])})}}}}}})}var ou={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(i){return i.name.value==="key"})),e}};function lu(t){return Cs([ou],Lt(t))}function Ss(t,e,i){return i===void 0&&(i=!0),e&&e.selections&&e.selections.some(function(r){return Es(t,r,i)})}function Es(t,e,i){return i===void 0&&(i=!0),Tt(e)?e.directives?e.directives.some(Gr(t))||i&&Ss(t,e.selectionSet,i):!1:!0}function Zp(t,e){Lt(e);var i;return Yi(visit(e,{SelectionSet:{enter:function(r,n,s,a){var o=a.join("-");if(!i||o===i||!o.startsWith(i))if(r.selections){var u=r.selections.filter(function(c){return Es(t,c)});return Ss(t,r,!1)&&(i=o),__assign(__assign({},r),{selections:u})}else return null}}}))}function uu(t){return function(i){return t.some(function(r){return i.value&&i.value.kind==="Variable"&&i.value.name&&(r.name===i.value.name.value||r.test&&r.test(i))})}}function cu(t,e){var i=uu(t);return Yi((0,gt.visit)(e,{OperationDefinition:{enter:function(r){return K(K({},r),{variableDefinitions:r.variableDefinitions.filter(function(n){return!t.some(function(s){return s.name===n.variable.name.value})})})}},Field:{enter:function(r){var n=t.some(function(a){return a.remove});if(n){var s=0;if(r.arguments.forEach(function(a){i(a)&&(s+=1)}),s===1)return null}}},Argument:{enter:function(r){if(i(r))return null}}}))}function du(t,e){function i(r){if(t.some(function(n){return n.name===r.name.value}))return null}return Yi((0,gt.visit)(e,{FragmentSpread:{enter:i},FragmentDefinition:{enter:i}}))}function Ps(t){var e=[];return t.selections.forEach(function(i){(Tt(i)||Bi(i))&&i.selectionSet?Ps(i.selectionSet).forEach(function(r){return e.push(r)}):i.kind==="FragmentSpread"&&e.push(i)}),e}function mu(t){var e=Vr(t),i=e.operation;if(i==="query")return t;var r=(0,gt.visit)(t,{OperationDefinition:{enter:function(n){return K(K({},n),{operation:"query"})}}});return r}function hu(t){Lt(t);var e=Cs([{test:function(i){return i.name.value==="client"},remove:!0}],t);return e&&(e=(0,gt.visit)(e,{FragmentDefinition:{enter:function(i){if(i.selectionSet){var r=i.selectionSet.selections.every(function(n){return Tt(n)&&n.name.value==="__typename"});if(r)return null}}}})),e}var Br=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),pu=Object.prototype.toString;function fu(t){return jr(t,new Map)}function jr(t,e){switch(pu.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var i=t.slice(0);return e.set(t,i),i.forEach(function(n,s){i[s]=jr(n,e)}),i}case"[object Object]":{if(e.has(t))return e.get(t);var r=Object.create(Object.getPrototypeOf(t));return e.set(t,r),Object.keys(t).forEach(function(n){r[n]=jr(t[n],e)}),r}default:return t}}function gu(){return typeof process!="undefined"?"production":"development"}function Qr(t){return gu()===t}function Ns(){return Qr("production")===!0}function vu(){return Qr("development")===!0}function Wr(){return Qr("test")===!0}function zr(t){try{return t()}catch(e){console.error&&console.error(e)}}function $t(t){return t.errors&&t.errors.length}function Ts(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Ts(t[e])}),t}function Xp(t){if(vu()||Wr()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Ts(t)}return t}var bu=Object.prototype.hasOwnProperty;function Ds(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Kr(t)}function Kr(t){var e=t[0]||{},i=t.length;if(i>1){var r=[];e=Yr(e,r);for(var n=1;n<i;++n)e=Is(e,t[n],r)}return e}function Fs(t){return t!==null&&typeof t=="object"}function Is(t,e,i){return Fs(e)&&Fs(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Yr(t,i)),Object.keys(e).forEach(function(r){var n=e[r];if(bu.call(t,r)){var s=t[r];n!==s&&(t[r]=Is(Yr(s,i),n,i))}else t[r]=n}),t):e}function Yr(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=K({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var As=Object.create({});function ef(t,e){e===void 0&&(e="warn"),!Ns()&&!As[t]&&(Wr()||(As[t]=!0),e==="error"?console.error(t):console.warn(t))}function tf(t){return JSON.parse(JSON.stringify(t))}var wu=oe(9329),yu=oe.n(wu),ku=yu();const Le=ku;function _u(t){for(var e=["query","operationName","variables","extensions","context"],i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];if(e.indexOf(n)<0)throw new De(2)}return t}var rf=function(t){ft(e,t);function e(i,r){var n=t.call(this,i)||this;return n.link=r,n}return e}(Error);function Ji(t){return t.request.length<=1}function nf(t){var e=!1;return new Promise(function(i,r){t.subscribe({next:function(n){e||(e=!0,i(n))},error:r})})}var sf=null;function af(t){return new Observable(function(e){t.then(function(i){e.next(i),e.complete()}).catch(e.error.bind(e))})}function Ms(t){return new Le(function(e){e.error(t)})}function Ru(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?$r(e.query):""),e}function Cu(t,e){var i=K({},t),r=function(s){typeof s=="function"?i=K({},i,s(i)):i=K({},i,s)},n=function(){return K({},i)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:n}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return Su(e)}}),e}function Su(t){var e=t.query,i=t.variables,r=t.operationName;return JSON.stringify([r,e,i])}function xs(t,e){return e?e(t):Le.of()}function ki(t){return typeof t=="function"?new Je(t):t}function Os(){return new Je(function(){return Le.of()})}function Eu(t){return t.length===0?Os():t.map(ki).reduce(function(e,i){return e.concat(i)})}function qs(t,e,i){var r=ki(e),n=ki(i||new Je(xs));return Ji(r)&&Ji(n)?new Je(function(s){return t(s)?r.request(s)||Le.of():n.request(s)||Le.of()}):new Je(function(s,a){return t(s)?r.request(s,a)||Le.of():n.request(s,a)||Le.of()})}var Pu=function(t,e){var i=ki(t);if(Ji(i))return i;var r=ki(e);return Ji(r)?new Je(function(n){return i.request(n,function(s){return r.request(s)||Le.of()})||Le.of()}):new Je(function(n,s){return i.request(n,function(a){return r.request(a,s)||Le.of()})||Le.of()})},Je=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,i,r){return this.concat(qs(e,i,r||new t(xs)))},t.prototype.concat=function(e){return Pu(this,e)},t.prototype.request=function(e,i){throw new De(1)},t.empty=Os,t.from=Eu,t.split=qs,t.execute=Zi,t}();function Zi(t,e){return t.request(Cu(e.context,Ru(_u(e))))||Le.of()}var Nu=oe(7121),we;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(we||(we={}));function Us(t){return t<7}var _i=function(t){ft(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[Nu.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(Le);function ti(t){return Array.isArray(t)&&t.length>0}function Tu(t){return t.hasOwnProperty("graphQLErrors")}var Du=function(t){var e="";return ti(t.graphQLErrors)&&t.graphQLErrors.forEach(function(i){var r=i?i.message:"Error message not found.";e+="GraphQL error: "+r+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Dt=function(t){ft(e,t);function e(i){var r=i.graphQLErrors,n=i.networkError,s=i.errorMessage,a=i.extraInfo,o=t.call(this,s)||this;return o.graphQLErrors=r||[],o.networkError=n||null,s?o.message=s:o.message=Du(o),o.extraInfo=a,o.__proto__=e.prototype,o}return e}(Error),Vt;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Vt||(Vt={}));var Fu=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&ti(t.graphQLErrors))},Iu=function(t){ft(e,t);function e(i){var r=i.queryManager,n=i.options,s=i.shouldSubscribe,a=s===void 0?!0:s,o=t.call(this,function(c){return o.onSubscribe(c)})||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=n,o.variables=n.variables||{},o.queryId=r.generateQueryId(),o.shouldSubscribe=a;var u=ei(n.query);return o.queryName=u&&u.name&&u.name.value,o.queryManager=r,o}return e.prototype.result=function(){var i=this;return new Promise(function(r,n){var s={next:function(o){r(o),i.observers.delete(s),i.observers.size||i.queryManager.removeQuery(i.queryId),setTimeout(function(){a.unsubscribe()},0)},error:n},a=i.subscribe(s)})},e.prototype.currentResult=function(){var i=this.getCurrentResult();return i.data===void 0&&(i.data={}),i},e.prototype.getCurrentResult=function(){if(this.isTornDown){var i=this.lastResult;return{data:!this.lastError&&i&&i.data||void 0,error:this.lastError,loading:!1,networkStatus:we.error}}var r=this.queryManager.getCurrentQueryResult(this),n=r.data,s=r.partial,a=this.queryManager.queryStore.get(this.queryId),o,u=this.options.fetchPolicy,c=u==="network-only"||u==="no-cache";if(a){var h=a.networkStatus;if(Fu(a,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:h,error:new Dt({graphQLErrors:a.graphQLErrors,networkError:a.networkError})};a.variables&&(this.options.variables=K(K({},this.options.variables),a.variables),this.variables=this.options.variables),o={data:n,loading:Us(h),networkStatus:h},a.graphQLErrors&&this.options.errorPolicy==="all"&&(o.errors=a.graphQLErrors)}else{var b=c||s&&u!=="cache-only";o={data:n,loading:b,networkStatus:b?we.loading:we.ready}}return s||this.updateLastResult(K(K({},o),{stale:!1})),K(K({},o),{partial:s})},e.prototype.isDifferentFromLastResult=function(i){var r=this.lastResultSnapshot;return!(r&&i&&r.networkStatus===i.networkStatus&&r.stale===i.stale&&Ye(r.data,i.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var i=this.queryManager.queryStore.get(this.queryId);i&&(i.networkError=null,i.graphQLErrors=[])},e.prototype.refetch=function(i){var r=this.options.fetchPolicy;return r==="cache-only"?Promise.reject(new De(1)):(r!=="no-cache"&&r!=="cache-and-network"&&(r="network-only"),Ye(this.variables,i)||(this.variables=K(K({},this.variables),i)),Ye(this.options.variables,this.variables)||(this.options.variables=K(K({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,K(K({},this.options),{fetchPolicy:r}),Vt.refetch))},e.prototype.fetchMore=function(i){var r=this;ce(i.updateQuery,2);var n=K(K({},i.query?i:K(K(K({},this.options),i),{variables:K(K({},this.variables),i.variables)})),{fetchPolicy:"network-only"}),s=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(s,n,Vt.normal,this.queryId).then(function(a){return r.updateQuery(function(o){return i.updateQuery(o,{fetchMoreResult:a.data,variables:n.variables})}),r.queryManager.stopQuery(s),a},function(a){throw r.queryManager.stopQuery(s),a})},e.prototype.subscribeToMore=function(i){var r=this,n=this.queryManager.startGraphQLSubscription({query:i.document,variables:i.variables}).subscribe({next:function(s){var a=i.updateQuery;a&&r.updateQuery(function(o,u){var c=u.variables;return a(o,{subscriptionData:s,variables:c})})},error:function(s){if(i.onError){i.onError(s);return}}});return this.subscriptions.add(n),function(){r.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(i){var r=this.options.fetchPolicy;this.options=K(K({},this.options),i),i.pollInterval?this.startPolling(i.pollInterval):i.pollInterval===0&&this.stopPolling();var n=i.fetchPolicy;return this.setVariables(this.options.variables,r!==n&&(r==="cache-only"||r==="standby"||n==="network-only"),i.fetchResults)},e.prototype.setVariables=function(i,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!0),this.isTornDown=!1,i=i||this.variables,!r&&Ye(i,this.variables)?this.observers.size&&n?this.result():Promise.resolve():(this.variables=this.options.variables=i,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(i){var r=this.queryManager,n=r.getQueryWithPreviousResult(this.queryId),s=n.previousResult,a=n.variables,o=n.document,u=zr(function(){return i(s,{variables:a})});u&&(r.dataStore.markUpdateQueryResult(o,a,u),r.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(i){Ls(this),this.options.pollInterval=i,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(i){var r=this.lastResult;return this.lastResult=i,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?i:fu(i),r},e.prototype.onSubscribe=function(i){var r=this;try{var n=i._subscription._observer;n&&!n.error&&(n.error=Au)}catch(a){}var s=!this.observers.size;return this.observers.add(i),i.next&&this.lastResult&&i.next(this.lastResult),i.error&&this.lastError&&i.error(this.lastError),s&&this.setUpQuery(),function(){r.observers.delete(i)&&!r.observers.size&&r.tearDownQuery()}},e.prototype.setUpQuery=function(){var i=this,r=this,n=r.queryManager,s=r.queryId;this.shouldSubscribe&&n.addObservableQuery(s,this),this.options.pollInterval&&(Ls(this),n.startPollingQuery(this.options,s));var a=function(o){i.updateLastResult(K(K({},i.lastResult),{errors:o.graphQLErrors,networkStatus:we.error,loading:!1})),Jr(i.observers,"error",i.lastError=o)};n.observeQuery(s,this.options,{next:function(o){if(i.lastError||i.isDifferentFromLastResult(o)){var u=i.updateLastResult(o),c=i.options,h=c.query,b=c.variables,R=c.fetchPolicy;n.transform(h).hasClientExports?n.getLocalState().addExportedVariables(h,b).then(function(q){var L=i.variables;i.variables=i.options.variables=q,!o.loading&&u&&R!=="cache-only"&&n.transform(h).serverQuery&&!Ye(L,q)?i.refetch():Jr(i.observers,"next",o)}):Jr(i.observers,"next",o)}},error:a}).catch(a)},e.prototype.tearDownQuery=function(){var i=this.queryManager;this.isTornDown=!0,i.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(r){return r.unsubscribe()}),this.subscriptions.clear(),i.removeObservableQuery(this.queryId),i.stopQuery(this.queryId),this.observers.clear()},e}(_i);function Au(t){}function Jr(t,e,i){var r=[];t.forEach(function(n){return n[e]&&r.push(n)}),r.forEach(function(n){return n[e](i)})}function Ls(t){var e=t.options.fetchPolicy;ce(e!=="cache-first"&&e!=="cache-only",3)}var Mu=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,i,r){this.store[e]={mutation:i,variables:r||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,i){var r=this.store[e];r&&(r.loading=!1,r.error=i)},t.prototype.markMutationResult=function(e){var i=this.store[e];i&&(i.loading=!1,i.error=null)},t.prototype.reset=function(){this.store={}},t}(),xu=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var i=this.store[e.queryId];ce(!i||i.document===e.document||Ye(i.document,e.document),19);var r=!1,n=null;e.storePreviousVariables&&i&&i.networkStatus!==we.loading&&(Ye(i.variables,e.variables)||(r=!0,n=i.variables));var s;r?s=we.setVariables:e.isPoll?s=we.poll:e.isRefetch?s=we.refetch:s=we.loading;var a=[];i&&i.graphQLErrors&&(a=i.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:n,networkError:null,graphQLErrors:a,networkStatus:s,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=we.fetchMore)},t.prototype.markQueryResult=function(e,i,r){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=ti(i.errors)?i.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=we.ready,typeof r=="string"&&this.store[r]&&(this.store[r].networkStatus=we.ready))},t.prototype.markQueryError=function(e,i,r){!this.store||!this.store[e]||(this.store[e].networkError=i,this.store[e].networkStatus=we.error,typeof r=="string"&&this.markQueryResultClient(r,!0))},t.prototype.markQueryResultClient=function(e,i){var r=this.store&&this.store[e];r&&(r.networkError=null,r.previousVariables=null,i&&(r.networkStatus=we.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var i=this;Object.keys(this.store).forEach(function(r){e.indexOf(r)<0?i.stopQuery(r):i.store[r].networkStatus=we.loading})},t}();function Ou(t){return t.charAt(0).toUpperCase()+t.slice(1)}var $s=function(){function t(e){var i=e.cache,r=e.client,n=e.resolvers,s=e.fragmentMatcher;this.cache=i,r&&(this.client=r),n&&this.addResolvers(n),s&&this.setFragmentMatcher(s)}return t.prototype.addResolvers=function(e){var i=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){i.resolvers=Ds(i.resolvers,r)}):this.resolvers=Ds(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var i=e.document,r=e.remoteResult,n=e.context,s=e.variables,a=e.onlyRunForcedResolvers,o=a===void 0?!1:a;return Pt(this,void 0,void 0,function(){return Nt(this,function(u){return i?[2,this.resolveDocument(i,r.data,n,s,this.fragmentMatcher,o).then(function(c){return K(K({},r),{data:c.result})})]:[2,r]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Wi(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?hu(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var i=this.cache,r=K(K({},e),{cache:i,getCacheKey:function(n){if(i.config)return i.config.dataIdFromObject(n);ce(!1,6)}});return r},t.prototype.addExportedVariables=function(e,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),Pt(this,void 0,void 0,function(){return Nt(this,function(n){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,i)||{},this.prepareContext(r),i).then(function(s){return K(K({},i),s.exportedVariables)})]:[2,K({},i)]})})},t.prototype.shouldForceResolvers=function(e){var i=!1;return(0,gt.visit)(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(i=r.arguments.some(function(n){return n.name.value==="always"&&n.value.kind==="BooleanValue"&&n.value.value===!0}),i))return gt.BREAK}}}),i},t.prototype.buildRootValueFromCache=function(e,i){return this.cache.diff({query:mu(e),variables:i,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,i,r,n,s,a){return r===void 0&&(r={}),n===void 0&&(n={}),s===void 0&&(s=function(){return!0}),a===void 0&&(a=!1),Pt(this,void 0,void 0,function(){var o,u,c,h,b,R,q,L,$;return Nt(this,function(z){return o=Vr(e),u=zi(e),c=Ki(u),h=o.operation,b=h?Ou(h):"Query",R=this,q=R.cache,L=R.client,$={fragmentMap:c,context:K(K({},r),{cache:q,client:L}),variables:n,fragmentMatcher:s,defaultOperationType:b,exportedVariables:{},onlyRunForcedResolvers:a},[2,this.resolveSelectionSet(o.selectionSet,i,$).then(function(Y){return{result:Y,exportedVariables:$.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,i,r){return Pt(this,void 0,void 0,function(){var n,s,a,o,u,c=this;return Nt(this,function(h){return n=r.fragmentMap,s=r.context,a=r.variables,o=[i],u=function(b){return Pt(c,void 0,void 0,function(){var R,q;return Nt(this,function(L){return Ur(b,a)?Tt(b)?[2,this.resolveField(b,i,r).then(function($){var z;typeof $!="undefined"&&o.push((z={},z[yi(b)]=$,z))})]:(Bi(b)?R=b:(R=n[b.name.value],ce(R,7)),R&&R.typeCondition&&(q=R.typeCondition.name.value,r.fragmentMatcher(i,q,s))?[2,this.resolveSelectionSet(R.selectionSet,i,r).then(function($){o.push($)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(u)).then(function(){return Kr(o)})]})})},t.prototype.resolveField=function(e,i,r){return Pt(this,void 0,void 0,function(){var n,s,a,o,u,c,h,b,R,q=this;return Nt(this,function(L){return n=r.variables,s=e.name.value,a=yi(e),o=s!==a,u=i[a]||i[s],c=Promise.resolve(u),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(h=i.__typename||r.defaultOperationType,b=this.resolvers&&this.resolvers[h],b&&(R=b[o?s:a],R&&(c=Promise.resolve(R(i,qr(e,n),r.context,{field:e,fragmentMap:r.fragmentMap}))))),[2,c.then(function($){if($===void 0&&($=u),e.directives&&e.directives.forEach(function(z){z.name.value==="export"&&z.arguments&&z.arguments.forEach(function(Y){Y.name.value==="as"&&Y.value.kind==="StringValue"&&(r.exportedVariables[Y.value.value]=$)})}),!e.selectionSet||$==null)return $;if(Array.isArray($))return q.resolveSubSelectedArray(e,$,r);if(e.selectionSet)return q.resolveSelectionSet(e.selectionSet,$,r)})]})})},t.prototype.resolveSubSelectedArray=function(e,i,r){var n=this;return Promise.all(i.map(function(s){if(s===null)return null;if(Array.isArray(s))return n.resolveSubSelectedArray(e,s,r);if(e.selectionSet)return n.resolveSelectionSet(e.selectionSet,s,r)}))},t}();function Vs(t){var e=new Set,i=null;return new _i(function(r){return e.add(r),i=i||t.subscribe({next:function(n){e.forEach(function(s){return s.next&&s.next(n)})},error:function(n){e.forEach(function(s){return s.error&&s.error(n)})},complete:function(){e.forEach(function(n){return n.complete&&n.complete()})}}),function(){e.delete(r)&&!e.size&&i&&(i.unsubscribe(),i=null)}})}function qu(t,e){return new _i(function(i){var r=i.next,n=i.error,s=i.complete,a=0,o=!1,u={next:function(h){++a,new Promise(function(b){b(e(h))}).then(function(b){--a,r&&r.call(i,b),o&&u.complete()},function(b){--a,n&&n.call(i,b)})},error:function(h){n&&n.call(i,h)},complete:function(){o=!0,a||s&&s.call(i)}},c=t.subscribe(u);return function(){return c.unsubscribe()}})}var Uu=Object.prototype.hasOwnProperty,Lu=function(){function t(e){var i=e.link,r=e.queryDeduplication,n=r===void 0?!1:r,s=e.store,a=e.onBroadcast,o=a===void 0?function(){}:a,u=e.ssrMode,c=u===void 0?!1:u,h=e.clientAwareness,b=h===void 0?{}:h,R=e.localState,q=e.assumeImmutableResults;this.mutationStore=new Mu,this.queryStore=new xu,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Br?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=i,this.queryDeduplication=n,this.dataStore=s,this.onBroadcast=o,this.clientAwareness=b,this.localState=R||new $s({cache:s.getCache()}),this.ssrMode=c,this.assumeImmutableResults=!!q}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(i,r){e.stopQueryNoBroadcast(r)}),this.fetchQueryRejectFns.forEach(function(i){i(new De(8))})},t.prototype.mutate=function(e){var i=e.mutation,r=e.variables,n=e.optimisticResponse,s=e.updateQueries,a=e.refetchQueries,o=a===void 0?[]:a,u=e.awaitRefetchQueries,c=u===void 0?!1:u,h=e.update,b=e.errorPolicy,R=b===void 0?"none":b,q=e.fetchPolicy,L=e.context,$=L===void 0?{}:L;return Pt(this,void 0,void 0,function(){var z,Y,Z,re=this;return Nt(this,function(te){switch(te.label){case 0:return ce(i,9),ce(!q||q==="no-cache",10),z=this.generateQueryId(),i=this.transform(i).document,this.setQuery(z,function(){return{document:i}}),r=this.getVariables(i,r),this.transform(i).hasClientExports?[4,this.localState.addExportedVariables(i,r,$)]:[3,2];case 1:r=te.sent(),te.label=2;case 2:return Y=function(){var le={};return s&&re.queries.forEach(function(ve,he){var ke=ve.observableQuery;if(ke){var de=ke.queryName;de&&Uu.call(s,de)&&(le[he]={updater:s[de],query:re.queryStore.get(he)})}}),le},this.mutationStore.initMutation(z,i,r),this.dataStore.markMutationInit({mutationId:z,document:i,variables:r,updateQueries:Y(),update:h,optimisticResponse:n}),this.broadcastQueries(),Z=this,[2,new Promise(function(le,ve){var he,ke;Z.getObservableFromLink(i,K(K({},$),{optimisticResponse:n}),r,!1).subscribe({next:function(de){if($t(de)&&R==="none"){ke=new Dt({graphQLErrors:de.errors});return}Z.mutationStore.markMutationResult(z),q!=="no-cache"&&Z.dataStore.markMutationResult({mutationId:z,result:de,document:i,variables:r,updateQueries:Y(),update:h}),he=de},error:function(de){Z.mutationStore.markMutationError(z,de),Z.dataStore.markMutationComplete({mutationId:z,optimisticResponse:n}),Z.broadcastQueries(),Z.setQuery(z,function(){return{document:null}}),ve(new Dt({networkError:de}))},complete:function(){if(ke&&Z.mutationStore.markMutationError(z,ke),Z.dataStore.markMutationComplete({mutationId:z,optimisticResponse:n}),Z.broadcastQueries(),ke){ve(ke);return}typeof o=="function"&&(o=o(he));var de=[];ti(o)&&o.forEach(function(xt){if(typeof xt=="string")Z.queries.forEach(function(it){var qe=it.observableQuery;qe&&qe.queryName===xt&&de.push(qe.refetch())});else{var Vi={query:xt.query,variables:xt.variables,fetchPolicy:"network-only"};xt.context&&(Vi.context=xt.context),de.push(Z.query(Vi))}}),Promise.all(c?de:[]).then(function(){Z.setQuery(z,function(){return{document:null}}),R==="ignore"&&he&&$t(he)&&delete he.errors,le(he)})}})})]}})})},t.prototype.fetchQuery=function(e,i,r,n){return Pt(this,void 0,void 0,function(){var s,a,o,u,c,h,b,R,q,L,$,z,Y,Z,re,te,le,ve,he=this;return Nt(this,function(ke){switch(ke.label){case 0:return s=i.metadata,a=s===void 0?null:s,o=i.fetchPolicy,u=o===void 0?"cache-first":o,c=i.context,h=c===void 0?{}:c,b=this.transform(i.query).document,R=this.getVariables(b,i.variables),this.transform(b).hasClientExports?[4,this.localState.addExportedVariables(b,R,h)]:[3,2];case 1:R=ke.sent(),ke.label=2;case 2:if(i=K(K({},i),{variables:R}),L=u==="network-only"||u==="no-cache",$=L,L||(z=this.dataStore.getCache().diff({query:b,variables:R,returnPartialData:!0,optimistic:!1}),Y=z.complete,Z=z.result,$=!Y||u==="cache-and-network",q=Z),re=$&&u!=="cache-only"&&u!=="standby",Wi(["live"],b)&&(re=!0),te=this.idCounter++,le=u!=="no-cache"?this.updateQueryWatch(e,b,i):void 0,this.setQuery(e,function(){return{document:b,lastRequestId:te,invalidated:!0,cancel:le}}),this.invalidate(n),this.queryStore.initQuery({queryId:e,document:b,storePreviousVariables:re,variables:R,isPoll:r===Vt.poll,isRefetch:r===Vt.refetch,metadata:a,fetchMoreForQueryId:n}),this.broadcastQueries(),re){if(ve=this.fetchRequest({requestId:te,queryId:e,document:b,options:i,fetchMoreForQueryId:n}).catch(function(de){throw Tu(de)?de:(te>=he.getQuery(e).lastRequestId&&(he.queryStore.markQueryError(e,de,n),he.invalidate(e),he.invalidate(n),he.broadcastQueries()),new Dt({networkError:de}))}),u!=="cache-and-network")return[2,ve];ve.catch(function(){})}return this.queryStore.markQueryResultClient(e,!re),this.invalidate(e),this.invalidate(n),this.transform(b).hasForcedResolvers?[2,this.localState.runResolvers({document:b,remoteResult:{data:q},context:h,variables:R,onlyRunForcedResolvers:!0}).then(function(de){return he.markQueryResult(e,de,i,n),he.broadcastQueries(),de})]:(this.broadcastQueries(),[2,{data:q}])}})})},t.prototype.markQueryResult=function(e,i,r,n){var s=r.fetchPolicy,a=r.variables,o=r.errorPolicy;s==="no-cache"?this.setQuery(e,function(){return{newData:{result:i.data,complete:!0}}}):this.dataStore.markQueryResult(i,this.getQuery(e).document,a,n,o==="ignore"||o==="all")},t.prototype.queryListenerForObserver=function(e,i,r){var n=this;function s(a,o){if(r[a])try{r[a](o)}catch(u){}}return function(a,o){if(n.invalidate(e,!1),!!a){var u=n.getQuery(e),c=u.observableQuery,h=u.document,b=c?c.options.fetchPolicy:i.fetchPolicy;if(b!=="standby"){var R=Us(a.networkStatus),q=c&&c.getLastResult(),L=!!(q&&q.networkStatus!==a.networkStatus),$=i.returnPartialData||!o&&a.previousVariables||L&&i.notifyOnNetworkStatusChange||b==="cache-only"||b==="cache-and-network";if(!(R&&!$)){var z=ti(a.graphQLErrors),Y=c&&c.options.errorPolicy||i.errorPolicy||"none";if(Y==="none"&&z||a.networkError)return s("error",new Dt({graphQLErrors:a.graphQLErrors,networkError:a.networkError}));try{var Z=void 0,re=void 0;if(o)b!=="no-cache"&&b!=="network-only"&&n.setQuery(e,function(){return{newData:null}}),Z=o.result,re=!o.complete;else{var te=c&&c.getLastError(),le=Y!=="none"&&(te&&te.graphQLErrors)!==a.graphQLErrors;if(q&&q.data&&!le)Z=q.data,re=!1;else{var ve=n.dataStore.getCache().diff({query:h,variables:a.previousVariables||a.variables,returnPartialData:!0,optimistic:!0});Z=ve.result,re=!ve.complete}}var he=re&&!(i.returnPartialData||b==="cache-only"),ke={data:he?q&&q.data:Z,loading:R,networkStatus:a.networkStatus,stale:he};Y==="all"&&z&&(ke.errors=a.graphQLErrors),s("next",ke)}catch(de){s("error",new Dt({networkError:de}))}}}}}},t.prototype.transform=function(e){var i=this.transformCache;if(!i.has(e)){var r=this.dataStore.getCache(),n=r.transformDocument(e),s=lu(r.transformForLink(n)),a=this.localState.clientQuery(n),o=this.localState.serverQuery(s),u={document:n,hasClientExports:eu(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:o,defaultVars:Hr(ei(n))},c=function(h){h&&!i.has(h)&&i.set(h,u)};c(e),c(n),c(a),c(o)}return i.get(e)},t.prototype.getVariables=function(e,i){return K(K({},this.transform(e).defaultVars),i)},t.prototype.watchQuery=function(e,i){i===void 0&&(i=!0),ce(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var r=K({},e);return new Iu({queryManager:this,options:r,shouldSubscribe:i})},t.prototype.query=function(e){var i=this;return ce(e.query,12),ce(e.query.kind==="Document",13),ce(!e.returnPartialData,14),ce(!e.pollInterval,15),new Promise(function(r,n){var s=i.watchQuery(e,!1);i.fetchQueryRejectFns.set("query:"+s.queryId,n),s.result().then(r,n).then(function(){return i.fetchQueryRejectFns.delete("query:"+s.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,i){this.setQuery(e,function(r){var n=r.listeners;return n.add(i),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,i,r){var n=this,s=this.getQuery(e).cancel;s&&s();var a=function(){var o=null,u=n.getQuery(e).observableQuery;if(u){var c=u.getLastResult();c&&(o=c.data)}return o};return this.dataStore.getCache().watch({query:i,variables:r.variables,optimistic:!0,previousResult:a,callback:function(o){n.setQuery(e,function(){return{invalidated:!0,newData:o}})}})},t.prototype.addObservableQuery=function(e,i){this.setQuery(e,function(){return{observableQuery:i}})},t.prototype.removeObservableQuery=function(e){var i=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),i&&i()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(i){i(new De(16))});var e=[];return this.queries.forEach(function(i,r){var n=i.observableQuery;n&&e.push(r)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var i=this;e===void 0&&(e=!1);var r=[];return this.queries.forEach(function(n,s){var a=n.observableQuery;if(a){var o=a.options.fetchPolicy;a.resetLastResults(),o!=="cache-only"&&(e||o!=="standby")&&r.push(a.refetch()),i.setQuery(s,function(){return{newData:null}}),i.invalidate(s)}}),this.broadcastQueries(),Promise.all(r)},t.prototype.observeQuery=function(e,i,r){return this.addQueryListener(e,this.queryListenerForObserver(e,i,r)),this.fetchQuery(e,i)},t.prototype.startQuery=function(e,i,r){return this.addQueryListener(e,r),this.fetchQuery(e,i).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var i=this,r=e.query,n=e.fetchPolicy,s=e.variables;r=this.transform(r).document,s=this.getVariables(r,s);var a=function(u){return i.getObservableFromLink(r,{},u,!1).map(function(c){if((!n||n!=="no-cache")&&(i.dataStore.markSubscriptionResult(c,r,u),i.broadcastQueries()),$t(c))throw new Dt({graphQLErrors:c.errors});return c})};if(this.transform(r).hasClientExports){var o=this.localState.addExportedVariables(r,s).then(a);return new _i(function(u){var c=null;return o.then(function(h){return c=h.subscribe(u)},u.error),function(){return c&&c.unsubscribe()}})}return a(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(i){return i.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,i){i===void 0&&(i=!0);var r=e.options,n=r.variables,s=r.query,a=r.fetchPolicy,o=r.returnPartialData,u=e.getLastResult(),c=this.getQuery(e.queryId).newData;if(c&&c.complete)return{data:c.result,partial:!1};if(a==="no-cache"||a==="network-only")return{data:void 0,partial:!1};var h=this.dataStore.getCache().diff({query:s,variables:n,previousResult:u?u.data:void 0,returnPartialData:!0,optimistic:i}),b=h.result,R=h.complete;return{data:R||o?b:void 0,partial:!R}},t.prototype.getQueryWithPreviousResult=function(e){var i;if(typeof e=="string"){var r=this.getQuery(e).observableQuery;ce(r,17),i=r}else i=e;var n=i.options,s=n.variables,a=n.query;return{previousResult:this.getCurrentQueryResult(i,!1).data,variables:s,document:a}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(i,r){i.invalidated&&i.listeners.forEach(function(n){n&&n(e.queryStore.get(r),i.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,i,r,n){var s=this;n===void 0&&(n=this.queryDeduplication);var a,o=this.transform(e).serverQuery;if(o){var u=this,c=u.inFlightLinkObservables,h=u.link,b={query:o,variables:r,operationName:$r(o)||void 0,context:this.prepareContext(K(K({},i),{forceFetch:!n}))};if(i=b.context,n){var R=c.get(o)||new Map;c.set(o,R);var q=JSON.stringify(r);if(a=R.get(q),!a){R.set(q,a=Vs(Zi(h,b)));var L=function(){R.delete(q),R.size||c.delete(o),$.unsubscribe()},$=a.subscribe({next:L,error:L,complete:L})}}else a=Vs(Zi(h,b))}else a=_i.of({data:{}}),i=this.prepareContext(i);var z=this.transform(e).clientQuery;return z&&(a=qu(a,function(Y){return s.localState.runResolvers({document:z,remoteResult:Y,context:i,variables:r})})),a},t.prototype.fetchRequest=function(e){var i=this,r=e.requestId,n=e.queryId,s=e.document,a=e.options,o=e.fetchMoreForQueryId,u=a.variables,c=a.errorPolicy,h=c===void 0?"none":c,b=a.fetchPolicy,R,q;return new Promise(function(L,$){var z=i.getObservableFromLink(s,a.context,u),Y="fetchRequest:"+n;i.fetchQueryRejectFns.set(Y,$);var Z=function(){i.fetchQueryRejectFns.delete(Y),i.setQuery(n,function(te){var le=te.subscriptions;le.delete(re)})},re=z.map(function(te){if(r>=i.getQuery(n).lastRequestId&&(i.markQueryResult(n,te,a,o),i.queryStore.markQueryResult(n,te,o),i.invalidate(n),i.invalidate(o),i.broadcastQueries()),h==="none"&&ti(te.errors))return $(new Dt({graphQLErrors:te.errors}));if(h==="all"&&(q=te.errors),o||b==="no-cache")R=te.data;else{var le=i.dataStore.getCache().diff({variables:u,query:s,optimistic:!1,returnPartialData:!0}),ve=le.result,he=le.complete;(he||a.returnPartialData)&&(R=ve)}}).subscribe({error:function(te){Z(),$(te)},complete:function(){Z(),L({data:R,errors:q,loading:!1,networkStatus:we.ready,stale:!1})}});i.setQuery(n,function(te){var le=te.subscriptions;le.add(re)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,i){var r=this.getQuery(e),n=K(K({},r),i(r));this.queries.set(e,n)},t.prototype.invalidate=function(e,i){i===void 0&&(i=!0),e&&this.setQuery(e,function(){return{invalidated:i}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var i=this.localState.prepareContext(e);return K(K({},i),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var i=this.queryStore.get(e);return i&&i.networkStatus!==we.ready&&i.networkStatus!==we.error},t.prototype.startPollingQuery=function(e,i,r){var n=this,s=e.pollInterval;if(ce(s,18),!this.ssrMode){var a=this.pollingInfoByQueryId.get(i);a||this.pollingInfoByQueryId.set(i,a={}),a.interval=s,a.options=K(K({},e),{fetchPolicy:"network-only"});var o=function(){var c=n.pollingInfoByQueryId.get(i);c&&(n.checkInFlight(i)?u():n.fetchQuery(i,c.options,Vt.poll).then(u,u))},u=function(){var c=n.pollingInfoByQueryId.get(i);c&&(clearTimeout(c.timeout),c.timeout=setTimeout(o,c.interval))};r&&this.addQueryListener(i,r),u()}return i},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),$u=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,i,r,n,s){s===void 0&&(s=!1);var a=!$t(e);s&&$t(e)&&e.data&&(a=!0),!n&&a&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:i,variables:r})},t.prototype.markSubscriptionResult=function(e,i,r){$t(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:i,variables:r})},t.prototype.markMutationInit=function(e){var i=this;if(e.optimisticResponse){var r;typeof e.optimisticResponse=="function"?r=e.optimisticResponse(e.variables):r=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(n){var s=i.cache;i.cache=n;try{i.markMutationResult({mutationId:e.mutationId,result:{data:r},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{i.cache=s}},e.mutationId)}},t.prototype.markMutationResult=function(e){var i=this;if(!$t(e.result)){var r=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],n=e.updateQueries;n&&Object.keys(n).forEach(function(s){var a=n[s],o=a.query,u=a.updater,c=i.cache.diff({query:o.document,variables:o.variables,returnPartialData:!0,optimistic:!1}),h=c.result,b=c.complete;if(b){var R=zr(function(){return u(h,{mutationResult:e.result,queryName:$r(o.document)||void 0,queryVariables:o.variables})});R&&r.push({result:R,dataId:"ROOT_QUERY",query:o.document,variables:o.variables})}}),this.cache.performTransaction(function(s){r.forEach(function(o){return s.write(o)});var a=e.update;a&&zr(function(){return a(s,e.result)})})}},t.prototype.markMutationComplete=function(e){var i=e.mutationId,r=e.optimisticResponse;r&&this.cache.removeOptimistic(i)},t.prototype.markUpdateQueryResult=function(e,i,r){this.cache.write({result:r,dataId:"ROOT_QUERY",variables:i,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),Vu="2.6.10",Hu=!1,Gu=function(){function t(e){var i=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=e.cache,n=e.ssrMode,s=n===void 0?!1:n,a=e.ssrForceFetchDelay,o=a===void 0?0:a,u=e.connectToDevTools,c=e.queryDeduplication,h=c===void 0?!0:c,b=e.defaultOptions,R=e.assumeImmutableResults,q=R===void 0?!1:R,L=e.resolvers,$=e.typeDefs,z=e.fragmentMatcher,Y=e.name,Z=e.version,re=e.link;if(!re&&L&&(re=Je.empty()),!re||!r)throw new De(4);this.link=re,this.cache=r,this.store=new $u(r),this.disableNetworkFetches=s||o>0,this.queryDeduplication=h,this.defaultOptions=b||{},this.typeDefs=$,o&&setTimeout(function(){return i.disableNetworkFetches=!1},o),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var te=!1;(typeof u=="undefined"?te:u&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=Vu,this.localState=new $s({cache:r,client:this,resolvers:L,fragmentMatcher:z}),this.queryManager=new Lu({link:this.link,store:this.store,queryDeduplication:h,ssrMode:s,clientAwareness:{name:Y,version:Z},localState:this.localState,assumeImmutableResults:q,onBroadcast:function(){i.devToolsHookCb&&i.devToolsHookCb({action:{},state:{queries:i.queryManager.queryStore.getStore(),mutations:i.queryManager.mutationStore.getStore()},dataWithOptimisticResults:i.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=K(K({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=K(K({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=K(K({},this.defaultOptions.query),e)),ce(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=K(K({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=K(K({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,i){return i===void 0&&(i=!1),this.cache.readQuery(e,i)},t.prototype.readFragment=function(e,i){return i===void 0&&(i=!1),this.cache.readFragment(e,i)},t.prototype.writeQuery=function(e){var i=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),i},t.prototype.writeFragment=function(e){var i=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),i},t.prototype.writeData=function(e){var i=this.cache.writeData(e);return this.queryManager.broadcastQueries(),i},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Zi(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(i){return i()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(i){return i()}))})},t.prototype.onResetStore=function(e){var i=this;return this.resetStoreCallbacks.push(e),function(){i.resetStoreCallbacks=i.resetStoreCallbacks.filter(function(r){return r!==e})}},t.prototype.onClearStore=function(e){var i=this;return this.clearStoreCallbacks.push(e),function(){i.clearStoreCallbacks=i.clearStoreCallbacks.filter(function(r){return r!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const of=null;var Bu=Object.defineProperty,Hs=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Bu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Xi extends Error{constructor(e){super(e);this.message=e,Hs(this,"name"),Hs(this,"stack")}}class er{constructor(e,i,r){this.remoteName=e,this.url=i,this.gitProtocol=r}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function Gs(t,e,i){if(!e)return null;const r=new Ut(e);return i&&r.update({type:i.type}),r.host?new er(t,e,r):null}function Ri(t){return t.state.remotes.map(e=>Gs(e.name,e.fetchUrl||e.pushUrl)).filter(e=>!!e)}var ju=Object.defineProperty,Bs=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Qu{constructor(e){this.commentsController=e,Bs(this,"_prCommentControllers",{}),Bs(this,"_prDocumentCommentThreadMap",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,i){const r=e.uri,n=be(r);return!n||!this._prCommentControllers[n.prNumber]?void 0:this._prCommentControllers[n.prNumber].provideCommentingRanges.bind(this._prCommentControllers[n.prNumber])(e,i)}async toggleReaction(e,i){const r=e.parent.uri,n=be(r);return!n||!this._prCommentControllers[n.prNumber]||!this._prCommentControllers[n.prNumber].toggleReaction?void 0:this._prCommentControllers[n.prNumber].toggleReaction.bind(this._prCommentControllers[n.prNumber])(e,i)}registerCommentController(e,i){return this._prCommentControllers[e]=i,this._prDocumentCommentThreadMap[e]||(this._prDocumentCommentThreadMap[e]={}),{commentThreadCache:this._prDocumentCommentThreadMap[e],dispose:()=>{delete this._prCommentControllers[e]}}}clearCommentThreadCache(e){if(this._prDocumentCommentThreadMap[e]){for(const i in this._prDocumentCommentThreadMap[e])this._prDocumentCommentThreadMap[e][i].forEach(r=>r.dispose());this._prDocumentCommentThreadMap[e]={}}}dispose(){this._prCommentControllers={},this._prDocumentCommentThreadMap={}}}var Wu=oe(9967),zu=oe.n(Wu),Ku=Object.defineProperty,st=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Ku(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const js=20,ii="GraphQL";var He;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(He||(He={}));const ae=class{constructor(t,e,i){this.remote=t,this._credentialStore=e,this._telemetry=i,st(this,"_initialized",!1),st(this,"_hub"),st(this,"_metadata"),st(this,"_toDispose",[]),st(this,"commentsController"),st(this,"commentsHandler"),st(this,"isGitHubDotCom"),st(this,"query",async r=>{const n=this.hub&&this.hub.graphql;if(!n)return H.debug(`Not available for query: ${r}`,ii),{data:null,loading:!1,networkStatus:we.error,stale:!1};H.debug(`Request: ${JSON.stringify(r,null,2)}`,ii);const s=await n.query(r);return H.debug(`Response: ${JSON.stringify(s,null,2)}`,ii),s}),st(this,"mutate",async r=>{const n=this.hub&&this.hub.graphql;if(!n)return H.debug(`Not available for query: ${r}`,ii),{data:null,loading:!1,networkStatus:we.error,stale:!1};H.debug(`Request: ${JSON.stringify(r,null,2)}`,ii);const s=await n.mutate(r);return H.debug(`Response: ${JSON.stringify(s,null,2)}`,ii),s}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new Xi("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=l.comments.createCommentController(`browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new Qu(this.commentsController),this._toDispose.push(this.commentsController),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return zu()}async getMetadata(){if(H.debug("Fetch metadata - enter",ae.ID),this._metadata)return H.debug(`Fetch metadata ${this._metadata.owner.login}/${this._metadata.name} - done`,ae.ID),this._metadata;const{octokit:t,remote:e}=await this.ensure(),i=await t.repos.get({owner:e.owner,repo:e.repositoryName});return H.debug(`Fetch metadata ${e.owner}/${e.repositoryName} - done`,ae.ID),this._metadata={...i.data,currentUser:t.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=Gs(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){H.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated()?this._hub=this._credentialStore.getHub():this._hub=await this._credentialStore.showSignInNotification(),this}async getDefaultBranch(){try{H.debug("Fetch default branch - enter",ae.ID);const{octokit:t,remote:e}=await this.ensure(),{data:i}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return H.debug("Fetch default branch - done",ae.ID),i.default_branch}catch(t){H.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,i,r,n;try{H.debug("Fetch repo permissions and available merge methods - enter",ae.ID);const{octokit:s,remote:a}=await this.ensure(),{data:o}=await s.repos.get({owner:a.owner,repo:a.repositoryName});return H.debug("Fetch repo permissions and available merge methods - done",ae.ID),{hasWritePermission:(e=(t=o.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(i=o.allow_merge_commit)!=null?i:!1,squash:(r=o.allow_squash_merge)!=null?r:!1,rebase:(n=o.allow_rebase_merge)!=null?n:!1}}}catch(s){H.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${s}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{H.debug("Fetch all pull requests - enter",ae.ID);const{octokit:e,remote:i}=await this.ensure(),r=await e.pulls.list({owner:i.owner,repo:i.repositoryName,per_page:js,page:t||1}),n=!!r.headers.link&&r.headers.link.indexOf('rel="next"')>-1;if(!r.data)return H.appendLine(`Warning: no result data for ${i.owner}/${i.repositoryName} Status: ${r.status}`),{items:[],hasMorePages:!1};const s=r.data.map(a=>a.head.repo?new Ge(this._telemetry,this,this.remote,Ht(a,this)):(H.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(a=>a!==null);return H.debug("Fetch all pull requests - done",ae.ID),{items:s,hasMorePages:n}}catch(e){if(H.appendLine(`Fetching all pull requests failed: ${e}`,ae.ID),e.code===404)l.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{H.debug("Fetch pull requests for branch - enter",ae.ID);const{octokit:e,remote:i}=await this.ensure(),n=(await e.pulls.list({owner:i.owner,repo:i.repositoryName,head:`${i.owner}:${t}`})).data.map(s=>new Ge(this._telemetry,this,this.remote,Ht(s,this))).filter(s=>s!==null);return H.debug("Fetch pull requests for branch - done",ae.ID),n}catch(e){if(H.appendLine(`Fetching pull requests for branch failed: ${e}`,ae.ID),e.code===404)l.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const i=new er(e.repositoryName,e.repositoryUrl,new Ut(e.repositoryUrl));t=new ae(i,this._credentialStore,this._telemetry)}return t}async getIssuesForUserByMilestone(t){try{H.debug("Fetch all issues - enter",ae.ID);const{query:e,remote:i,schema:r}=await this.ensure(),{data:n}=await e({query:r.GetMilestones,variables:{owner:i.owner,name:i.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});H.debug("Fetch all issues - done",ae.ID);const s=[];let a=this;return n&&n.repository.milestones&&n.repository.milestones.nodes&&n.repository.milestones.nodes.forEach(o=>{const u=en(o);if(u){const c=[];o.issues.edges.forEach(h=>{const b=rn(h.node,this);a=this.getRepoForIssue(a,b),c.push(new Fe(a,a.remote,b))}),s.push({milestone:u,issues:c})}}),{items:s,hasMorePages:n.repository.milestones.pageInfo.hasNextPage}}catch(e){H.appendLine(`GithubRepository> Unable to fetch issues: ${e}`);return}}async getIssuesWithoutMilestone(t){try{H.debug("Fetch issues without milestone- enter",ae.ID);const{query:e,remote:i,schema:r}=await this.ensure(),{data:n}=await e({query:r.IssuesWithoutMilestone,variables:{owner:i.owner,name:i.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});H.debug("Fetch issues without milestone - done",ae.ID);const s=[];let a=this;return n&&n.repository.issues.edges&&n.repository.issues.edges.forEach(o=>{if(o.node.id){const u=rn(o.node,this);a=this.getRepoForIssue(a,u),s.push(new Fe(a,a.remote,u))}}),{items:s,hasMorePages:n.repository.issues.pageInfo.hasNextPage}}catch(e){H.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${e}`);return}}async getIssues(t,e){try{H.debug("Fetch issues with query - enter",ae.ID);const{query:i,schema:r}=await this.ensure(),{data:n}=await i({query:r.Issues,variables:{query:`${e} type:issue`}});H.debug("Fetch issues with query - done",ae.ID);const s=[];let a=this;return n&&n.search.edges&&n.search.edges.forEach(o=>{if(o.node.id){const u=rn(o.node,this);a=this.getRepoForIssue(a,u),s.push(new Fe(a,a.remote,u))}}),{items:s,hasMorePages:n.search.pageInfo.hasNextPage}}catch(i){H.appendLine(`GithubRepository> Unable to fetch issues with query: ${i}`);return}}async getMaxIssue(){try{H.debug("Fetch max issue - enter",ae.ID);const{query:t,remote:e,schema:i}=await this.ensure(),{data:r}=await t({query:i.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return H.debug("Fetch max issue - done",ae.ID),r&&r.repository.issues.edges.length===1?r.repository.issues.edges[0].node.number:void 0}catch(t){H.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{H.debug("Fetch viewer permission - enter",ae.ID);const{query:t,remote:e,schema:i}=await this.ensure(),{data:r}=await t({query:i.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return H.debug("Fetch viewer permission - done",ae.ID),sc(r)}catch(t){return H.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),He.Unknown}}async fork(){try{H.debug("Fork repository",ae.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){H.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{H.debug("Fetch viewer permission - enter",ae.ID);const{query:t,remote:e,schema:i}=await this.ensure(),{data:r}=await t({query:i.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return H.debug("Fetch viewer permission - done",ae.ID),r.repository}catch(t){H.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{H.debug(`Fetch pull request category ${t} - enter`,ae.ID);const{octokit:i,remote:r}=await this.ensure(),n=await i.users.getAuthenticated({}),s=await i.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:a,headers:o}=await i.search.issuesAndPullRequests({q:this.getPRFetchQuery(s.data.full_name,n.data.login,t),per_page:js,page:e||1}),u=[];a.items.forEach(R=>{u.push(new Promise(async(q,L)=>{const $=await i.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:R.number});q($)}))});const c=!!o.link&&o.link.indexOf('rel="next"')>-1,b=(await Promise.all(u)).map(R=>R.data.head.repo?new Ge(this._telemetry,this,this.remote,Ht(R.data,this)):(H.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(R=>R!==null);return H.debug(`Fetch pull request category ${t} - done`,ae.ID),{items:b,hasMorePages:c}}catch(i){if(H.appendLine(`GitHubRepository> Fetching all pull requests failed: ${i}`),i.code===404)l.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw i}}async getPullRequest(t){try{H.debug(`Fetch pull request ${t} - enter`,ae.ID);const{query:e,remote:i,schema:r}=await this.ensure(),{data:n}=await e({query:r.PullRequest,variables:{owner:i.owner,name:i.repositoryName,number:t}});return H.debug(`Fetch pull request ${t} - done`,ae.ID),new Ge(this._telemetry,this,i,Zs(n,this))}catch(e){H.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{H.debug(`Fetch issue ${t} - enter`,ae.ID);const{query:i,remote:r,schema:n}=await this.ensure(),{data:s}=await i({query:e?n.IssueWithComments:n.Issue,variables:{owner:r.owner,name:r.repositoryName,number:t}});return H.debug(`Fetch issue ${t} - done`,ae.ID),new Fe(this,r,Zs(s,this))}catch(i){H.appendLine(`GithubRepository> Unable to fetch PR: ${i}`);return}}async listBranches(t,e){const{octokit:i}=await this.ensure();H.debug(`List branches for ${t}/${e} - enter`,ae.ID);try{const r=await i.paginate("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100});return H.debug(`List branches for ${t}/${e} - done`,ae.ID),r.map(n=>n.name)}catch(r){throw H.debug(`List branches for ${t}/${e} failed`,ae.ID),r}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(i){H.appendLine(`GithubRepository> Unable to delete branch: ${i}`);return}}async getMentionableUsers(){H.debug("Fetch mentionable users - enter",ae.ID);const{query:t,remote:e,schema:i}=await this.ensure();let r=null,n=!1;const s=[];do try{const a=await t({query:i.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:r}});s.push(...a.data.repository.mentionableUsers.nodes.map(o=>({login:o.login,avatarUrl:o.avatarUrl,name:o.name,url:o.url,email:o.email}))),n=a.data.repository.mentionableUsers.pageInfo.hasNextPage,r=a.data.repository.mentionableUsers.pageInfo.endCursor}catch(a){return H.debug(`Unable to fetch mentionable users: ${a}`,ae.ID),s}while(n);return s}async getAssignableUsers(){H.debug("Fetch assignable users - enter",ae.ID);const{query:t,remote:e,schema:i}=await this.ensure();let r=null,n=!1;const s=[];do try{const a=await t({query:i.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:r}});s.push(...a.data.repository.assignableUsers.nodes.map(o=>({login:o.login,avatarUrl:o.avatarUrl,name:o.name,url:o.url,email:o.email}))),n=a.data.repository.assignableUsers.pageInfo.hasNextPage,r=a.data.repository.assignableUsers.pageInfo.endCursor}catch(a){return H.debug(`Unable to fetch assignable users: ${a}`,ae.ID),a.graphQLErrors&&a.graphQLErrors.length>0&&a.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&l.window.showWarningMessage(`GitHub user features will not work. ${a.graphQLErrors[0].message}`),s}while(n);return s}async compareCommits(t,e){const{remote:i,octokit:r}=await this.ensure(),{data:n}=await r.repos.compareCommits({repo:i.repositoryName,owner:i.owner,base:t,head:e});return n}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}getPRFetchQuery(t,e,i){return`is:pull-request ${i.replace("${user}",e)} type:pr repo:${t}`}};let ri=ae;st(ri,"ID","GitHubRepository");var Yu=Object.defineProperty,Ce=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Yu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const tr=class{constructor(t,e,i,r,n){Ce(this,"commentId"),Ce(this,"id"),Ce(this,"parent"),Ce(this,"body"),Ce(this,"originalBody"),Ce(this,"mode"),Ce(this,"author"),Ce(this,"label"),Ce(this,"commentReactions"),Ce(this,"contextValue"),this.parent=t,this.body=new l.MarkdownString(e),this.mode=l.CommentMode.Preview,this.author={name:r.login,iconPath:r.avatarUrl?l.Uri.parse(`${r.avatarUrl}&s=64`):void 0},this.label=i?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=n?n._rawComment.body:void 0,this.commentReactions=n?n.reactions:void 0,this.id=tr.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof tr&&t.id===this.id&&(t.mode=l.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof tr&&t.id===this.id&&(t.mode=l.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let xe=tr;Ce(xe,"idPool",0);class me{constructor(e,i){Ce(this,"commentId"),Ce(this,"parent"),Ce(this,"body"),Ce(this,"mode"),Ce(this,"author"),Ce(this,"label"),Ce(this,"reactions"),Ce(this,"_rawComment"),Ce(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new l.MarkdownString(e.body),this.body.isTrusted=!0,this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?l.Uri.parse(e.user.avatarUrl):void 0},Ws(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const r=[];e.canEdit&&r.push("canEdit"),e.canDelete&&r.push("canDelete"),this.contextValue=r.join(","),this.parent=i}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof me&&e.commentId===this.commentId&&(e.mode=l.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof me&&e.commentId===this.commentId&&(e.mode=l.CommentMode.Preview,e.body=e._rawComment.body),e))}}function ni(t,e){var i;const r=e.createCommentThread(t.uri,t.range,[]);r.threadId=t.threadId,r.comments=t.comments.map(a=>new me(a,r));const n=!!((i=t.comments[0])==null?void 0:i.isResolved);r.isResolved=n,at(r);const s=t.uri.scheme!=="pr"&&t.uri.scheme!=="review";return r.collapsibleState=s||n?l.CommentThreadCollapsibleState.Collapsed:l.CommentThreadCollapsibleState.Expanded,r}function at(t){if(t.comments.length){const e=v(t.comments,i=>i.author.name).map(i=>`@${i.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Qs(t){return rr().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const i=t.find(r=>r.label===e.label);return i?{label:i.label,authorHasReacted:i.viewerHasReacted,count:i.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function Ws(t,e){t.reactions=Qs(e)}function Zr(t,e){e||(t.comments=t.comments.map(i=>(i instanceof me&&(i._rawComment.isDraft=!1),i.label=void 0,i)))}function Ft(t,e){return{login:t.login,url:t.html_url,avatarUrl:e.isGitHubDotCom?t.avatar_url:void 0}}function zs(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function Ht(t,e){const{number:i,body:r,title:n,html_url:s,user:a,state:o,assignees:u,created_at:c,updated_at:h,head:b,base:R,labels:q,node_id:L,id:$,draft:z}=t;return{id:$,graphNodeId:L,number:i,body:r,title:n,url:s,user:Ft(a,e),state:o,merged:t.merged||!1,assignees:u?u.map(Z=>Ft(Z,e)):void 0,createdAt:c,updatedAt:h,head:zs(b),base:zs(R),mergeable:t.mergeable?Et.Mergeable:Et.NotMergeable,labels:q.map(Z=>({name:"",color:"",...Z})),isDraft:z,suggestedReviewers:[]}}function Ju(t,e){const{number:i,body:r,title:n,html_url:s,user:a,state:o,assignees:u,created_at:c,updated_at:h,labels:b,node_id:R,id:q}=t;return{id:q,graphNodeId:R,number:i,body:r,title:n,url:s,user:Ft(a,e),state:o,assignees:u?u.map($=>Ft($,e)):void 0,createdAt:c,updatedAt:h,labels:b.map($=>typeof $=="string"?{name:$,color:""}:{name:"",color:"",...$}),suggestedReviewers:[]}}function Zu(t,e){return{event:Ee.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Ft(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Ks(t){const e=[],i=Zt(t.diffHunk);let r=i.next();for(;!r.done;){const n=r.value;e.push(n),r=i.next()}return e}function Ys(t,e){const i={url:t.url,id:t.id,pullRequestReviewId:t.pull_request_review_id,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Ft(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},r=Ks(i);return i.diffHunks=r,i}function Xu(t){switch(t){case"PullRequestCommit":return Ee.Committed;case"LabeledEvent":return Ee.Labeled;case"MilestonedEvent":return Ee.Milestoned;case"AssignedEvent":return Ee.Assigned;case"HeadRefDeletedEvent":return Ee.HeadRefDeleted;case"IssueComment":return Ee.Commented;case"PullRequestReview":return Ee.Reviewed;case"MergedEvent":return Ee.Merged;default:return Ee.Other}}function si(t,e){const i={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Xr(t.reactionGroups),isResolved:e},r=Ks(i);return i.diffHunks=r,i}function Js(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Xr(t){const e=rr().reduce((r,n)=>(r[n.title]=n,r),{});return t.filter(r=>r.users.totalCount>0).map(r=>({label:e[r.content].label,count:r.users.totalCount,icon:e[r.content].icon,viewerHasReacted:r.viewerHasReacted}))}function ir(t){if(t)return{label:`${t.repository.owner.login}:${t.name}`,ref:t.name,sha:t.target.oid,repo:{cloneUrl:t.repository.url}}}function vt(t,e){return t?{login:t.login,url:t.url,avatarUrl:e.isGitHubDotCom?t.avatarUrl:void 0}:{login:"",url:""}}function en(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function tn(t){switch(t){case"UNKNOWN":return Et.Unknown;case"MERGEABLE":return Et.Mergeable;case"CONFLICTING":return Et.NotMergeable}}function Zs(t,e){var i,r;const n=t.repository.pullRequest;return{id:n.databaseId,graphNodeId:n.id,url:n.url,number:n.number,state:n.state,body:n.body,bodyHTML:n.bodyHTML,title:n.title,createdAt:n.createdAt,updatedAt:n.updatedAt,head:ir(n.headRef),base:ir(n.baseRef),user:vt(n.author,e),merged:n.merged,mergeable:tn(n.mergeable),labels:n.labels.nodes,isDraft:n.isDraft,suggestedReviewers:Xs(n.suggestedReviewers),comments:ec((i=n.comments)==null?void 0:i.nodes,e),milestone:en(n.milestone),assignees:(r=n.assignees)==null?void 0:r.nodes}}function ec(t,e){if(!t)return;const i=[];for(const r of t)i.push({author:vt(r.author,e),body:r.body,databaseId:r.databaseId});return i}function rn(t,e){var i,r,n;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:t.assignees.nodes,user:vt(t.author,e),labels:t.labels.nodes,repositoryName:(i=t.repository)==null?void 0:i.name,repositoryOwner:(r=t.repository)==null?void 0:r.owner.login,repositoryUrl:(n=t.repository)==null?void 0:n.url}}function lf(t,e){const i=t;return{id:i.databaseId,graphNodeId:i.id,url:i.url,number:i.number,state:i.state,body:i.body,bodyHTML:i.bodyHTML,title:i.title,createdAt:i.createdAt,updatedAt:i.updatedAt,head:ir(i.headRef),base:ir(i.baseRef),user:vt(i.author,e),merged:i.merged,mergeable:tn(i.mergeable),labels:i.labels.nodes,isDraft:i.isDraft,suggestedReviewers:Xs(i.suggestedReviewers),milestone:en(i.milestone)}}function Xs(t){return t?t.map(i=>({login:i.reviewer.login,avatarUrl:i.reviewer.avatarUrl,name:i.reviewer.name,url:i.reviewer.url,isAuthor:i.isAuthor,isCommenter:i.isCommenter})).sort(ea):[]}function ea(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function tc(t,e){return{event:Ee.Reviewed,comments:t.comments.nodes.map(i=>si(i,!1)).filter(i=>!i.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:vt(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function ta(t,e){const i=[];return t.forEach(r=>{const n=Xu(r.__typename);switch(n){case Ee.Commented:const s=r;i.push({htmlUrl:s.url,body:s.body,bodyHTML:s.bodyHTML,user:vt(s.author,e),event:n,canEdit:s.viewerCanUpdate,canDelete:s.viewerCanDelete,id:s.databaseId,graphNodeId:s.id,createdAt:s.createdAt});return;case Ee.Reviewed:const a=r;i.push({event:n,comments:[],submittedAt:a.submittedAt,body:a.body,bodyHTML:a.bodyHTML,htmlUrl:a.url,user:vt(a.author,e),authorAssociation:a.authorAssociation,state:a.state,id:a.databaseId});return;case Ee.Committed:const o=r;i.push({id:o.databaseId,event:n,sha:o.commit.oid,author:o.commit.author.user?vt(o.commit.author.user,e):{login:o.commit.committer.name},htmlUrl:o.url,message:o.commit.message,authoredDate:new Date(o.commit.authoredDate)});return;case Ee.Merged:const u=r;i.push({id:u.databaseId,event:n,user:vt(u.actor,e),createdAt:u.createdAt,mergeRef:u.mergeRef.name,sha:u.commit.oid,commitUrl:u.commit.commitUrl,url:u.url,graphNodeId:u.id});return;case Ee.Assigned:const c=r;i.push({id:c.databaseId,event:n,user:c.user,actor:c.actor});return;case Ee.HeadRefDeleted:const h=r;i.push({id:h.id,event:n,actor:h.actor,createdAt:h.createdAt,headRef:h.headRefName});return;default:break}}),i}function ic(t){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:rc(t.user.contributionsCollection)}}function rc(t){const e=[];return t.commitContributionsByRepository.forEach(i=>{i.contributions.nodes.forEach(r=>{e.push({createdAt:new Date(r.occurredAt),repoNameWithOwner:i.repository.nameWithOwner})})}),e}function rr(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:nt.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:nt.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:nt.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:nt.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:nt.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:nt.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:nt.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:nt.icons.reactions.EYES}]}function nc(t){const e=[];return t.forEach(i=>{var r,n;Tl(i)&&e.push({login:i.author.login,name:i.author.name||""}),Fr(i)&&e.push({login:i.user.login,name:(r=i.user.name)!=null?r:i.user.login}),Dl(i)&&e.push({login:i.user.login,name:(n=i.user.name)!=null?n:i.user.login})}),e}function sc(t){return t&&t.repository.viewerPermission&&Object.values(He).includes(t.repository.viewerPermission)?t.repository.viewerPermission:He.Unknown}function ia(t,e){for(const i of t.repositories)if(e.path.toLowerCase()===i.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(i.rootUri.path.toLowerCase())&&e.path.substring(i.rootUri.path.length).startsWith("/"))return i}function ra(t,e,i){const r=e.filter(Fr).filter(a=>a.state!=="PENDING");let n=[];const s=new Map;s.set(i.login,!0);for(let a=r.length-1;a>=0;a--){const o=r[a].user;s.get(o.login)||(s.set(o.login,!0),n.push({reviewer:o,state:r[a].state}))}return t.forEach(a=>{if(!s.get(a.login))n.push({reviewer:a,state:"REQUESTED"});else{const o=n.find(u=>u.reviewer.login===a.login);o.state="REQUESTED"}}),n=n.sort((a,o)=>a.state==="REQUESTED"&&o.state!=="REQUESTED"?1:o.state==="REQUESTED"&&a.state!=="REQUESTED"||a.reviewer.login.toLowerCase()<o.reviewer.login.toLowerCase()?-1:1),n}var ac=Object.defineProperty,Oe=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ac(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const nr=class{constructor(t,e,i,r=!1){Oe(this,"id"),Oe(this,"graphNodeId"),Oe(this,"number"),Oe(this,"title"),Oe(this,"html_url"),Oe(this,"state",Re.Open),Oe(this,"author"),Oe(this,"assignees"),Oe(this,"createdAt"),Oe(this,"updatedAt"),Oe(this,"milestone"),Oe(this,"githubRepository"),Oe(this,"remote"),Oe(this,"item"),Oe(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=i,r||this.update(i)}get isOpen(){return this.state===Re.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=l.Uri.parse(`${t}&s=${64}`),i=e.toString;return e.toString=function(r){return i.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Re.Open:this.state=Re.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees)}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:i}=await this.githubRepository.ensure(),{data:r}=await e({mutation:i.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return r.updatePullRequest.pullRequest}catch(e){throw new Error(A(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){H.debug(`Fetch issue comments of PR #${this.number} - enter`,nr.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),i=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return H.debug(`Fetch issue comments of PR #${this.number} - done`,nr.ID),i.data}async createIssueComment(t){const{mutate:e,schema:i}=await this.githubRepository.ensure(),{data:r}=await e({mutation:i.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Js(r.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:i,schema:r}=await this.githubRepository.ensure(),{data:n}=await i({mutation:r.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Js(n.updateIssueComment.issueComment)}catch(i){throw new Error(A(i))}}async deleteIssueComment(t){try{const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:i.owner,repo:i.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(A(e))}}async addLabels(t){const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.issues.addLabels({owner:i.owner,repo:i.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:i.owner,repo:i.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){H.debug(`Fetch timeline events of issue #${this.number} - enter`,nr.ID);const t=this.githubRepository,{query:e,remote:i,schema:r}=await t.ensure();try{const{data:n}=await e({query:r.IssueTimelineEvents,variables:{owner:i.owner,name:i.repositoryName,number:this.number}}),s=n.repository.pullRequest.timelineItems.nodes;return ta(s,t)}catch(n){return console.log(n),[]}}async addCommentReaction(t,e){const i=rr().reduce((a,o)=>(a[o.label]=o.title,a),{}),{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:s}=await r({mutation:n.AddReaction,variables:{input:{subjectId:t,content:i[e.label]}}});return s}async deleteCommentReaction(t,e){const i=rr().reduce((a,o)=>(a[o.label]=o.title,a),{}),{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:s}=await r({mutation:n.DeleteReaction,variables:{input:{subjectId:t,content:i[e.label]}}});return s}};let Fe=nr;Oe(Fe,"ID","IssueModel");var oc=Object.defineProperty,Qe=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?oc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const Ze=class extends Fe{constructor(t,e,i,r,n){super(e,i,r,!0);Qe(this,"isDraft"),Qe(this,"localBranchName"),Qe(this,"mergeBase"),Qe(this,"suggestedReviewers"),Qe(this,"_hasPendingReview",!1),Qe(this,"_onDidChangePendingReviewState",new l.EventEmitter),Qe(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Qe(this,"isActive"),Qe(this,"_telemetry"),Qe(this,"head"),Qe(this,"base"),this._telemetry=t,this.isActive=!!n,this.update(r)}get isMerged(){return this.state===Re.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=Re.Open:this.state=this.item.merged?Re.Merged:Re.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.head&&(this.head=new us(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.base&&(this.base=new us(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,l.window.showWarningMessage(t,"Open on GitHub").then(i=>{i&&i==="Open on GitHub"&&l.commands.executeCommand("vscode.open",l.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(pt.Approve,t):this.createReview(pt.Approve,t)).then(i=>(this._telemetry.sendTelemetryEvent("pr.approve"),i))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(pt.RequestChanges,t):this.createReview(pt.RequestChanges,t)).then(i=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),i))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),i=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),Ht(i.data,this.githubRepository)}async createReview(t,e){const{octokit:i,remote:r}=await this.githubRepository.ensure(),{data:n}=await i.pulls.createReview({owner:r.owner,repo:r.repositoryName,pull_number:this.number,event:t,body:e});return Zu(n,this.githubRepository)}async submitReview(t,e){const i=await this.getPendingReviewId(),{mutate:r,schema:n}=await this.githubRepository.ensure();if(i){const{data:s}=await r({mutation:n.SubmitReview,variables:{id:i,event:t||pt.Comment,body:e}});return this.hasPendingReview=!1,await this.updateDraftModeContext(),tc(s.submitPullRequestReview.pullRequestReview,this.githubRepository)}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),i=await this.githubRepository.getAuthenticatedUser();try{const{data:r}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:i}});return r.node.reviews.nodes[0].id}catch(r){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:i}=await this.githubRepository.ensure(),{data:r}=await e({mutation:i.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:n,databaseId:s}=r.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),{deletedReviewId:s,deletedReviewComments:n.nodes.map(a=>si(a,!1))}}async startReview(t,e){var i;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:s}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,comments:t,commitOID:e||((i=this.head)==null?void 0:i.sha)}}});if(!s)throw new Error("Failed to start review");return this.hasPendingReview=!0,await this.updateDraftModeContext(),si(s.addPullRequestReview.pullRequestReview.comments.nodes[0],!1)}async createReviewComment(t,e,i,r){if(!this.validatePullRequestModel("Creating comment failed"))return;const n=await this.getPendingReviewId();if(n)return this.addCommentToPendingReview(n,t,{path:e,position:i},r);const s=this.githubRepository,{octokit:a,remote:o}=await s.ensure();try{const u=await a.pulls.createReviewComment({owner:o.owner,repo:o.repositoryName,pull_number:this.number,body:t,commit_id:r||this.head.sha,path:e,position:i});return this.addCommentPermissions(Ys(u.data,s))}catch(u){throw A(u)}}async createReviewCommentReply(t,e){const i=await this.getPendingReviewId();if(i)return this.addCommentToPendingReview(i,t,{inReplyTo:e.graphNodeId});const{octokit:r,remote:n}=await this.githubRepository.ensure();try{const s=await r.pulls.createReplyForReviewComment({owner:n.owner,repo:n.repositoryName,pull_number:this.number,body:t,comment_id:Number(e.id)});return this.addCommentPermissions(Ys(s.data,this.githubRepository))}catch(s){throw A(s)}}async addCommentToPendingReview(t,e,i,r){var n;const{mutate:s,schema:a}=await this.githubRepository.ensure(),{data:o}=await s({mutation:a.AddComment,variables:{input:{pullRequestReviewId:t,body:e,...i,commitOID:r||((n=this.head)==null?void 0:n.sha)}}}),{comment:u}=o.addPullRequestReviewComment;return si(u,!1)}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await l.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}addCommentPermissions(t){const e=this.githubRepository.isCurrentUser(t.user.login),i=t.position!==null;return t.canEdit=e&&i,t.canDelete=e&&i,t}async editReviewComment(t,e){const{mutate:i,schema:r}=await this.githubRepository.ensure(),{data:n}=await i({mutation:r.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});return si(n.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved)}async deleteReviewComment(t){try{const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.pulls.deleteReviewComment({owner:i.owner,repo:i.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(A(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:i}=await t.ensure();return(await i.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(n=>Ft(n,t))}async requestReview(t){const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:i.owner,repo:i.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:i}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:i.owner,repo:i.repositoryName,pull_number:this.number,reviewers:[t]})}async getReviewComments(){const{remote:t,query:e,schema:i}=await this.githubRepository.ensure();try{const{data:r}=await e({query:i.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return r.repository.pullRequest.reviewThreads.nodes.map(s=>s.comments.nodes.map(a=>si(a,s.isResolved),t)).reduce((s,a)=>s.concat(a),[]).sort((s,a)=>s.createdAt>a.createdAt?1:-1)}catch(r){return H.appendLine(`Failed to get pull request review comments: ${r}`),[]}}async getCommits(){try{H.debug(`Fetch commits of PR #${this.number} - enter`,Ze.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),i=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return H.debug(`Fetch commits of PR #${this.number} - done`,Ze.ID),i.data}catch(t){return l.window.showErrorMessage(`Fetching commits failed: ${A(t)}`),[]}}async getCommitChangedFiles(t){try{H.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Ze.ID);const{octokit:e,remote:i}=await this.githubRepository.ensure(),r=await e.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return H.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Ze.ID),r.data.files.filter(n=>!!n.patch)}catch(e){return l.window.showErrorMessage(`Fetching commit file changes failed: ${A(e)}`),[]}}async getFile(t,e){var i;const{octokit:r,remote:n}=await this.githubRepository.ensure(),s=await r.repos.getContent({owner:n.owner,repo:n.repositoryName,path:t,ref:e});if(Array.isArray(s.data))throw new Error(`Unexpected array response when getting file ${t}`);const a=(i=s.data.content)!=null?i:"";return Buffer.from(a,s.data.encoding).toString()}async getTimelineEvents(){H.debug(`Fetch timeline events of PR #${this.number} - enter`,Ze.ID);const{query:t,remote:e,schema:i}=await this.githubRepository.ensure();try{const{data:r}=await t({query:i.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),n=r.repository.pullRequest.timelineItems.nodes,s=ta(n,this.githubRepository);return await this.addReviewTimelineEventComments(s),s}catch(r){return console.log(r),[]}}async addReviewTimelineEventComments(t){const e=t.filter(Fr),i=await this.getReviewComments(),r=e.reduce((u,c)=>(u[c.id]=c,c.comments=[],u),{}),n=i.reduce((u,c)=>(u[c.id]=c,u),{}),s=[];let a=i.length;for(;a-- >0;){const u=i[a];if(!u.inReplyToId){s.unshift(u);continue}const c=n[u.inReplyToId];c.childComments=c.childComments||[],c.childComments=[u,...u.childComments||[],...c.childComments]}s.forEach(u=>{const c=r[u.pullRequestReviewId];c&&(c.comments=c.comments.concat(u).concat(u.childComments||[]))});const o=e.filter(u=>u.state.toLowerCase()==="pending")[0];o&&(o.comments=i.filter(u=>u.isDraft))}async getStatusChecks(){const{query:t,remote:e,schema:i}=await this.githubRepository.ensure(),n=(await t({query:i.GetChecks,variables:{owner:e.owner,name:e.repositoryName,number:this.number}})).data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return n?{state:n.state.toLowerCase(),statuses:n.contexts.nodes.map(s=>{var a,o,u,c;return Fl(s)?{id:s.id,url:(a=s.checkSuite.app)==null?void 0:a.url,avatar_url:(o=s.checkSuite.app)==null?void 0:o.logoUrl,state:((u=s.conclusion)==null?void 0:u.toLowerCase())||"pending",description:s.title,context:s.name,target_url:s.detailsUrl}:{id:s.id,url:s.targetUrl,avatar_url:s.avatarUrl,state:(c=s.state)==null?void 0:c.toLowerCase(),description:s.description,context:s.context,target_url:s.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,i){const r=await e.getFileChangesInfo(),n=e.mergeBase||e.base.sha,a=(await Dr(r,t.repository,n)).find(h=>h.fileName===i.path||h.previousFileName===i.path);if(!a)throw new Error("Can't find matching file");let o,u;if(e.equals(t.activePullRequest)){const h=l.Uri.file(w.resolve(t.repository.rootUri.fsPath,a.fileName));o=a.status===ne.DELETE?St(h,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):h,u=St(h,a.status===ne.RENAME?a.previousFileName:a.fileName,void 0,a.status===ne.ADD?"":n,!1,{base:!0},t.repository.rootUri)}else{const h=e.head.sha,b=a.status===ne.RENAME?a.previousFileName:a.fileName;o=Jt(l.Uri.file(w.resolve(t.repository.rootUri.fsPath,a.fileName)),e,a.baseCommit,h,a.fileName,!1,a.status),u=Jt(l.Uri.file(w.resolve(t.repository.rootUri.fsPath,b)),e,a.baseCommit,h,a.fileName,!0,a.status)}const c=i.path.split("/");l.commands.executeCommand("vscode.diff",u,o,`${c[c.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){H.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Ze.ID);const t=this.githubRepository,{octokit:e,remote:i}=await t.ensure();if(!this.base){const a=await e.pulls.get({owner:i.owner,repo:i.repositoryName,pull_number:this.number});this.update(Ht(a.data,t))}if(this.item.merged){const a=await e.pulls.listFiles({repo:i.repositoryName,owner:i.owner,pull_number:this.number});return this.mergeBase=this.base.sha,a.data}const{data:r}=await e.repos.compareCommits({repo:i.repositoryName,owner:i.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=r.merge_base_commit.sha;const n=300;let s=[];return r.files.length>=n?(H.debug(`More than ${n} files changed, fetching all file changes of PR #${this.number}`,Ze.ID),s=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:i.repositoryName,per_page:100})):s=r.files,H.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${s.length} `,Ze.ID),s}async getMergability(){try{H.debug(`Fetch pull request mergeability ${this.number} - enter`,Ze.ID);const{query:t,remote:e,schema:i}=await this.githubRepository.ensure(),{data:r}=await t({query:i.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return H.debug(`Fetch pull request mergeability ${this.number} - done`,Ze.ID),tn(r.repository.pullRequest.mergeable)}catch(t){return H.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Et.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:i}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),i.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure",{message:A(t)}),t}}};let Ge=Ze;Qe(Ge,"ID","PullRequestModel");var lc=Object.defineProperty,Gt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?lc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);function nn(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<32;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class na{constructor(){Gt(this,"_webview"),Gt(this,"_disposables",[]),Gt(this,"_waitForReady"),Gt(this,"_onIsReady",new l.EventEmitter),Gt(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const i=this._onIsReady.event(()=>{i.dispose(),e()})})}initialize(){var e;(e=this._webview)==null||e.onDidReceiveMessage(async i=>{await this._onDidReceiveMessage(i)},null,this._disposables)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var i;await this._waitForReady,(i=this._webview)==null||i.postMessage({res:e})}async _replyMessage(e,i){var r;const n={seq:e.req,res:i};(r=this._webview)==null||r.postMessage(n)}async _throwError(e,i){var r;const n={seq:e.req,err:i};(r=this._webview)==null||r.postMessage(n)}dispose(){this._disposables.forEach(e=>e.dispose())}}class sa extends na{constructor(){super(...arguments);Gt(this,"viewType"),Gt(this,"_view")}show(){this._view?this._view.show():l.commands.executeCommand(`${this.viewType}.focus`)}}var uc=Object.defineProperty,bt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?uc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const ot=class extends na{constructor(t,e,i,r,n=ot._viewType){super();this._extensionUri=t,bt(this,"_panel"),bt(this,"_disposables",[]),bt(this,"_descriptionNode"),bt(this,"_item"),bt(this,"_folderRepositoryManager"),bt(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=r,this._panel=l.window.createWebviewPanel(n,i,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[l.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(s=>{if(this._folderRepositoryManager&&this._item){const a=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:a})}},null,this._disposables)}static async createOrShow(t,e,i,r=!1){const n=r?l.ViewColumn.Beside:l.window.activeTextEditor?l.window.activeTextEditor.viewColumn:l.ViewColumn.One;if(ot.currentPanel)ot.currentPanel._panel.reveal(n,!0);else{const s=`Issue #${i.number.toString()}`;ot.currentPanel=new ot(t,n||l.ViewColumn.Active,s,e)}await ot.currentPanel.update(e,i)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[i,r,n]=e;if(!i)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._panel.title=`Pull Request #${t.number.toString()}`,H.debug("pr.initialize",ot.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:r,repositoryDefaultBranch:n,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{l.window.showErrorMessage(A(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":l.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function i(n,s){return e=(await n.getLabels(s)).filter(o=>!s.item.labels.some(u=>u.name===o.name)),e.map(o=>({label:o.name}))}const r=await l.window.showQuickPick(await i(this._folderRepositoryManager,this._item),{canPickMany:!0});if(r&&r.length){await this._item.addLabels(r.map(s=>s.label));const n=r.map(s=>e.find(a=>a.name===s.label));this._item.item.labels=this._item.item.labels.concat(...n),this._replyMessage(t,{added:n})}}catch(e){l.window.showErrorMessage(A(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(i=>i.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}webviewDebug(t){H.debug(t.args,ot.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(`Editing description failed: ${A(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(`Editing title failed: ${A(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(A(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){l.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(i=>{this._replyMessage(t,{})}).catch(i=>{this._throwError(t,i),l.window.showErrorMessage(A(i))})})}close(t){l.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){ot.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose();this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=nn(),i=l.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(i).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let sr=ot;bt(sr,"ID","PullRequestOverviewPanel"),bt(sr,"currentPanel"),bt(sr,"_viewType","IssueOverview");var cc=Object.defineProperty,ai=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?cc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const lt=class extends sr{constructor(t,e,i,r){super(t,e,i,r,lt._viewType);ai(this,"_repositoryDefaultBranch"),ai(this,"_existingReviewers"),ai(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),Td(n=>{n&&this._item.update(n),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables)}static async createOrShow(t,e,i,r=!1){const n=r?l.ViewColumn.Beside:l.window.activeTextEditor?l.window.activeTextEditor.viewColumn:l.ViewColumn.One;if(lt.currentPanel)lt.currentPanel._panel.reveal(n,!0);else{const s=`Pull Request #${i.number.toString()}`;lt.currentPanel=new lt(t,n||l.ViewColumn.Active,s,e)}await lt.currentPanel.update(e,i)}set _currentPanel(t){lt.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t)]).then(e=>{const[i,r,n,s,a,o]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=n,this._panel.title=`Pull Request #${t.number.toString()}`;const u=t.equals(this._folderRepositoryManager.activePullRequest),c=o.hasWritePermission,h=o.mergeMethodsAvailability,b=c||this._item.canEdit(),R=l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),q=aa(h,R);this._existingReviewers=ra(a,r,i.author),H.debug("pr.initialize",lt.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:r,isCurrentlyCheckedOut:u,base:i.base&&i.base.label||"UNKNOWN",head:i.head&&i.head.label||"UNKNOWN",repositoryDefaultBranch:n,canEdit:b,hasWritePermission:c,status:s||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:h,defaultMergeMethod:q,isIssue:!1,milestone:i.milestone,assignees:i.assignees}})}).catch(e=>{l.window.showErrorMessage(A(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.copy-prlink":return this.copyPrLink(t)}}getReviewersQuickPickItems(t,e){if(!e)return[];const i=new Set([this._item.author.login,...this._existingReviewers.map(n=>n.reviewer.login)]),r=[];for(const{login:n,name:s,isAuthor:a,isCommenter:o}of e){if(i.has(n))continue;const u=a&&o?"Recently edited and reviewed changes to these files":a?"Recently edited these files":o?"Recently reviewed changes to these files":"Suggested reviewer";r.push({label:n,description:s,detail:u}),i.add(n)}for(const{login:n,name:s}of t)i.has(n)||r.push({label:n,description:s});return r}async addReviewers(t){try{const i=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],r=await l.window.showQuickPick(this.getReviewersQuickPickItems(i,this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(r){await this._item.requestReview(r.map(s=>s.label));const n=r.map(s=>({reviewer:i.find(a=>a.login===s.label),state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(n),this._replyMessage(t,{added:n})}}catch(e){l.window.showErrorMessage(A(e))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(i=>i.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}async applyPatch(t){try{const e=t.args.comment,r=/```diff\n([\s\S]*)\n```/g.exec(e.body),n=w.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),s=new TextEncoder,a=l.Uri.parse(n);await l.workspace.fs.writeFile(a,s.encode(r[1])),await this._folderRepositoryManager.repository.apply(n,!0),await l.workspace.fs.delete(a)}catch(e){H.appendLine(`Applying patch failed: ${e}`),l.window.showErrorMessage(`Applying patch failed: ${A(e)}`)}}async openDiff(t){try{const e=t.args.comment;return Ge.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){H.appendLine(`Open diff view failed: ${A(e)}`,lt.ID)}}checkoutPullRequest(t){l.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:i,method:r}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,i,r).then(n=>{l.commands.executeCommand("pr.refreshList"),n.merged||l.window.showErrorMessage(`Merging PR failed: ${n.message}`),this._replyMessage(t,{state:n.merged?Re.Merged:Re.Open})}).catch(n=>{l.window.showErrorMessage(`Unable to merge pull request. ${A(n)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),i=[];if(this._item.isResolved()){const n=this._item.head.ref;this._repositoryDefaultBranch===this._item.head.ref||i.push({label:`Delete remote branch ${this._item.remote.remoteName}/${n}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const n=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");i.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!n});const s=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&i.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!s})}if(!i.length){l.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const r=await l.window.showQuickPick(i,{canPickMany:!0,ignoreFocusOut:!0});if(r){const n=this._item.equals(this._folderRepositoryManager.activePullRequest),s=r.map(async a=>{switch(a.type){case"upstream":return this._folderRepositoryManager.deleteBranch(this._item);case"local":if(n){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await l.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(e.remote)}});await Promise.all(s),this.refreshPanel(),l.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{l.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{l.window.showErrorMessage(`Unable to set PR ready for review. ${A(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(i=>t.user.login===i.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),l.commands.executeCommand("pr.refreshList")},e=>{l.window.showErrorMessage(`Approving pull request failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{l.window.showErrorMessage(`Requesting changes failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}submitReview(t){this._item.submitReview(pt.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{l.window.showErrorMessage(`Submitting review failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}async copyPrLink(t){await l.env.clipboard.writeText(this._item.html_url),l.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let wt=lt;ai(wt,"ID","PullRequestOverviewPanel"),ai(wt,"currentPanel"),ai(wt,"_viewType","PullRequestOverview");function aa(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(r=>t[r])}var dc=Object.defineProperty,oa=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?dc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class mc extends sa{constructor(e,i,r){super();this._extensionUri=e,this._folderRepositoryManager=i,this._item=r,oa(this,"viewType","github:activePullRequest"),oa(this,"_existingReviewers",[])}resolveWebviewView(e,i,r){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":l.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e)}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests()]).then(i=>{var r,n,s,a;const[o,u,c,h]=i;if(!o)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=o,this._view.title=`${o.title} #${e.number.toString()}`;const b=e.equals(this._folderRepositoryManager.activePullRequest),R=u.hasWritePermission,q=u.mergeMethodsAvailability,L=R||this._item.canEdit(),$=l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),z=aa(q,$),Y=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=ra(h!=null?h:[],c!=null?c:[],o.author),this._postMessage({command:"pr.initialize",pullrequest:{number:o.number,title:o.title,url:o.html_url,createdAt:o.createdAt,body:o.body,bodyHTML:o.bodyHTML,labels:o.item.labels,author:{login:o.author.login,name:o.author.name,avatarUrl:o.userAvatar,url:o.author.url},state:o.state,isCurrentlyCheckedOut:b,base:(n=(r=o.base)==null?void 0:r.label)!=null?n:"UNKNOWN",head:(a=(s=o.head)==null?void 0:s.label)!=null?a:"UNKNOWN",canEdit:L,hasWritePermission:R,mergeable:o.item.mergeable,isDraft:o.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:q,defaultMergeMethod:z,isIssue:!1,isAuthor:Y.login===o.author.login,reviewers:this._existingReviewers}})}).catch(i=>{l.window.showErrorMessage(A(i))})}close(e){l.commands.executeCommand("pr.close",this._item,e.args).then(i=>{i&&this._replyMessage(e,{value:i})})}createComment(e){this._item.createIssueComment(e.args).then(i=>{this._replyMessage(e,{value:i})})}updateReviewers(e){if(e){const i=this._existingReviewers.find(r=>e.user.login===r.reviewer.login);i?i.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(i=>{this.updateReviewers(i),this._replyMessage(e,{review:i,reviewers:this._existingReviewers}),l.commands.executeCommand("pr.refreshList")},i=>{l.window.showErrorMessage(`Approving pull request failed. ${A(i)}`),this._throwError(e,`${A(i)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(i=>{this.updateReviewers(i),this._replyMessage(e,{review:i,reviewers:this._existingReviewers})},i=>{l.window.showErrorMessage(`Requesting changes failed. ${A(i)}`),this._throwError(e,`${A(i)}`)})}submitReview(e){this._item.submitReview(pt.Comment,e.args).then(i=>{this.updateReviewers(i),this._replyMessage(e,{review:i,reviewers:this._existingReviewers})},i=>{l.window.showErrorMessage(`Submitting review failed. ${A(i)}`),this._throwError(e,`${A(i)}`)})}async deleteBranch(e){const i=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const s=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${s}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(i){const s=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${i.branch}`,type:"local",picked:!!s});const a=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");i.remote&&i.createdForPullRequest&&!i.remoteInUse&&r.push({label:`Delete remote ${i.remote}, which is no longer used by any other branch`,type:"remote",picked:!!a})}if(!r.length){l.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const n=await l.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0});if(n){const s=this._item.equals(this._folderRepositoryManager.activePullRequest),a=n.map(async o=>{switch(o.type){case"upstream":return this._folderRepositoryManager.deleteBranch(this._item);case"local":if(s){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await l.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.cleanAll");else return;const u=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(u)}return this._folderRepositoryManager.repository.deleteBranch(i.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(i.remote)}});await Promise.all(a),l.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(i=>{l.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:i})}).catch(i=>{l.window.showErrorMessage(`Unable to set PR ready for review. ${A(i)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:i,description:r,method:n}=e.args;if(await l.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Re.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,i,r,n).then(a=>{l.commands.executeCommand("pr.refreshList"),a.merged||l.window.showErrorMessage(`Merging PR failed: ${a.message}`),this._replyMessage(e,{state:a.merged?Re.Merged:Re.Open})}).catch(a=>{l.window.showErrorMessage(`Unable to merge pull request. ${A(a)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=nn(),i=l.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(i).toString()}"></script>
	</body>
</html>`}}class hc{constructor(e,i){this.reviewManager=e,this.folderRepositoryManager=i}provideTerminalLinks(e,i){var r;const n=e.line.indexOf("https://github.com");if(n===-1)return[];const s=e.line.substring(n),a=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),o=s.match(a);if(o&&o.length===4){const u=o[1],c=o[2],h=o[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(R=>R.remote.owner===u&&R.remote.repositoryName===c)>-1&&((r=this.reviewManager.repository.state.HEAD)==null?void 0:r.name)===h)return[{startIndex:n,length:e.line.length-n,tooltip:"Create a Pull Request",url:s}]}return[]}handleTerminalLink(e){l.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(i=>{i==="Yes"?this.reviewManager.createPullRequest():l.env.openExternal(l.Uri.parse(e.url))})}}var pc=oe(4098),sn=oe.n(pc);const la=void 0;let ua=!1;const ca=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(ua)return l.Uri.parse(e);if(await l.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return ua=!0,l.Uri.parse(e)}const i=t instanceof l.Uri?t:l.Uri.parse(t.host);return i.authority==="github.com"?l.Uri.parse("https://api.github.com"):l.Uri.parse(`${i.scheme}://${i.authority}`)}static getApiPath(t,e){return(t instanceof l.Uri?t:l.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var fc=Object.defineProperty,gc=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?fc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class an{constructor(){gc(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null)return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[i,r]=await an.getOptions(e,"HEAD","/rate_limit");let n=!1;try{return n=(await sn()(i.toString(),r)).headers["x-github-request-id"]!==void 0,n}catch(s){return H.appendLine(`No response from host ${e}: ${s.message}`,"GitHubServer"),n}finally{H.debug(`Host ${e} is associated with GitHub: ${n}`,"GitHubServer"),this._servers.set(e.authority,n)}}static async getOptions(e,i="GET",r,n){const s={"user-agent":"GitHub VSCode Pull Requests"};n&&(s.authorization=`token ${n}`);const a=l.Uri.joinPath(await ca.getApiHost(e),ca.getApiPath(e,r));return[a,{hostname:a.authority,port:443,method:i,headers:s,agent:la}]}}var vc=oe(6355),bc=oe(9593),wc=oe.n(bc),ar=oe(7228);const da=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function ma(t){return t.match(da)}function yc(t){return!!ma(t.body)}async function ha(t,e,i=!0){const r=t[2],n=t[3],s=t[5],a=Number(t[6])-1,o=t[8]?Number(t[8])-1:a;let u;for(const h of e.folderManagers){const b=h.getGitHubRemotes();for(const R of b)if(r.toLowerCase()===R.owner.toLowerCase()&&n.toLowerCase()===R.repositoryName.toLowerCase()){u=h;break}if(u)break}if(!u)return;const c=l.Uri.joinPath(u.repository.rootUri,s);try{await l.workspace.fs.stat(c)}catch(h){return}return{file:c,start:a,end:o}}async function kc(t,e){const i=ma(t.body);if(!i){l.window.showInformationMessage("Issue has no link.");return}const r=await ha(i,e,!1);if(!r)return l.env.openExternal(l.Uri.parse(i[0]));const n=await l.workspace.openTextDocument(r==null?void 0:r.file),s=n.lineAt(r.end<n.lineCount?r.end:n.lineCount-1),a=new l.Range(r.start,0,r.end,s.text.length);return l.window.showTextDocument(r.file,{selection:a})}var _c=Object.defineProperty,pa=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?_c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const uf=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Ci=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,on=/\@([^\s]+)/,Rc=150,Se="githubIssues",oi="queries",Cc="default",fa="workingIssueBranch",ln="issueBranchTitle",ga="useBranchForIssues",Sc="workingIssueFormatScm";function un(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function Ec(t,e,i,r){var n;const s=(n=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:n.get(i);if(s)return s;{let a,o,u;const c=e.getGitHubRemotes();for(const h of c){if(r)a=r.owner?r.owner:h.owner,o=r.name?r.name:h.repositoryName,u=r.issueNumber;else{const b=un(i.match(Ci));b&&(!b.name||!b.owner)&&(a=h.owner,o=h.repositoryName)}if(a&&o&&u!==void 0){let b=await e.resolveIssue(a,o,u,!!r.commentNumber);if(b||(b=await e.resolvePullRequest(a,o,u)),b){let R;return t.resolvedIssues.has(e.repository.rootUri.path)?R=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,R=new(wc())(50)),R.set(i,b),b}}}}}function Pc(t,e){let i;return t.commitContributions.forEach(r=>{e.toLowerCase()===r.repoNameWithOwner.toLowerCase()&&(i=r.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),i}class Nc extends l.CompletionItem{constructor(){super(...arguments);pa(this,"login"),pa(this,"uri")}}function cn(t,e){const i=new l.MarkdownString(void 0,!0);i.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&i.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const r=Pc(e,t.owner+"/"+t.repo);return(e.location||r)&&i.appendMarkdown(`  \r
\r
---`),e.location&&i.appendMarkdown(`  \r
$(location) ${e.location}`),r&&i.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${r}`),e.company&&i.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),i}function Tc(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function Dc(t,e){const i=Tc(t);let r="ffffff";return i&&(.299*i.r+.587*i.g+.114*i.b)/255>.5&&(r="000000"),`<span style="color:#${r};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function va(t,e,i){let r=t.search(e),n=0;for(;r>=0&&r<t.length;){let s;if(r===0||t.charAt(r-1)!=="&"){const o=t.substring(r).match(e);if(o){const u=await i(o);u&&(s=t.slice(0,r)+u,t=s+t.slice(r+o[0].length))}}n=s?s.length:r+1;const a=t.substring(n).search(e);r=a>0?n+a:a}return t}function ba(t,e){return va(t,Ci,async i=>{const r=un(i);if(r){const n=ka(r);return(!r.owner||!r.name)&&(r.owner=e.remote.owner,r.name=e.remote.repositoryName),`[${n}](https://github.com/${r.owner}/${r.name}/issues/${r.issueNumber})`}})}async function Fc(t,e){return va(t,da,async i=>{const r=await ha(i,e);if(r){const n=await l.workspace.openTextDocument(r==null?void 0:r.file),s=n.lineAt(r.end<n.lineCount?r.end:n.lineCount-1),a=[r.file,{selection:{start:{line:r.start,character:0},end:{line:r.end,character:s.text.length}}}],o=l.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(a))}`);return`[${i[0]}](${o} "Open ${r.file.fsPath}")`}})}const or=200;async function dn(t,e,i,r){const n=new l.MarkdownString(void 0,!0);n.isTrusted=!0;const s=new Date(t.createdAt),a=`${t.remote.owner}/${t.remote.repositoryName}`;n.appendMarkdown(`[${a}](https://github.com/${a}) on ${s.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const o=ar.parse(t.title,{renderer:new pn}).trim();n.appendMarkdown(`${Ac(t,e)} **${o}** [#${t.number}](${t.html_url})  
`);let u=ar.parse(t.body,{renderer:new pn});if(n.appendMarkdown(`  
`),u=u.length>or?u.substr(0,or)+"...":u,u=await ba(u,t),u=await Fc(u,i),n.appendMarkdown(u+`  
`),n.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(c=>{n.appendMarkdown(`[${Dc(c.color,c.name)}](https://github.com/${a}/labels/${encodeURIComponent(c.name)}) `)}),t.item.comments&&r){for(const c of t.item.comments)if(c.databaseId===r){n.appendMarkdown(`  \r
\r
---\r
`),n.appendMarkdown(`&nbsp;  
`),n.appendMarkdown(`![Avatar](${c.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${c.author.login}** commented`),n.appendMarkdown(`&nbsp;  
`);let h=ar.parse(c.body.length>or?c.body.substr(0,or)+"...":c.body,{renderer:new pn});h=await ba(h,t),n.appendMarkdown(h)}}return n}function Ic(t){switch(t.state){case Re.Open:return t instanceof Ge?"$(git-pull-request)":"$(issues)";case Re.Closed:return t instanceof Ge?"$(git-pull-request)":"$(issue-closed)";case Re.Merged:return"$(git-merge)"}}function Ac(t,e){if(t instanceof Ge)return Ic(t);switch(t.state){case Re.Open:return'<span style="color:#22863a;">$(issues)</span>';case Re.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const wa="HEAD",Mc=1,xc=2,Oc=3,ya=4,lr=new Map([["upstream",Mc],["ups",xc],["origin",Oc]]);async function qc(t,e){var i,r,n;const s=((i=t.state.HEAD)==null?void 0:i.upstream)&&!lr.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let a;const o=t.state.remotes.map(b=>({name:b.name,remote:b})).filter(b=>(b.name===s&&(a=b.remote),lr.has(b.name))).sort((b,R)=>{var q,L;const $=(q=lr.get(b.name))!=null?q:ya,z=(L=lr.get(R.name))!=null?L:ya;return $-z});s&&o.push({name:s,remote:a});const u=[wa];((r=t.state.HEAD)==null?void 0:r.name)&&t.state.HEAD.name!==wa&&u.unshift((n=t.state.HEAD)==null?void 0:n.name);let c,h;for(let b=0;b<u.length&&!c;b++)for(let R=0;R<o.length&&!c;R++){const q=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${o[R].name}/${u[b]}`,count:1})).filter(L=>L.remote&&L.name);q&&q.length>0&&(c=q[0],h=o[R].remote)}return h}async function mn(t,e){let i,r;if(!e&&l.window.activeTextEditor)i=l.window.activeTextEditor.document,r=l.window.activeTextEditor.selection;else if(e)i=e.document,r=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from."};const n=ia(t,i.uri);if(!n)return{permalink:void 0,error:"The current file isn't part of repository."};const s=await n.log({maxEntries:1,path:i.uri.fsPath});if(s.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file."};const a=new Promise(c=>{var h;if((h=n.state.HEAD)==null?void 0:h.upstream)for(const b of n.state.remotes)n.state.HEAD.upstream.remote===b.name&&c(b);c(void 0)});let o=await Promise.race([qc(n,s[0]),new Promise(c=>{setTimeout(()=>{c(a)},2e3)})]);if((!o||!o.fetchUrl)&&(o=await a,!o||!o.fetchUrl))return{permalink:void 0,error:"There is no suitable remote."};const u=i.uri.path.substring(n.rootUri.path.length);return{permalink:`https://github.com/${new Ut(o.fetchUrl).nameWithOwner}/blob/${s[0].hash}${u}#L${r.start.line+1}-L${r.end.line+1}`,error:void 0}}function Uc(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const Lc=/\$\{(.*?)\}/g;async function ur(t,e,i,r){return t.replace(Lc,(n,s)=>{switch(s){case"user":return r||n;case"issueNumber":return e?`${e.number}`:n;case"issueNumberLabel":return e?`${li(e,i)}`:n;case"issueTitle":return e?e.title:n;case"repository":return i?i.repo:n;case"owner":return i?i.owner:n;case"sanitizedIssueTitle":return e?Uc(e.title):n;default:return n}})}function li(t,e){const i={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(i.owner=t.remote.owner,i.name=t.remote.repositoryName),ka(i)}function ka(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function _a(t,e,i){var r;const n=await((r=e.currentIssue(t.repository.rootUri))==null?void 0:r.getCommitMessage());if(n)return t.repository.commit(n,{all:i})}const Ra="Commit Staged",Ca="Commit All";async function $c(t,e,i){var r,n;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const s=[];switch(t.repository.state.indexChanges&&s.push(Ra),t.repository.state.workingTreeChanges&&s.push(Ca),await l.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...s)){case Ra:{await _a(t,i,!1);break}case Ca:{await _a(t,i,!0);break}default:return!1}}if((r=t.repository.state.HEAD)==null?void 0:r.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let s;return t.repository.state.remotes.length===1?s=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(s=await l.window.showQuickPick(t.repository.state.remotes.map(a=>a.name),{placeHolder:"Remote to push to"})),s?(await t.repository.push(s,(n=t.repository.state.HEAD)==null?void 0:n.name,!0),await e.createPullRequest(void 0),!0):(l.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function hn(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await l.languages.getTokenInformationAtPosition(t,e)).type!==l.StandardTokenType.Comment)}async function Sa(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:hn(t,e)}function Ea(t){const e=new vc.URLSearchParams(t.query).get("rootUri");return e?l.Uri.parse(e):void 0}class pn extends ar.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,i,r,n){return e+" "}hr(){return""}list(e,i,r){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,i){return e+" "+i}tablerow(e){return e}tablecell(e,i){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,i,r){return""}text(e){return e}link(e,i,r){return r+" "}}var Vc=Object.defineProperty,Hc=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Vc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const Pa="github-pr-remote",Na="github-pr-owner-number",Ta=/branch\.(.+)\.github-pr-owner-number/,Gc=/branch\.(.+)\.remote/,fe=class{static async checkoutFromFork(t,e,i){const r=await fe.calculateUniqueBranchNameForPR(t,e);i||(H.appendLine(`Branch ${r} is from a fork. Create a remote first.`,fe.ID),i=await fe.createRemote(t,e.remote,e.head.repositoryCloneUrl));const n=`${e.head.ref}:${r}`;H.debug(`Fetch ${i}/${e.head.ref}:${r} - start`,fe.ID),await t.fetch(i,n,1),H.debug(`Fetch ${i}/${e.head.ref}:${r} - done`,fe.ID),await t.checkout(r),await t.setBranchUpstream(r,`refs/remotes/${i}/${e.head.ref}`),await this.unshallow(t),fe.associateBranchWithPullRequest(t,e,r)}static async fetchAndCheckout(t,e,i){if(!i.validatePullRequestModel("Checkout pull request failed"))return;const r=fe.getHeadRemoteForPullRequest(e,i),n=i.head.repositoryCloneUrl.owner!==i.base.repositoryCloneUrl.owner;if(!r||n)return fe.checkoutFromFork(t,i,r&&r.remoteName);const s=i.head.ref,a=r.remoteName;let o;try{if(o=await t.getBranch(s),H.debug(`Checkout ${s}`,fe.ID),await t.checkout(s),!o.upstream){const u=`refs/remotes/${a}/${s}`;await t.setBranchUpstream(s,u)}o.behind!==void 0&&o.behind>0&&o.ahead===0&&(H.debug("Pull from upstream",fe.ID),await t.pull())}catch(u){H.appendLine(`Branch ${a}/${s} doesn't exist on local disk yet.`,fe.ID);const c=`refs/remotes/${a}/${s}`;H.appendLine(`Fetch tracked branch ${c}`,fe.ID),await t.fetch(a,s,1);const h=await t.getBranch(c);await t.createBranch(s,!0,h.commit),await t.setBranchUpstream(s,c),await this.unshallow(t)}await fe.associateBranchWithPullRequest(t,i,s)}static async unshallow(t){try{await t.pull(!0)}catch(e){H.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const i=fe.buildPullRequestMetadata(e),r=await t.getConfigs(),n=a=>r.filter(({key:o})=>a===o).map(({value:o})=>o)[0],s=r.map(a=>{const o=Ta.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).filter(a=>a.branch&&a.value===i);if(s&&s.length){const a=s[0].branch;await t.checkout(a);const o=n(`branch.${a}.remote`),u=n(`branch.${a}.merge`);await t.fetch(o,u);const c=await t.getBranch(s[0].branch);return c.behind!==void 0&&c.behind>0&&c.ahead===0&&(H.debug("Pull from upstream",fe.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const i=fe.buildPullRequestMetadata(e),r=await t.getConfigs(),n=r.map(s=>{const a=Ta.exec(s.key);return{branch:a&&a.length?a[1]:null,value:s.value}}).find(s=>!!s.branch&&s.value===i);if(n){const s=n.branch;try{const a=`branch.${s}.remote`,o=r.filter(b=>b.key===a).map(b=>b.value);let u;o.length&&(u=o[0]);let c=!1;if(u){const b=`remote.${u}.github-pr-remote`;r.filter(q=>q.key===b&&q.value).length&&(c=!0)}let h;return c&&(h=r.some(b=>!!(Gc.exec(b.key)&&b.key!==`branch.${s}.remote`&&b.value===u))),{branch:s,remote:u,createdForPullRequest:c,remoteInUse:h}}catch(a){return{branch:s}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,i,r,n]=e;return{owner:i,repositoryName:r,prNumber:Number(n)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Na}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const i=this.getMetadataKeyForBranch(e),r=await t.getConfig(i);return fe.parsePullRequestMetadata(r)}catch(i){return}}static async createRemote(t,e,i){H.appendLine(`create remote for ${i}.`,fe.ID);const r=Ri(t);for(const s of r)if(new Ut(s.url).equals(i))return s.remoteName;const n=fe.getUniqueRemoteName(t,i.owner);return i.update({type:e.gitProtocol.type}),await t.addRemote(n,i.toString()),await t.setConfig(`remote.${n}.${Pa}`,"true"),n}static async isRemoteCreatedForPullRequest(t,e){try{H.debug(`Check if remote '${e}' is created for pull request - start`,fe.ID);const i=await t.getConfig(`remote.${e}.${Pa}`);return H.debug(`Check if remote '${e}' is created for pull request - end`,fe.ID),i==="true"}catch(i){return!1}}static async calculateUniqueBranchNameForPR(t,e){const i=`pr/${e.author.login}/${e.number}`;let r=i,n=1;for(;;)try{await t.getBranch(r),r=`${i}-${n++}`}catch(s){break}return r}static getUniqueRemoteName(t,e){let i=e,r=1;const n=Ri(t);for(;n.find(s=>s.remoteName===i);)i=`${e}${r++}`;return i}static getHeadRemoteForPullRequest(t,e){return t.find(i=>i.gitProtocol&&i.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,i){H.appendLine(`associate ${i} with Pull Request #${e.number}`,fe.ID);const r=`branch.${i}.${Na}`;await t.setConfig(r,fe.buildPullRequestMetadata(e))}};let Xe=fe;Hc(Xe,"ID","PullRequestGitHelper");var Bc=Object.defineProperty,ge=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Bc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class jc extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Da extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Qc extends Error{constructor(e,i,r){super();this.branchName=e,this.upstreamRef=i,this.problem=r}get message(){const{upstreamRef:{remote:e,name:i},branchName:r,problem:n}=this;return`The upstream ref ${e}/${i} for branch ${r} ${n}.`}}const yt="githubPullRequests",fn="remotes",Fa="ReposManagerStateContext";var Be;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(Be||(Be={}));const Ia="No Milestone";var Aa;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Aa||(Aa={}));const et=class{constructor(t,e,i,r){this._repository=t,this._telemetry=e,this._git=i,this._credentialStore=r,ge(this,"_subs"),ge(this,"_activePullRequest"),ge(this,"_activeIssue"),ge(this,"_githubRepositories"),ge(this,"_allGitHubRemotes",[]),ge(this,"_mentionableUsers"),ge(this,"_fetchMentionableUsersPromise"),ge(this,"_assignableUsers"),ge(this,"_fetchAssignableUsersPromise"),ge(this,"_gitBlameCache",{}),ge(this,"_githubManager"),ge(this,"_repositoryPageInformation",new Map),ge(this,"_onDidChangeActivePullRequest",new l.EventEmitter),ge(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),ge(this,"_onDidChangeActiveIssue",new l.EventEmitter),ge(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),ge(this,"_onDidLoadRepositories",new l.EventEmitter),ge(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),ge(this,"_onDidChangeRepositories",new l.EventEmitter),ge(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),ge(this,"_onDidChangeAssignableUsers",new l.EventEmitter),ge(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),ge(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new an,this._subs.push(l.workspace.onDidChangeConfiguration(async n=>{n.affectsConfiguration(`${yt}.${fn}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider()}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Ri(this.repository).filter(i=>i.host);return Promise.all(e.map(i=>this._githubManager.isGitHub(i.gitProtocol.normalizeUri()))).then(i=>e.filter((r,n,s)=>i[n])).catch(i=>(H.appendLine(`Resolving GitHub remotes failed: ${i}`),l.window.showErrorMessage(`Resolving GitHub remotes failed: ${A(i)}`),[]))}async getActiveGitHubRemotes(t){const e=l.workspace.getConfiguration(yt).get(fn);return e?(e.forEach(i=>{t.some(r=>r.remoteName===i)||H.appendLine(`No remote with name '${i}' found.`)}),H.debug(`Displaying configured remotes: ${e.join(", ")}`,et.ID),e.map(i=>t.find(r=>r.remoteName===i)).filter(i=>!!i)):(H.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],i=[];l.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(r,n,s)=>{try{if(JSON.parse(r.uri.query).extensionId!==Ot)return;const o=r.getWordRangeAtPosition(n,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!o||o.isEmpty)return;let u=[];const c={};let h={},b,R;const q=l.window.visibleTextEditors;if(q.length){const re=q.find(te=>te.document.uri.scheme==="pr");if(re){const te=be(re.document.uri);b=te.prNumber,R=te.remoteName}else this._activePullRequest&&(b=this._activePullRequest.number,R=this._activePullRequest.remote.remoteName);if(t&&b&&b===t.number)return i}const L=new Promise(async re=>{if(b&&R){if(H.debug("get Timeline Events and parse users",et.ID),t&&t.number===b)return e;const te=this._githubRepositories.find(le=>le.remote.remoteName===R);te&&(t=await te.getPullRequest(b),e=await t.getTimelineEvents()),u=nc(e),re()}re()}),$=new Promise(async re=>{if(q.length)try{H.debug("git blame and parse users",et.ID);const te=w.resolve(q[0].document.uri.fsPath);let le;this._gitBlameCache[te]?le=this._gitBlameCache[te]:(le=await this.repository.blame(te),this._gitBlameCache[te]=le);const ve=le.split(`
`);for(const he of ve){const ke=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(he);if(ke&&ke.length===2){const de=ke[1].trim();c[de]=!0}}}catch(te){H.debug(te,et.ID)}re()}),z=new Promise(async re=>{H.debug("get mentionable users",et.ID),h=await this.getMentionableUsers(),re()});await Promise.all([L,$,z]),i=[];const Y={};H.debug("prepare user suggestions",et.ID),u.forEach(re=>{Y[re.login]||(Y[re.login]=re)});const Z={};for(const re in h)for(const te of h[re])if(!Y[te.login]&&!Z[te.login]){Z[te.login]=!0;let le=2;(c[te.login]||te.name&&c[te.name])&&(le=1),Y[te.login]&&(le=0),i.push({label:te.login,insertText:te.login,filterText:`${te.login}`+(te.name&&te.name!==te.login?`_${te.name.toLowerCase().replace(" ","_")}`:""),sortText:`${le}_${te.login}`,detail:te.name,kind:l.CompletionItemKind.User,login:te.login,uri:this.repository.rootUri})}for(const re in Y)Z[re]||i.push({label:Y[re].login,insertText:`${Y[re].login}`,filterText:`${Y[re].login}`+(Y[re].name&&Y[re].name!==Y[re].login?`_${Y[re].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${Y[re].login}`,detail:Y[re].name,kind:l.CompletionItemKind.User,login:Y[re].login,uri:this.repository.rootUri});return H.debug("done",et.ID),i}catch(a){return[]}},resolveCompletionItem:async(r,n)=>{try{const s=await this.getPullRequestDefaults(),a=await this.resolveUser(s.owner,s.repo,r.label);a&&(r.documentation=cn(s,a))}catch(s){}return r}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await l.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),H.appendLine("Found GitHub remote")):(await l.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),H.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized")return;const e=await this.getActiveRemotes(),i=this._credentialStore.isAuthenticated();l.commands.executeCommand("setContext","github:authenticated",i);const r=[],n=[];return(i?e:[]).forEach(a=>{const o=this.createGitHubRepository(a,this._credentialStore);n.push(o.resolveRemote()),r.push(o)}),Promise.all(n).then(a=>{const o=this._githubRepositories;this._githubRepositories=r,o.forEach(c=>c.dispose());const u=o.length!==this._githubRepositories.length||!o.every(c=>this._githubRepositories.some(h=>h.remote.equals(c.remote)));return this.getMentionableUsers(u),this.getAssignableUsers(u),this._onDidLoadRepositories.fire(i||!e.length?Be.RepositoriesLoaded:Be.NeedsAuthentication),t||this._onDidChangeRepositories.fire(),Promise.resolve()})}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}async getMentionableUsers(t){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;if(!this._fetchMentionableUsersPromise){const e={};return this._fetchMentionableUsersPromise=new Promise(i=>{const r=this._githubRepositories.map(async n=>{const s=await n.getMentionableUsers();e[n.remote.remoteName]=s});Promise.all(r).then(()=>{this._mentionableUsers=e,this._fetchMentionableUsersPromise=void 0,i(e)})})}return this._fetchMentionableUsersPromise}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},i=[];return this._fetchAssignableUsersPromise=new Promise(r=>{const n=this._githubRepositories.map(async s=>{const a=await s.getAssignableUsers();e[s.remote.remoteName]=a.sort(ea),i.push(...a)});Promise.all(n).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,r(e),this._onDidChangeAssignableUsers.fire(i)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const i=this.repository.state.refs.filter(r=>r.type===ht.Head&&r.name!==void 0).map(r=>r.name).map(async r=>{const n=await Xe.getMatchingPullRequestMetadataForBranch(this.repository,r);if(n){const{owner:s,prNumber:a}=n,o=t.find(u=>u.remote.owner.toLocaleLowerCase()===s.toLocaleLowerCase());if(o){const u=await o.getPullRequest(a);if(u)return u.localBranchName=r,u}}return Promise.resolve(null)});return Promise.all(i).then(r=>r.filter(n=>n!==null))}async getLabels(t,e){const i=t?t.githubRepository:this._githubRepositories.find(u=>u.remote.owner===(e==null?void 0:e.owner)&&u.remote.repositoryName===(e==null?void 0:e.repo));if(!i)throw new Error("No matching repository found for getting labels.");const{remote:r,octokit:n}=await i.ensure();let s=!1,a=1,o=[];do{const u=await n.issues.listLabelsForRepo({owner:r.owner,repo:r.repositoryName,page:a});o=o.concat(u.data.map(c=>({name:c.name,color:c.color}))),o=o.sort((c,h)=>c.name.localeCompare(h.name)),s=!!u.headers.link&&u.headers.link.indexOf('rel="next"')>-1,a+=1}while(s);return o}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let i;try{i=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(n){}if(!i)return;await Xe.isRemoteCreatedForPullRequest(this.repository,i)&&((await this.repository.getConfigs()).some(({key:a,value:o})=>/^branch.*\.remote$/.test(a)&&o===i)||await this.repository.removeRemote(i)),this._telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,i=0,r=Te.All,n){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const s=()=>this.totalFetchedPages.get(e)||0,a=b=>this.totalFetchedPages.set(e,b);for(const b of this._githubRepositories){const R=b.remote.url.toString()+e;this._repositoryPageInformation.get(R)||this._repositoryPageInformation.set(R,{pullRequestPage:0,hasMorePages:null})}let o=0;const u={hasMorePages:!1,items:[]},c=b=>{o++,b&&(u.items=u.items.concat(b.items),u.hasMorePages=b.hasMorePages)},h=this._githubRepositories.filter(b=>{const R=this._repositoryPageInformation.get(b.remote.url.toString()+e);return R&&(t.fetchNextPage===!1||R.hasMorePages!==!1)});for(let b=0;b<h.length;b++){const R=h[b],q=R.remote.url.toString()+e,L=this._repositoryPageInformation.get(q),$=async z=>{switch(i){case 0:return r===Te.All?R.getAllPullRequests(z):R.getPullRequestsForCategory(n||"",z);case 1:return R.getIssuesForUserByMilestone(L.pullRequestPage);case 2:return R.getIssuesWithoutMilestone(L.pullRequestPage);case 3:return R.getIssues(L.pullRequestPage,n)}};if(t.fetchNextPage?(L.pullRequestPage++,c(await $(L.pullRequestPage)),a(s()+1)):(L.pullRequestPage===0&&(L.pullRequestPage=1),(await Promise.all(Array.from({length:L.pullRequestPage}).map((Y,Z)=>$(Z+1)))).forEach(Y=>c(Y))),L.hasMorePages=u.hasMorePages,u.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&o>=s()))return s()===0&&a(o),{items:u.items,hasMorePages:L.hasMorePages,hasUnsearchedRepositories:b<h.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},i){const r=t.toString()+(i||"");return this.fetchPagedData(e,r,0,t,i)}async getMilestones(t={fetchNextPage:!1},e=!1,i){const r=await this.fetchPagedData(t,"issuesKey",1,Te.All,i);if(e){const n=await this.fetchPagedData(t,"issuesKey",2,Te.All,i);r.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:Ia},issues:n.items})}return r}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,Te.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(i=>i.getMaxIssue()));let e=0;for(const i of t)i!==void 0&&(e=Math.max(e,i));return e}async getPullRequestTemplates(){const t=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),i=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),r=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...i,...r]}async getPullRequestDefaults(t){if(!t&&!this.repository.state.HEAD)throw new Da(this.repository);const e=await this.getOrigin(t),i=await e.getMetadata(),r=i.fork?i.parent:await(this.findRepo(ci("upstream"))||e).getMetadata();return{owner:r.owner.login,repo:r.name,base:r.default_branch}}async getMetadata(t){const e=this.findRepo(ci(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:i}=await e.getBranch(t);if(i){const{message:r}=await e.getCommit(i);return r}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new jc(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const n=this.findRepo(ci(e.remote));if(!n){const s=(await this.getAllGitHubRemotes()).find(a=>a.remoteName===e.remote);if(s)return new ri(s,this._credentialStore,this._telemetry);throw H.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new Qc(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return n}const[i,...r]=this._githubRepositories;return r.length&&(this.findRepo(ci("origin"))||this.findRepo(Wc))||i}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,i;const r=this._githubRepositories.find(n=>n.remote.owner===t.owner&&n.remote.repositoryName===t.repo);if(!r)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{await r.ensure();const{data:n}=await r.octokit.pulls.create(t),s=Ht(n,r),a=new Ge(this._telemetry,r,r.remote,s,!0),o=t.head.indexOf(":"),u=t.head.slice(o+1);return await Xe.associateBranchWithPullRequest(this._repository,a,u),this._telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),a}catch(n){if(n.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await l.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await l.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await l.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((i=this._repository.state.HEAD)==null?void 0:i.upstream))return await l.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(r.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw H.appendLine(`GitHubRepository> Creating pull requests failed: ${n}`),this._telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString(),message:A(n)}),new Error(A(n))}}async createIssue(t){try{const e=this._githubRepositories.find(s=>s.remote.owner===t.owner&&s.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:i}=await e.octokit.issues.create(t),r=Ju(i,e),n=new Fe(e,e.remote,r);return this._telemetry.sendTelemetryEvent("issue.create.success"),n}catch(e){H.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this._telemetry.sendTelemetryErrorEvent("issue.create.failure",{message:A(e)}),l.window.showWarningMessage(`Creating issue failed: ${A(e)}`)}}async assignIssue(t,e){try{const i=this._githubRepositories.find(n=>n.remote.owner===t.remote.owner&&n.remote.repositoryName===t.remote.repositoryName);if(!i)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await i.ensure();const r={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await i.octokit.issues.addAssignees(r),this._telemetry.sendTelemetryEvent("issue.assign.success")}catch(i){H.appendLine(`GitHubRepository> Assigning issue failed: ${i}`),this._telemetry.sendTelemetryErrorEvent("issue.assign.failure",{message:A(i)}),l.window.showWarningMessage(`Assigning issue failed: ${A(i)}`)}}getCurrentUser(t){return Ft(this._credentialStore.getCurrentUser(),t.githubRepository)}async mergePullRequest(t,e,i,r){const{octokit:n,remote:s}=await t.githubRepository.ensure(),a=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,o=this.repository.state.HEAD&&this.repository.state.HEAD.commit,u=t.head&&t.head.sha,c=this.repository.state.workingTreeChanges.length>0;if(a===u){if(o!==u){const{ahead:h}=this.repository.state.HEAD;if(h&&await l.window.showWarningMessage(`You have ${h} unpushed ${h>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(c&&await l.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await n.pulls.merge({commit_message:i,commit_title:e,merge_method:r||l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:s.owner,repo:s.repositoryName,pull_number:t.number}).then(h=>(this._telemetry.sendTelemetryEvent("pr.merge.success"),h.data)).catch(h=>{throw this._telemetry.sendTelemetryErrorEvent("pr.merge.failure",{message:A(h)}),h})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const s=n.key,a=/^branch\.(.*)\.(.*)$/.exec(s);if(a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{});const u=e.get(o);if(a[2]==="remote"&&(u.remote=n.value),a[2]==="github-pr-owner-number"){const c=Xe.parsePullRequestMetadata(n.value);u.metadata=c}e.set(o,u)}});const i=[];e.forEach((n,s)=>{if(n.metadata){const a=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(a?a.owner===n.metadata.owner&&a.repositoryName===n.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===n.metadata.prNumber:!1)||i.push({label:`${s}`,description:`${n.metadata.repositoryName}/${n.metadata.owner} #${n.metadata.prNumber}`,picked:!1,metadata:n.metadata})}});const r=await Promise.all(i.map(async n=>{const s=n.metadata,a=this._githubRepositories.find(h=>h.remote.owner.toLowerCase()===s.owner.toLowerCase()&&h.remote.repositoryName.toLowerCase()===s.repositoryName.toLowerCase());if(!a)return n;const{remote:o,query:u,schema:c}=await a.ensure();try{const{data:h}=await u({query:c.PullRequestState,variables:{owner:o.owner,name:o.repositoryName,number:s.prNumber}});n.legacy=h.repository.pullRequest.state!=="OPEN"}catch{}return n}));return r.forEach(n=>{n.legacy?n.picked=!0:n.description=`${n.description} is still Open`}),r}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(r=>{const n=r.key;let s=/^branch\.(.*)\.(.*)$/.exec(n);if(s&&s.length===3){const a=s[1];if(s[2]==="remote"){const o=r.value;e.has(o)||e.set(o,{branches:new Set}),e.get(o).branches.add(a)}}if(s=/^remote\.(.*)\.(.*)$/.exec(n),s&&s.length===3){const a=s[1];e.has(a)||e.set(a,{branches:new Set});const o=e.get(a);s[2]==="github-pr-remote"&&(o.createdForPullRequest=r.value==="true"),s[2]==="url"&&(o.url=r.value)}});const i=[];return e.forEach((r,n)=>{if(r.branches.size===0){let s=r.createdForPullRequest?"":"Not created by GitHub Pull Request extension";r.url&&(s=s?s+" "+r.url:r.url),i.push({label:n,description:s,picked:r.createdForPullRequest,remote:n})}}),i}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=l.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const i=await this.getBranchDeletionItems();e.items=i,e.selectedItems=i.filter(n=>n.picked),e.busy=!1;let r=!0;e.onDidAccept(async()=>{if(r){const n=e.selectedItems;if(n.length){e.busy=!0;try{await Promise.all(n.map(async a=>{await this.repository.deleteBranch(a.label,!0)})),e.busy=!1}catch(a){e.hide(),l.window.showErrorMessage(`Deleting branches failed: ${a}`)}}r=!1,e.busy=!0;const s=await this.getRemoteDeletionItems();s?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=s,e.selectedItems=s.filter(a=>a.picked)):e.hide()}else{const n=e.selectedItems;n.length&&(e.busy=!0,await Promise.all(n.map(async s=>{await this.repository.removeRemote(s.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fullfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;H.debug("Fullfill pull request missing info - start",et.ID);const e=t.githubRepository,{octokit:i,remote:r}=await e.ensure();if(!t.base){const{data:n}=await i.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:t.number});t.update(Ht(n,e))}if(!t.mergeBase){const{data:n}=await i.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=n.merge_base_commit.sha}}catch(e){l.window.showErrorMessage(`Fetching Pull Request merge base failed: ${A(e)}`)}H.debug("Fullfill pull request missing info - done",et.ID)}async resolveItem(t,e){let i=this._githubRepositories.find(r=>r.remote.owner.toLowerCase()===t.toLowerCase()&&r.remote.repositoryName.toLowerCase()===e.toLowerCase());return i||(i=this.createGitHubRepositoryFromOwnerName(t,e)),i}async resolvePullRequest(t,e,i){const r=await this.resolveItem(t,e);if(r)return r.getPullRequest(i)}async resolveIssue(t,e,i,r=!1){const n=await this.resolveItem(t,e);if(n)return n.getIssue(i,r)}async resolveUser(t,e,i){H.debug(`Fetch user ${i}`,et.ID);const r=this.createGitHubRepositoryFromOwnerName(t,e),{query:n,schema:s}=await r.ensure();try{const{data:a}=await n({query:s.GetUser,variables:{login:i}});return ic(a)}catch(a){console.log(a)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await Xe.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await Xe.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await Xe.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await Xe.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){try{const e=await this.repository.getBranch(t);e.upstream&&t===e.upstream.name?await this.repository.checkout(t):await l.commands.executeCommand("git.checkout")}catch(e){if(e.gitErrorCode&&e.gitErrorCode===Ct.DirtyWorkTree){l.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}l.window.showErrorMessage(`Exiting failed: ${e}`)}}createGitHubRepository(t,e){return new ri(t,e,this._telemetry)}createGitHubRepositoryFromOwnerName(t,e){const i=`https://github.com/${t}/${e}`;return new ri(new er(e,i,new Ut(i)),this._credentialStore,this._telemetry)}async findUpstreamForItem(t){let e,i;for(const n of this.gitHubRepositories){if(!e&&n.remote.owner===t.remote.owner&&n.remote.repositoryName===t.remote.repositoryName){e=n;continue}const s=await n.getRepositoryForkDetails();if(s&&s.isFork&&s.parent.owner===t.remote.owner&&s.parent.name===t.remote.repositoryName){const a=await n.getViewerPermission();if(a===He.Admin||a===He.Maintain||a===He.Write){i=n.remote;break}}}let r=!1;if(e&&!i){const n=await t.githubRepository.getViewerPermission();(n===He.Read||n===He.Triage||n===He.Unknown)&&(r=!0)}return{needsFork:r,upstream:e,remote:i}}async forkWithProgress(t,e,i,r){t.report({message:`Forking ${i}...`});const n=await e.fork();if(t.report({increment:50}),!n){l.window.showErrorMessage(`Unable to create a fork of ${i}. Check that your GitHub credentials are correct.`);return}const s=r.state.remotes.length>1?"origin":r.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await r.renameRemote(s,"upstream"),await r.addRemote(s,n),await new Promise(a=>{if(this.gitHubRepositories.length===0){const o=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(o.dispose(),a())})}else a()}),t.report({increment:50}),s}async doFork(t,e,i){return l.window.withProgress({location:l.ProgressLocation.Notification,title:"Creating Fork"},async r=>{try{return this.forkWithProgress(r,t,e,i)}catch(n){l.window.showErrorMessage(`Creating fork failed: ${n}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,i="Fork",r="Don't Fork";switch(await l.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},i,r)){case i:return this.doFork(t,e,this.repository);case r:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let ui=et;ge(ui,"ID","FolderRepositoryManager");function cf(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const Wc=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},ci=t=>({remote:{remoteName:e}})=>e===t,Ma=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};var zc=Object.defineProperty,tt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Kc extends sa{constructor(e,i,r,n){super();this._extensionUri=e,this._folderRepositoryManager=i,this._pullRequestDefaults=r,tt(this,"viewType","github:createPullRequest"),tt(this,"_onDone",new l.EventEmitter),tt(this,"onDone",this._onDone.event),tt(this,"_onDidChangeBaseRemote",new l.EventEmitter),tt(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),tt(this,"_onDidChangeBaseBranch",new l.EventEmitter),tt(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),tt(this,"_onDidChangeCompareBranch",new l.EventEmitter),tt(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),tt(this,"_firstLoad",!0),tt(this,"_compareBranch"),this._compareBranch=n}resolveWebviewView(e,i,r){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){this._compareBranch=e,e&&e.name!==this._compareBranch.name&&(this.initializeParams(!0),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}show(e){e&&(this.compareBranch=e),super.show()}async getTitle(){var e;const i=await this._folderRepositoryManager.getOrigin(this._compareBranch);let r=!1;if(this.compareBranch.upstream){const n=this._folderRepositoryManager.findRepo(ci(this.compareBranch.upstream.remote));if(n){const s=`${n.remote.owner}:${(e=this.compareBranch.name)!=null?e:""}`;r=(await i.compareCommits(this._pullRequestDefaults.base,s)).total_commits>1}}return r?this.compareBranch.name:Ma(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await l.workspace.fs.readFile(e[0])).toString()}catch(i){H.appendLine(`Reading pull request template failed: ${i}`);return}}async getDescription(){var e,i;return(i=(e=await this.getPullRequestTemplate())!=null?e:Ma(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body)!=null?i:""}async initializeParams(e=!1){if(!this.compareBranch)throw new Da(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},[r,n,s,a]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),o=r.map(u=>({owner:u.owner,repositoryName:u.repositoryName}));this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:o,defaultRemote:i,defaultBranch:this._pullRequestDefaults.base,branchesForRemote:n,defaultTitle:s,defaultDescription:a,compareBranch:this.compareBranch.name,isDraft:!1}})}async changeBaseRemote(e){const{owner:i,repositoryName:r}=e.args,n=this._folderRepositoryManager.findRepo(o=>i===o.remote.owner&&r===o.remote.repositoryName);if(!n)throw new Error("No matching GitHub repository found.");const s=await n.getDefaultBranch(),a=await this._folderRepositoryManager.listBranches(i,r);return this._onDidChangeBaseRemote.fire({owner:i,repositoryName:r}),this._replyMessage(e,{branches:a,defaultBranch:s})}async create(e){var i,r;try{let n,s;if(this.compareBranch.type===ht.RemoteHead){const c=this.compareBranch.name.indexOf("/");n=this.compareBranch.name.substring(c+1),s=this.compareBranch.name.substring(0,c)}else n=this.compareBranch.name,s=(i=this.compareBranch.upstream)==null?void 0:i.remote;if(!s)if(await l.window.showInformationMessage(`There is no upstream branch for '${n}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch")await l.commands.executeCommand("git.publish"),this._folderRepositoryManager.repository.state.HEAD&&(this.compareBranch=this._folderRepositoryManager.repository.state.HEAD,s=(r=this.compareBranch.upstream)==null?void 0:r.remote);else{this._throwError(e,"No upstream for the compare branch.");return}const a=this._folderRepositoryManager.findRepo(ci(s));if(!a)throw new Error(`Unable to find GitHub repository matching '${s}'.`);const o=`${a.remote.owner}:${n}`,u=await this._folderRepositoryManager.createPullRequest({...e.args,head:o});u?(await this._replyMessage(e,{}),await Xe.associateBranchWithPullRequest(this._folderRepositoryManager.repository,u,n),this._onDone.fire(u)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(n){this._throwError(e,n.message)}}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":l.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0);return;case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeBaseRemote(e);case"pr.changeBaseBranch":this._onDidChangeBaseBranch.fire(e.args);return;case"pr.changeCompareBranch":this._onDidChangeCompareBranch.fire(e.args);return;default:l.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=nn(),i=l.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(i).toString()}"></script>
	</body>
</html>`}}function We(t){return t===void 0||t===0?0:t-1}function xa(t,e,i){let r=-1;if(t.position!==null){const n=Bt(e,t.position);n&&(i&&n.type===_e.Delete&&(r=n.oldLineNumber),!i&&n.type!==_e.Delete&&(r=n.newLineNumber))}return r}function Yc(t){let e;const i=Zt(t);let r=i.next();for(;!r.done;){const n=r.value;e=n.diffLines[n.diffLines.length-1],r=i.next()}return e}function Bt(t,e){for(let i=0;i<t.length;i++){const r=t[i];for(let n=0;n<r.diffLines.length;n++)if(r.diffLines[n].positionInHunk===e)return r.diffLines[n]}}function Oa(t,e,i,r=!1){const n=Zt(e);let s=n.next(),a=i;for(;!s.done;){const u=s.value;if(u.oldLineNumber>i)break;a+=u.oldLength-u.newLength,s=n.next()}const o=-1;for(let u=0;u<t.length;u++){const c=t[u];for(let h=0;h<c.diffLines.length;h++)if(r){if(c.diffLines[h].oldLineNumber===a)return c.diffLines[h].positionInHunk}else if(c.diffLines[h].newLineNumber===a)return c.diffLines[h].positionInHunk}return o}function cr(t,e){const i=Zt(t);let r=i.next(),n=0;for(;!r.done;){const s=r.value;if(!(s.oldLineNumber>e))if(s.oldLineNumber+s.oldLength-1<e)n+=s.newLength-s.oldLength;else return n+=s.newLength-s.oldLength,e+n;r=i.next()}return e+n}function Jc(t,e,i){for(let r=0;r<i.length;r++){const n=i[r];if(n.position===null||n.position===void 0)continue;const s=Bt(t,n.position);if(s){if(s.type===_e.Delete)continue;const a=cr(e,s.newLineNumber);n.absolutePosition=a}}return i}var Zc=Object.defineProperty,gn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Xc{constructor(){gn(this,"fileHasComments",new Map),gn(this,"_onDidChangeFileDecorations",new l.EventEmitter),gn(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,i,r,n){const s=`${i}:${r}`;this.fileHasComments.get(s)!==n&&(this.fileHasComments.set(`${i}:${r}`,n),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,i){const r=es(e);if(r){const n=`${r.prNumber}:${r.fileName}`;if(this.fileHasComments.get(n))return{propagate:!1,tooltip:"Commented",badge:"\u25C6"}}}}const qa=new Xc;var ed=Object.defineProperty,vn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ed(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class $e{constructor(){vn(this,"childrenDisposables"),vn(this,"parent"),vn(this,"label")}getParent(){if(this.parent instanceof $e)return this.parent}async reveal(e,i){return this.parent.reveal(e||this,i)}async getChildren(){return[]}dispose(){this.childrenDisposables&&this.childrenDisposables.forEach(e=>e.dispose())}}var td=Object.defineProperty,Ie=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?td(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);function Ua(t){const e=l.window.activeTextEditor,i={preserveFocus:!0,viewColumn:l.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(i.selection=e.selection),{command:"vscode.open",arguments:[t,i],title:"Open File"}}class It extends $e{constructor(e,i,r,n,s,a,o,u){super();this.parent=e,this.pullRequest=i,this.status=r,this.fileName=n,this.previousFileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"command"),Ie(this,"resourceUri"),Ie(this,"contextValue"),this.contextValue=`filechange:${ne[r]}`,this.label=w.basename(n),this.description=w.relative(".",w.dirname(n)),this.iconPath=l.ThemeIcon.File,this.resourceUri=Xn(l.Uri.parse(this.blobUrl),i.number,n,r),this.command={title:"show remote file",command:"pr.openDiffView",arguments:[this]}}getTreeItem(){return this}}class La extends $e{constructor(e,i,r,n,s,a,o,u,c,h){super();this.parent=e,this.pullRequest=i,this.status=r,this.fileName=n,this.blobUrl=s,this.filePath=a,this.parentFilePath=o,this.diffHunks=u,this.comments=c,this.sha=h,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"resourceUri"),Ie(this,"parentSha"),Ie(this,"contextValue"),Ie(this,"command"),Ie(this,"opts"),this.contextValue=`filechange:${ne[r]}`,this.label=w.basename(n),this.description=w.relative(".",w.dirname(n)),this.iconPath=l.ThemeIcon.File,this.opts={preserveFocus:!0},this.update(this.comments),this.resourceUri=Xn(l.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status)}findFirstActiveComment(){let e;return this.comments.forEach(i=>{if(!e&&i.position){e=i;return}e&&i.position&&i.position<e.position&&(e=i)}),e}update(e){if(this.comments=e,qa.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,e.length>0),e&&e.length){const i=this.findFirstActiveComment();if(i){const r=Bt(this.diffHunks,i.position===void 0?i.originalPosition:i.position);if(r){const n=Math.max(We(r.type===_e.Delete?r.oldLineNumber:r.newLineNumber),0);this.opts.selection=new l.Range(n,0,n,0)}}}else delete this.opts.selection}getCommentPosition(e){const i=Bt(this.diffHunks,e.position===void 0?e.originalPosition:e.position);return i?Math.max(We(i.type===_e.Delete?i.oldLineNumber:i.newLineNumber),0):0}getTreeItem(){return this}openFileCommand(){return Ua(this.filePath)}async openDiffCommand(e){const i=this.parentFilePath,r=this.filePath,n=this.opts;let s=await Er(i,e.repository)||i,a=await Er(r,e.repository)||r;(s.scheme==="data"||a.scheme==="data")&&(this.status===ne.ADD&&(s=Zn),this.status===ne.DELETE&&(a=Zn));const o=r.path.split("/");return{command:"vscode.diff",arguments:[s,a,`${o[o.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}async openDiff(e){var i;const r=await this.openDiffCommand(e);l.commands.executeCommand(r.command,...(i=r.arguments)!=null?i:[])}}class dr extends La{constructor(e,i,r,n,s,a,o,u,c,h,b,R,q){super(e,i,r,n,a,o,u,b,R,q);this.parent=e,this.pullRequest=i,this.status=r,this.fileName=n,this.previousFileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,this.isPartial=c,this.patch=h,this.diffHunks=b,this.comments=R,this.sha=q,this.command={title:"show diff",command:"pr.openDiffView",arguments:[this]}}}class di extends La{constructor(e,i,r,n,s,a,o,u,c,h=[],b){super(e,r,n,s,a,o,u,c,h,b);this.parent=e,this.pullRequestManager=i,this.pullRequest=r,this.status=n,this.fileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,this.diffHunks=c,this.comments=h,this.sha=b,Ie(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===ne.DELETE||this.status===ne.ADD){const c=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===ne.DELETE?[this.parentFilePath,c,`${this.fileName}`,{preserveFocus:!0}]:[c,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:i,commit:r,rootPath:n}=Ke(this.filePath),s=`${r}^`,a={path:e,ref:i,commit:s,base:!0,isOutdated:!0,rootPath:n},o=this.filePath.with({query:JSON.stringify(a)}),u={preserveFocus:!0};if(this.comments&&this.comments.length){const c=this.comments.filter(h=>h.position===void 0).sort((h,b)=>h.originalPosition-b.originalPosition);if(c.length){const h=Bt(this.diffHunks,c[0].originalPosition);if(h){const b=Math.max(We(h.type===_e.Delete?h.oldLineNumber:h.newLineNumber),0);u.selection=new l.Range(b,0,b,0)}}}return{command:"vscode.diff",arguments:[o,this.filePath,`${this.fileName} from ${(r||"").substr(0,8)}`,u],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():l.workspace.getConfiguration().get("git.openDiffOnClick")?this.command=await this.openDiffCommand(this.pullRequestManager):this.command=this.openFileCommand()}}class id extends $e{constructor(e,i,r,n,s,a){super();this.parent=e,this.fileName=i,this.previousFileName=r,this.status=n,this.baseBranch=s,this.headBranch=a,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"resourceUri"),Ie(this,"command"),this.label=i,this.iconPath=l.ThemeIcon.File,this.resourceUri=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({status:n,fileName:i})});let o=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({fileName:i,branch:s})}),u=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({fileName:i,branch:a})});switch(n){case ne.ADD:o=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({fileName:i,branch:s,isEmpty:!0})});break;case ne.RENAME:o=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s,isEmpty:!0})});break;case ne.DELETE:u=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({fileName:i,branch:a,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[o,u,`${i} (Pull Request Preview)`]}}getTreeItem(){return this}}function mi(t){return t.filter(e=>e instanceof di)}var rd=Object.defineProperty,Si=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class nd{constructor(e,i,r,n,s){this.repository=e,this.baseOwner=i,this.baseBranchName=r,this.compareBranch=n,this.folderRepoManager=s,Si(this,"_view"),Si(this,"_onDidChangeTreeData",new l.EventEmitter),Si(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Si(this,"_contentProvider"),Si(this,"_disposables",[]),this._view=l.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._disposables.push(this._view),this._disposables.push(this.repository.state.onDidChange(async a=>{this.compareBranch=await this.repository.getBranch(this.compareBranch.name),this._onDidChangeTreeData.fire()}))}async updateCompareBranch(e){this.compareBranch=await this.repository.getBranch(e),this._onDidChangeTreeData.fire()}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){var e;if((e=this.compareBranch)==null?void 0:e.upstream)l.commands.executeCommand("setContext","github:noUpstream",!1);else return l.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];const i=this.compareBranch.upstream.remote;this._contentProvider||(this._contentProvider=new sd(this.folderRepoManager,i),this._disposables.push(l.workspace.registerTextDocumentContentProvider("github",this._contentProvider)));const r=this.folderRepoManager.gitHubRepositories.find(o=>o.remote.remoteName===i);if(!r)return[];const{octokit:n,remote:s}=await r.ensure(),{data:a}=await n.repos.compareCommits({repo:s.repositoryName,owner:s.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${s.owner}:${this.compareBranch.name}`});return a.files.length?this._view.message=void 0:this._view.message=`The are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranch.name}' branch`,a.files.map(o=>new id(this._view,o.filename,o.previous_filename,Tr(o.status),a.merge_base_commit.sha,this.compareBranch.name))}dispose(){this._disposables.forEach(e=>e.dispose())}}class sd{constructor(e,i){this.folderRepoManager=e,this.upstream=i}async provideTextDocumentContent(e,i){var r;const n=pl(e);if(!n||n.isEmpty)return"";const s=this.folderRepoManager.gitHubRepositories.find(b=>b.remote.remoteName===this.upstream);if(!s)return"";const{octokit:a,remote:o}=await s.ensure(),u=await a.repos.getContent({owner:o.owner,repo:o.repositoryName,path:n.fileName,ref:n.branch}),c=(r=u.data.content)!=null?r:"";return Buffer.from(c,u.data.encoding).toString()}}var ad=Object.defineProperty,Ei=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ad(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class od{constructor(e){this.repository=e,Ei(this,"_disposables",[]),Ei(this,"_createPRViewProvider"),Ei(this,"_treeView"),Ei(this,"_onDidCreate",new l.EventEmitter),Ei(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async i=>{var r,n;l.commands.executeCommand("setContext","github:createPullRequest",!1),(r=this._createPRViewProvider)==null||r.dispose(),this._createPRViewProvider=void 0,(n=this._treeView)==null||n.dispose(),this._treeView=void 0,this._disposables.forEach(s=>s.dispose()),i&&this._onDidCreate.fire(i)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(i=>{var r;(r=this._treeView)==null||r.updateCompareBranch(i)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(i=>{var r;(r=this._treeView)==null||r.updateBaseBranch(i)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(i=>{var r;(r=this._treeView)==null||r.updateBaseOwner(i.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(i=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,i){if(e.gitHubRepositories.some(r=>r.remote.owner===i.owner&&r.remote.repositoryName===i.repo))return i;{const r=await e.getOrigin(),n=await e.getMetadata(r.remote.remoteName);return{owner:n.owner.login,repo:n.name,base:n.default_branch}}}async create(e,i,r){var n;l.commands.executeCommand("setContext","github:createPullRequest",!0);const s=(n=r?await i.repository.getBranch(r):void 0)!=null?n:i.repository.state.HEAD;if(!this._createPRViewProvider){const a=await this.ensureDefaultsAreLocal(i,await i.getPullRequestDefaults(s));this._createPRViewProvider=new Kc(e,i,a,s),this._treeView=new nd(this.repository,a.owner,a.base,s,i),this.registerListeners(!r),this._disposables.push(l.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(s)}}var ld=Object.defineProperty,$a=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ld(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Va{constructor(e,i,r,n,s=`${e}:${i}`){this.owner=e,this.name=i,this.description=r,this.remote=n,this.label=s,$a(this,"detail"),$a(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}var mr,ud=new Uint8Array(16);function cd(){if(!mr&&(mr=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mr(ud)}const dd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function md(t){return typeof t=="string"&&dd.test(t)}const hd=md;for(var Ae=[],bn=0;bn<256;++bn)Ae.push((bn+256).toString(16).substr(1));function pd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ae[t[e+0]]+Ae[t[e+1]]+Ae[t[e+2]]+Ae[t[e+3]]+"-"+Ae[t[e+4]]+Ae[t[e+5]]+"-"+Ae[t[e+6]]+Ae[t[e+7]]+"-"+Ae[t[e+8]]+Ae[t[e+9]]+"-"+Ae[t[e+10]]+Ae[t[e+11]]+Ae[t[e+12]]+Ae[t[e+13]]+Ae[t[e+14]]+Ae[t[e+15]]).toLowerCase();if(!hd(i))throw TypeError("Stringified UUID is invalid");return i}const fd=pd;function gd(t,e,i){t=t||{};var r=t.random||(t.rng||cd)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){i=i||0;for(var n=0;n<16;++n)e[i+n]=r[n];return e}return fd(r)}const Ha=gd;function wn(t,e){const i=[];for(let r=0;r<t.length;r++){const n=t[r];let s,a;if(e){let o;for(let u=0;u<n.diffLines.length;u++){const c=n.diffLines[u];c.type===_e.Delete?(s!==void 0||(s=We(c.oldLineNumber)),o=We(c.oldLineNumber)):s!==void 0&&o!==void 0&&(i.push(new l.Range(s,0,o,0)),s=void 0,o=void 0)}s!==void 0&&o!==void 0&&(i.push(new l.Range(s,0,o,0)),s=void 0,o=void 0)}else n.newLineNumber&&(s=We(n.newLineNumber),a=We(n.newLength),i.push(new l.Range(s,0,s+a,0)))}return i}var vd=Object.defineProperty,bd=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?vd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Ga{constructor(){bd(this,"_data",{})}setDocumentThreads(e,i,r){this._data[e]||(this._data[e]={}),i?this._data[e].original=r:this._data[e].modified=r}getDocuments(){return Object.keys(this._data)}getThreadsForDocument(e,i){const r=this._data[e];return i?r&&r.original:r&&r.modified}getAllThreadsForDocument(e){return this._data[e]&&(this._data[e].original||[]).concat(this._data[e].modified||[])}maybeDisposeThreads(e,i){for(const r in this._data){const n=this._data[r];!e.find(o=>i(o,r,!0))&&n.original&&(n.original.forEach(o=>o.dispose()),this._data[r].original=void 0),!e.find(o=>i(o,r,!1))&&n.modified&&(n.modified.forEach(o=>o.dispose()),this._data[r].modified=void 0),!this._data[r].original&&!this._data[r].modified&&delete this._data[r]}}}var wd=Object.defineProperty,Ba=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?wd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class yd{constructor(){Ba(this,"_onDidChange",new l.EventEmitter),Ba(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,i){const r=be(e);if(r&&r.prNumber){const n=this._prFileChangeContentProviders[r.prNumber];if(n)return await n(e)}return""}registerTextDocumentContentProvider(e,i){return this._prFileChangeContentProviders[e]=i,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const kd=new yd;function ja(){return kd}var _d=Object.defineProperty,yn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?_d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class jt extends $e{constructor(e,i,r,n){super();this.parent=e,this.label=i,this.iconPath=r,this.pullRequestModel=n,yn(this,"command"),yn(this,"contextValue"),yn(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${n.number}`}getTreeItem(){return this}}var Rd=Object.defineProperty,kn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Qt extends $e{constructor(e,i){super();this.parent=e,this.label=i,kn(this,"collapsibleState"),kn(this,"children",[]),kn(this,"pathToChild",new Map),this.collapsibleState=l.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(i=>{i instanceof Qt&&i.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof Qt&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],i=[];this.children.forEach(r=>{r instanceof Qt?(r.sort(),e.push(r)):i.push(r)}),e.sort((r,n)=>r.label<n.label?-1:1),i.sort((r,n)=>r.label<n.label?-1:1),this.children=[...e,...i]}addFile(e){const i=e.fileName.split("/");e.description="",this.addPathRecc(i,e)}addPathRecc(e,i){if(e.length<=0)return;if(e.length===1){this.children.push(i);return}const r=e[0],n=e.slice(1);let s=this.pathToChild.get(r);s||(s=new Qt(this,r),this.pathToChild.set(r,s),this.children.push(s)),s.addPathRecc(n,i)}getTreeItem(){return this}}var Cd=Object.defineProperty,kt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Cd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);function _n(t,e,i,r){if(!i||i instanceof It)return[];const n=W(r,a=>String(a.position)),s=[];for(const a in n){const o=n[a],u=o[0],c=xa(u,i.diffHunks,e);if(c<0)continue;const h=new l.Position(We(c),0),b=new l.Range(h,h);s.push({threadId:u.id.toString(),uri:t,range:b,comments:o})}return s}const Qa=class extends $e{constructor(t,e,i,r){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=i,this._isLocal=r,kt(this,"_fileChanges"),kt(this,"_commentController"),kt(this,"_prCommentController"),kt(this,"_disposables",[]),kt(this,"_inMemPRContentProvider"),kt(this,"_refreshCommentsInProgress"),kt(this,"_command"),kt(this,"_commentHandlerId"),this._commentHandlerId=Ha(),Yn(this._commentHandlerId,this)}get commentController(){return this._commentController}get command(){return this._command}set command(t){this._command=t}async getChildren(){H.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,Qa.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&this.childrenDisposables.forEach(r=>r.dispose());const t=new jt(this,"Description",new l.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=ja().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this.pullRequestModel.equals(this._folderReposManager.activePullRequest)?(await this.pullRequestModel.githubRepository.ensureCommentsController(),this.pullRequestModel.githubRepository.commentsHandler.clearCommentThreadCache(this.pullRequestModel.number)):((!this._prCommentController||!this._commentController)&&await this.resolvePRCommentController(),await this.refreshExistingPREditors(l.window.visibleTextEditors,!0),await this.pullRequestModel.validateDraftMode(),await this.refreshContextKey(l.window.activeTextEditor));const e=[t];if(l.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const r=new Qt(this,"");this._fileChanges.forEach(n=>r.addFile(n)),r.finalize(),r.label===""?e.push(...r.children):e.push(r)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return H.appendLine(t),[]}}async resolvePRCommentController(){return this._prCommentController?this._prCommentController:(await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._prCommentController=this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this),this.registerListeners(),this._prCommentController)}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(i=>{i instanceof dr&&i.comments.forEach(r=>r.isDraft=t)});const e=(await this.resolvePRCommentController()).commentThreadCache;for(const i in e)e[i].forEach(r=>{Zr(r,t)})})),this._disposables.push(l.window.onDidChangeVisibleTextEditors(async t=>{this._refreshCommentsInProgress?this._refreshCommentsInProgress=this._refreshCommentsInProgress.then(async e=>await this.refreshExistingPREditors(t,!1)):this._refreshCommentsInProgress=this.refreshExistingPREditors(t,!1)})),this._disposables.push(l.window.onDidChangeActiveTextEditor(async t=>{await this.refreshContextKey(t)}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),i=this.pullRequestModel.mergeBase;return i?(await Dr(e,this._folderReposManager.repository,i)).map(n=>{const s=this.pullRequestModel.head.sha,a=n.status===ne.RENAME?n.previousFileName:n.fileName;return n instanceof ss?new It(this,this.pullRequestModel,n.status,n.fileName,n.previousFileName,n.blobUrl,Jt(l.Uri.file(w.resolve(this._folderReposManager.repository.rootUri.fsPath,n.fileName)),this.pullRequestModel,n.baseCommit,s,n.fileName,!1,n.status),Jt(l.Uri.file(w.resolve(this._folderReposManager.repository.rootUri.fsPath,a)),this.pullRequestModel,n.baseCommit,s,n.fileName,!0,n.status)):new dr(this,this.pullRequestModel,n.status,n.fileName,n.previousFileName,n.blobUrl,Jt(l.Uri.file(w.resolve(this._folderReposManager.repository.rootUri.fsPath,n.fileName)),this.pullRequestModel,n.baseCommit,s,n.fileName,!1,n.status),Jt(l.Uri.file(w.resolve(this._folderReposManager.repository.rootUri.fsPath,a)),this.pullRequestModel,n.baseCommit,s,n.fileName,!0,n.status),n.isPartial,n.patch,n.diffHunks,t.filter(u=>u.path===n.fileName&&u.position!==null))}):[]}async refreshExistingPREditors(t,e){let i=t.filter(n=>{if(n.document.uri.scheme!=="pr")return!1;const s=be(n.document.uri);return!(!s||s.prNumber!==this.pullRequestModel.number)}).map(n=>({fileName:be(n.document.uri).fileName,document:n.document}));const r=(await this.resolvePRCommentController()).commentThreadCache;for(const n in r){const s=r[n];i.find(o=>o.fileName===n)||(s.forEach(o=>o.dispose()),delete r[n])}if(e||(i=i.filter(n=>r[n.fileName]===void 0)),i=v(i,n=>n.fileName),i.length){const n=await this.getFileChanges();await this.pullRequestModel.validateDraftMode(),i.forEach(s=>{const a=n.find(R=>R.fileName===s.fileName);if(!a||a instanceof It)return;const o=a.parentFilePath,u=a.filePath,c=_n(o,!0,a,a.comments),h=_n(u,!1,a,a.comments);let b=[];if(e){const R=r[s.fileName]||[],q=R.filter($=>$.uri.toString()===o.toString()),L=R.filter($=>$.uri.toString()===u.toString());b=[...q,...L]}this.updateFileChangeCommentThreads(b,[...c,...h],a,r)})}}async refreshContextKey(t){if(!t)return;const e=t.document.uri;if(e.scheme!=="pr")return;const i=be(e);!i||i.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}setContextKey(t){l.commands.executeCommand("setContext","prInDraft",t)}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:i,author:r,isDraft:n,html_url:s}=this.pullRequestModel,{login:a}=r,o=t?"\u2713 ":"",u=t?"Current Branch * ":"",c=i.toString(),h=`${o}#${c}: ${n?"[DRAFT] ":""}${e}`,b=`${u}${e} by @${a}`,R=`by @${a}`;return{label:h,id:`${this.parent instanceof $e?this.parent.label:""}${s}`,tooltip:b,description:R,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new l.ThemeIcon("github")}}hasCommentThread(t){if(t.uri.scheme!=="pr"||this._folderReposManager.activePullRequest&&this._folderReposManager.activePullRequest.number===this.pullRequestModel.number)return!1;const e=be(t.uri);return!(!e||e.prNumber!==this.pullRequestModel.number)}createCommentThreads(t,e,i){const r=e.map(n=>ni(n,this._commentController));i[t]=r}updateCommentThreadComments(t,e){t.comments=e,at(t)}async findMatchingFileNode(t){const e=be(t);if(!e)throw new Error(`${t.toString()} is not valid PR document`);const i=(await this.getFileChanges()).find(r=>r.fileName===e.fileName);if(!i)throw new Error("No matching file found");if(i instanceof It)throw new Error("Comments not supported on remote file changes");return i}calculateCommentPosition(t,e){const i=e.uri,r=be(i),n=!!(r&&r.isBase),s=Oa(t.diffHunks,"",e.range.start.line+1,n);if(s<0)throw new Error("Comment position cannot be negative");return s}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const i=be(t.uri);if(!i||i.prNumber!==this.pullRequestModel.number)return;const r=(await this.getFileChanges()).find(n=>n.fileName===i.fileName);return!r||r instanceof It?void 0:wn(r.diffHunks,i.isBase)}}updateFileChangeCommentThreads(t,e,i,r){if(t.forEach(n=>{(e&&e.filter(a=>a.threadId===n.threadId)).length||n.dispose()}),e&&e.length){const n=[];e.forEach(s=>{const a=t.filter(o=>o.threadId===s.threadId);a.length===0&&n.push(s),a.forEach(o=>{o.comments=o.comments.map(c=>{if(c instanceof xe){const b=s.comments.find(R=>R.body===c.body);return b?new me(b,o):c}const h=s.comments.find(b=>b.id.toString()===c.commentId);if(h)return new me(h,o)}).filter(c=>!!c);const u=s.comments.filter(c=>!o.comments.some(h=>h instanceof me&&h.commentId===c.id.toString()));o.comments=[...o.comments,...u.map(c=>new me(c,o))]})}),n.length&&this.createCommentThreads(i.fileName,n,r)}}async provideDocumentContent(t){const e=be(t);if(!e)return"";const i=(await this.getFileChanges()).find(r=>r.fileName===e.fileName);if(!i)return H.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&i.status===ne.ADD||!e.isBase&&i.status===ne.DELETE)return"";if(i instanceof It||i.isPartial)try{return e.isBase?this.pullRequestModel.getFile(i.previousFileName||i.fileName,e.baseCommit):this.pullRequestModel.getFile(i.fileName,e.headCommit)}catch(r){return H.appendLine(`PR> Fetching file content failed: ${r}`),l.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(n=>{n==="Open on GitHub"&&l.commands.executeCommand("vscode.open",l.Uri.parse(i.blobUrl))}),""}if(i instanceof dr)if(i.status===ne.ADD||i.status===ne.DELETE)if(e.isBase){const n=[];for(let s=0;s<i.diffHunks.length;s++)for(let a=0;a<i.diffHunks[s].diffLines.length;a++){const o=i.diffHunks[s].diffLines[a];o.type===_e.Add||(o.type===_e.Delete?n.push(o.text):o.type===_e.Control||n.push(o.text))}return n.join(`
`)}else{const n=[];for(let s=0;s<i.diffHunks.length;s++)for(let a=0;a<i.diffHunks[s].diffLines.length;a++){const o=i.diffHunks[s].diffLines[a];o.type===_e.Add?n.push(o.text):o.type===_e.Delete||o.type===_e.Control||n.push(o.text)}return n.join(`
`)}else{const n=i.status===ne.RENAME?i.previousFileName:i.fileName,s=l.Uri.joinPath(this._folderReposManager.repository.rootUri,n),a=await this._folderReposManager.repository.show(e.baseCommit,s.fsPath);return e.isBase?a:Cl(a,i.patch)}return""}async createOrReplyComment(t,e,i){const r=t.comments.length,n=i!==void 0?i:this.pullRequestModel.hasPendingReview,s=this.optimisticallyAddComment(t,e,n);try{const a=await this.findMatchingFileNode(t.uri),o=r?await this.reply(t,e):await this.createFirstCommentInThread(t,e,a);a.update(a.comments.concat(o)),this.replaceTemporaryComment(t,o,s)}catch(a){l.window.showErrorMessage(`Creating comment failed: ${a}`),t.comments=t.comments.map(o=>(o instanceof xe&&o.id===s&&(o.mode=l.CommentMode.Editing),o))}}optimisticallyAddComment(t,e,i){const r=this._folderReposManager.getCurrentUser(this.pullRequestModel),n=new xe(t,e,i,r);return this.updateCommentThreadComments(t,[...t.comments,n]),n.id}optimisticallyEditComment(t,e){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),r=new xe(t,e.body instanceof l.MarkdownString?e.body.value:e.body,!!e.label,i,e);return t.comments=t.comments.map(n=>n instanceof me&&n.commentId===e.commentId?r:n),r.id}replaceTemporaryComment(t,e,i){t.comments=t.comments.map(r=>r instanceof xe&&r.id===i?new me(e,t):r)}reply(t,e){const i=t.comments[0];if(i instanceof me)return this.pullRequestModel.createReviewCommentReply(e,i._rawComment);throw new Error("Cannot respond to temporary comment")}async updateCommentThreadCache(t,e,i){const r=(await this.resolvePRCommentController()).commentThreadCache,n=r[e.fileName];n?r[e.fileName]=[...n,t]:r[e.fileName]=[t]}async createFirstCommentInThread(t,e,i){const r=this.calculateCommentPosition(i,t),n=await this.pullRequestModel.createReviewComment(e,i.fileName,r);return this.updateCommentThreadCache(t,i,n),n}async editComment(t,e){const i=await this.findMatchingFileNode(t.uri);if(e instanceof me){const r=this.optimisticallyEditComment(t,e);try{const n=await this.pullRequestModel.editReviewComment(e._rawComment,e.body instanceof l.MarkdownString?e.body.value:e.body),s=i.comments.findIndex(a=>a.id.toString()===e.commentId);s>-1&&i.comments.splice(s,1,n),this.replaceTemporaryComment(t,n,r)}catch(n){l.window.showErrorMessage(`Editing comment failed ${n}`),t.comments=t.comments.map(s=>s instanceof xe&&s.id===r?new me(e._rawComment,t):s)}}else this.createOrReplyComment(t,e.body instanceof l.MarkdownString?e.body.value:e.body)}async deleteComment(t,e){if(e instanceof me){await this.pullRequestModel.deleteReviewComment(e.commentId);const i=await this.findMatchingFileNode(t.uri),r=i.comments.findIndex(n=>n.id.toString()===e.commentId);if(r>-1&&i.comments.splice(r,1),t.comments=t.comments.filter(n=>n instanceof me&&n.commentId!==e.commentId),t.comments.length===0){const n=e._rawComment;if(n.path){const s=(await this.resolvePRCommentController()).commentThreadCache,a=s[n.path].findIndex(o=>o.threadId===t.threadId);s[n.path].splice(a,1)}t.dispose()}i.comments.length===0&&i.update(i.comments)}else t.comments=t.comments.filter(i=>i instanceof xe&&i.id===e.id);await this.pullRequestModel.validateDraftMode()}async startReview(t,e){const i=this.optimisticallyAddComment(t,e,!0);try{const r=await this.findMatchingFileNode(t.uri),n=this.calculateCommentPosition(r,t),s=await this.pullRequestModel.startReview({body:e,path:r.fileName,position:n});await this.updateCommentThreadCache(t,r,s),this.replaceTemporaryComment(t,s,i),r.update(r.comments.concat(s)),this.setContextKey(!0)}catch(r){l.window.showErrorMessage(`Starting a review failed: ${r}`),t.comments=t.comments.map(n=>(n instanceof xe&&n.id===i&&(n.mode=l.CommentMode.Editing),n))}}async finishReview(t,e){try{await this.createOrReplyComment(t,e,!1),await this.pullRequestModel.submitReview(),this.setContextKey(!1)}catch(i){l.window.showErrorMessage(`Failed to submit the review: ${i}`)}}async deleteReview(){const{deletedReviewId:t,deletedReviewComments:e}=await this.pullRequestModel.deleteReview(),i=W(e,r=>r.path||"");for(const r in i){const n=(await this.getFileChanges()).find(s=>s.fileName===r);if(n&&n instanceof dr){n.comments=n.comments.filter(a=>a.pullRequestReviewId!==t),n.update(n.comments);const s=(await this.resolvePRCommentController()).commentThreadCache;if(s[n.fileName]){const a=[];s[n.fileName].forEach(o=>{this.updateCommentThreadComments(o,o.comments.filter(u=>!e.some(c=>c.id.toString()===u.commentId))),o.comments.length?a.push(o):o.dispose()}),a.length?s[n.fileName]=a:delete s[n.fileName]}}}this.setContextKey(!1)}async toggleReaction(t,e){if(t.parent.uri.scheme!=="pr")return;const i=be(t.parent.uri);if(!i)return;const r=await this.findMatchingFileNode(t.parent.uri),n=r.comments.findIndex(o=>o.id.toString()===t.commentId);if(n<0)return;let s;t.reactions&&!t.reactions.find(o=>o.label===e.label&&!!o.authorHasReacted)?s=(await this.pullRequestModel.addCommentReaction(t._rawComment.graphNodeId,e)).addReaction.subject.reactionGroups:s=(await this.pullRequestModel.deleteCommentReaction(t._rawComment.graphNodeId,e)).removeReaction.subject.reactionGroups,r.comments[n].reactions=Xr(s),Ws(t,r.comments[n].reactions);const a=(await this.resolvePRCommentController()).commentThreadCache;a[i.fileName]&&a[i.fileName].forEach(o=>{!o.comments||o.comments.find(u=>u.commentId===t.commentId)&&(o.comments=o.comments)})}dispose(){super.dispose(),Jn(this._commentHandlerId),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._prCommentController&&this._prCommentController.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose())}};let hi=Qa;kt(hi,"ID","PRNode");var Sd=Object.defineProperty,ut=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);function Wa(t,e,i){if(!e)return[];if(!i||!i.length)return[];const r=[],n=W(i,s=>String(s.position));for(const s in n){const a=n[s],o=a[0],u=new l.Position(We(o.absolutePosition||0),0),c=new l.Range(u,u),h=w.join(t.rootUri.path,o.path).replace(/\\/g,"/"),b=t.rootUri.with({path:h});r.push({threadId:o.id.toString(),uri:b,range:c,comments:a})}return r}function Ed(t,e,i){i.forEach(r=>{if(r.comments&&r.comments.length){const n=r.comments[0];if(n instanceof me){const s=Bt(t,n._rawComment.position||n._rawComment.originalPosition);if(s){const a=s.type===_e.Delete?s.oldLineNumber:s.newLineNumber,o=We(cr(e,a)),u=new l.Range(o,0,o,0);r.range=u}}}})}class Pd{constructor(e,i,r,n,s){this._reposManager=e,this._repository=i,this._localFileChanges=r,this._obsoleteFileChanges=n,this._comments=s,ut(this,"_localToDispose",[]),ut(this,"_onDidChangeComments",new l.EventEmitter),ut(this,"onDidChangeComments",this._onDidChangeComments.event),ut(this,"_commentHandlerId"),ut(this,"_commentController"),ut(this,"_workspaceFileChangeCommentThreads",{}),ut(this,"_obsoleteFileChangeCommentThreads",{}),ut(this,"_reviewDocumentCommentThreads",new Ga),ut(this,"_prDocumentCommentThreads",new Ga),ut(this,"_visibleNormalTextEditors",[]),this._commentController=l.comments.createCommentController(`review-${e.activePullRequest.number}`,e.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=Ha(),Yn(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=l.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this.initializeWorkspaceCommentThreads(),await this.initializeDocumentCommentThreadsAndListeners()}async initializeWorkspaceCommentThreads(){await this._reposManager.activePullRequest.validateDraftMode();const e=this._localFileChanges.map(async r=>{const n=await this.getWorkspaceFileThreadDatas(r);this._workspaceFileChangeCommentThreads[r.fileName]=n.map(s=>ni(s,this._commentController))}),i=mi(this._obsoleteFileChanges).map(r=>{const n=this.outdatedCommentsToCommentThreads(r,r.comments).map(s=>ni(s,this._commentController));this._obsoleteFileChangeCommentThreads[r.fileName]=n});return Promise.all([...e,...i])}async getWorkspaceFileThreadDatas(e){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return[];const i=await this._repository.diffWithHEAD(e.fileName),r=Jc(e.diffHunks,i,e.comments).filter(n=>n.absolutePosition!==void 0);return Wa(this._repository,e,r)}async initializeDocumentCommentThreadsAndListeners(){this._localToDispose.push(l.window.onDidChangeVisibleTextEditors(async e=>{if(this.visibleEditorsEqual(this._visibleNormalTextEditors,e))return;this._visibleNormalTextEditors=e.filter(n=>n.document.uri.scheme!=="comment");const i=e.filter(n=>{if(n.document.uri.scheme!=="pr")return!1;const s=be(n.document.uri);return!!s&&s.prNumber===this._reposManager.activePullRequest.number});this._prDocumentCommentThreads.maybeDisposeThreads(i,(n,s,a)=>{const o=be(n.document.uri);return!!o&&o.fileName===s&&o.isBase===a}),this._reviewDocumentCommentThreads.maybeDisposeThreads(e,(n,s,a)=>{const o=this.gitRelativeRootPath(n.document.uri.path);if(n.document.uri.scheme!=="review"&&n.document.uri.scheme===this._repository.rootUri.scheme&&n.document.uri.query){const u=Ke(n.document.uri);if(s===o&&u.base===a)return!0}if(n.document.uri.scheme!=="review")return!1;try{const u=Ke(n.document.uri);if(s===o&&u.base===a)return!0}catch{return!1}return!1}),e.filter(n=>n.document.uri.scheme===this._repository.rootUri.scheme).forEach(n=>{const s=this.gitRelativeRootPath(n.document.uri.path),a=this._workspaceFileChangeCommentThreads[s]||[],o=!n.viewColumn;this._workspaceFileChangeCommentThreads[s]=a.map(u=>(u.collapsibleState=o&&!u.isResolved?l.CommentThreadCollapsibleState.Expanded:l.CommentThreadCollapsibleState.Collapsed,u))});for(const n of this._visibleNormalTextEditors)await this.updateCommentThreadsForEditor(n)})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(i=>{for(const r in i)i[r].forEach(n=>{Zr(n,e),at(n)})}),this._reviewDocumentCommentThreads.getDocuments().forEach(i=>{this._reviewDocumentCommentThreads.getAllThreadsForDocument(i).forEach(r=>{Zr(r,e),at(r)})}),this._prDocumentCommentThreads.getDocuments().forEach(i=>{this._prDocumentCommentThreads.getAllThreadsForDocument(i).forEach(r=>{r.comments=r.comments.map(n=>(n.label=e?"Pending":void 0,n)),at(r)})})}))}async updateCommentThreadsForEditor(e){if(e.document.uri.scheme==="pr"){const n=be(e.document.uri);if(n&&n.prNumber===this._reposManager.activePullRequest.number){if(this._prDocumentCommentThreads.getThreadsForDocument(n.fileName,n.isBase))return;this._prDocumentCommentThreads.setDocumentThreads(n.fileName,n.isBase,[]);const a=this._localFileChanges.filter(o=>o.fileName===n.fileName);if(a.length){await this._reposManager.activePullRequest.validateDraftMode();const u=_n(e.document.uri,n.isBase,a[0],a[0].comments).map(c=>ni(c,this._commentController));this._prDocumentCommentThreads.setDocumentThreads(n.fileName,n.isBase,u)}}return}const i=this.gitRelativeRootPath(e.document.uri.path);if(e.document.uri.scheme===this._repository.rootUri.scheme&&e.viewColumn!==void 0){const n=this._localFileChanges.filter(o=>o.fileName===i);if(n&&!n.length)return;const s=this._workspaceFileChangeCommentThreads[i];if(!this._reposManager.activePullRequest.isResolved())return;const a=await this.getContentDiff(e.document,i);Ed(n[0].diffHunks,a,s);return}let r;try{r=Ke(e.document.uri)}catch(n){}if(r){if(r.isOutdated||this._reviewDocumentCommentThreads.getThreadsForDocument(i,r.base))return;this._reviewDocumentCommentThreads.setDocumentThreads(i,r.base,[]),await this._reposManager.activePullRequest.validateDraftMode();const a=this.provideCommentsForReviewUri(e.document,r).map(o=>ni(o,this._commentController));this._reviewDocumentCommentThreads.setDocumentThreads(i,r.base,a)}}visibleEditorsEqual(e,i){if(e=e.filter(r=>r.document.uri.scheme!=="comment"),i=i.filter(r=>r.document.uri.scheme!=="comment"),e=v(e,r=>r.document.uri.toString()),i=v(i,r=>r.document.uri.toString()),e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!i.find(s=>s.document.uri.toString()===e[r].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;if(e.uri.scheme==="pr"){const r=be(e.uri);return!!(this._reposManager.activePullRequest&&r&&this._reposManager.activePullRequest.number===r.prNumber)}const i=l.workspace.getWorkspaceFolder(e.uri);return i?!!(e.uri.scheme===i.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}addToCommentThreadCache(e){const i=e.uri,r=l.workspace.getWorkspaceFolder(i);switch(i.scheme){case"pr":const n=be(i);if(n){const{fileName:u,isBase:c}=n,h=this._prDocumentCommentThreads.getThreadsForDocument(u,c)||[];this._prDocumentCommentThreads.setDocumentThreads(u,c,h.concat(e))}return;case"review":const s=i.query&&Ke(i);if(s){const u=this.gitRelativeRootPath(i.path),c=this._reviewDocumentCommentThreads.getThreadsForDocument(u,s.base)||[];this._reviewDocumentCommentThreads.setDocumentThreads(u,s.base,c.concat(e));return}break;case r.uri.scheme:const a=this.gitRelativeRootPath(i.path);this._workspaceFileChangeCommentThreads[a].push(e);return;default:return}}async provideCommentingRanges(e,i){if(e.uri.scheme==="pr"){const s=be(e.uri);if(!s||s.prNumber!==this._reposManager.activePullRequest.number)return;const a=this._localFileChanges.find(o=>o.fileName===s.fileName);return!a||a instanceof It?void 0:wn(a.diffHunks,s.isBase)}let r;try{r=Ke(e.uri)}catch(s){}if(r){const s=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(s)return wn(s.diffHunks,r.base)}const n=l.workspace.getWorkspaceFolder(e.uri);if(!!n&&e.uri.scheme===n.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const s=this.gitRelativeRootPath(e.uri.path),a=mi(this._localFileChanges).find(u=>u.fileName===s),o=[];if(a){if(a.status===ne.RENAME)return[];const u=await this.getContentDiff(e,a.fileName),c=a.diffHunks;for(let h=0;h<c.length;h++){const b=c[h],R=cr(u,b.newLineNumber),q=cr(u,b.newLineNumber+b.newLength-1);R>0&&q>0&&o.push(new l.Range(R-1,0,q-1,0))}}return o}}async getNewCommentPosition(e,i){const r=e.uri;let n=!1;if(r.query){if(r.scheme==="review")try{n=Ke(r).base}catch{}if(r.scheme==="pr"){const o=be(r);n=!!o&&o.isBase}}if(!this._reposManager.activePullRequest)throw new Error("No active pull request");if(!this._reposManager.activePullRequest.validatePullRequestModel("Creating new comment failed"))throw new Error("No upstream branch");const s=await this._repository.diffWithHEAD(i.fileName),a=Oa(i.diffHunks,s,e.range.start.line+1,n);if(a<0)throw new Error("Comment position cannot be negative");return a}async createNewThread(e,i,r){var n;const s=await this.getNewCommentPosition(e,i),a=e.uri.scheme!=="pr"?(n=this._repository.state.HEAD)==null?void 0:n.commit:void 0;return await this._reposManager.activePullRequest.createReviewComment(r,i.fileName,s,a)}async getContentDiff(e,i){let r;if(e.isDirty){const n=this._repository.state.HEAD.commit,s=e.getText(),o=(await this._repository.getObjectDetails(n,i)).object,u=await this._repository.hashObject(s);r=await this._repository.diffBlobs(o,u)}else r=await this._repository.diffWithHEAD(i);return r}outdatedCommentsToCommentThreads(e,i){if(!i||!i.length)return[];const r=[],n=W(i,s=>String(s.position));for(const s in n){const a=n[s],o=a[0],u=Bt(o.diffHunks||[],o.originalPosition);u&&(o.absolutePosition=u.newLineNumber);const c=new l.Position(We(o.absolutePosition||0),0),h=new l.Range(c,c);r.push({threadId:o.id.toString(),uri:e.filePath,range:h,comments:a})}return r}provideCommentsForReviewUri(e,i){const r=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(r){const u=r.comments,c=i.base;return u.forEach(h=>{h.absolutePosition=xa(h,r.diffHunks,c)}),Wa(this._repository,r,u.filter(h=>h.absolutePosition!==void 0&&h.absolutePosition>0)).map(h=>(h.uri=e.uri,h))}const n=this.findMatchedFileChangeForReviewDiffView(this._obsoleteFileChanges,e.uri);let s=[];if(n)s=n.comments;else{try{s=this._comments.filter(u=>u.path===i.path&&`${u.originalCommitId}^`===i.commit)}catch(u){}if(!s.length)return[]}const a=W(s,u=>String(u.originalPosition)),o=[];for(const u in a){const h=a[u][0],b=Yc(h.diffHunk);if(!b)continue;const R=i.base?b.oldLineNumber:b.oldLineNumber>0?-1:b.newLineNumber;if(R<0)continue;const q=new l.Range(new l.Position(R,0),new l.Position(R,0));o.push({threadId:String(h.id),uri:e.uri,range:q,comments:s})}return o}findMatchedFileChangeForReviewDiffView(e,i){const r=Ke(i),n=e.filter(s=>{if(s instanceof It||s.fileName!==r.path)return!1;if(s.filePath.scheme!=="review"&&s.sha===r.commit)return!0;try{if(JSON.parse(s.filePath.query).commit===r.commit)return!0}catch(a){}try{if(JSON.parse(s.parentFilePath.query).commit===r.commit)return!0}catch(a){}return!1});if(n&&n.length)return n[0]}findMatchedFileByUri(e){let i,r=!1;if(e.scheme==="review"){const a=Ke(e);r=a.isOutdated,i=a.path}e.scheme==="pr"&&(i=be(e).fileName);const n=r?this._obsoleteFileChanges:this._localFileChanges,s=mi(n).filter(a=>e.scheme==="review"||e.scheme==="pr"?a.fileName===i:a.filePath.path===e.path);if(s&&s.length)return s[0]}gitRelativeRootPath(e){return w.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,i){var r;const n=this.optimisticallyAddComment(e,i,!0);try{const s=this.findMatchedFileByUri(e.uri);if(!s)throw new Error("No matching file found");const a=await this.getNewCommentPosition(e,s),o=e.uri.scheme!=="pr"?(r=this._repository.state.HEAD)==null?void 0:r.commit:void 0,u=await this._reposManager.activePullRequest.startReview({body:i,path:s.fileName,position:a},o);e.threadId=u.id.toString(),this.addToCommentThreadCache(e),this.replaceTemporaryComment(e,u,n),await this.updateWithNewComment(u,s)}catch(s){l.window.showErrorMessage(`Starting review failed: ${s}`),e.comments=e.comments.map(a=>(a instanceof xe&&a.id===n&&(a.mode=l.CommentMode.Editing),a))}}async finishReview(e,i){try{await this.createOrReplyComment(e,i),await this._reposManager.activePullRequest.submitReview()}catch(r){l.window.showErrorMessage(`Failed to submit the review: ${r}`)}}getUpdatedThreads(e,i){const r=[];return e.forEach(n=>{n.comments=n.comments.filter(s=>!i.some(a=>a.id.toString()===s.commentId)),at(n),n.comments.length?r.push(n):n.dispose()}),r}async deleteReview(){const{deletedReviewComments:e}=await this._reposManager.activePullRequest.deleteReview();[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(i=>{for(const r in i){const n=this.getUpdatedThreads(i[r],e);n.length?i[r]=n:delete i[r]}}),this._reviewDocumentCommentThreads.getDocuments().forEach(i=>{const r=this._reviewDocumentCommentThreads.getThreadsForDocument(i,!0);if(r){const s=this.getUpdatedThreads(r,e);this._reviewDocumentCommentThreads.setDocumentThreads(i,!0,s.length?s:void 0)}const n=this._reviewDocumentCommentThreads.getThreadsForDocument(i,!1);if(n){const s=this.getUpdatedThreads(n,e);this._reviewDocumentCommentThreads.setDocumentThreads(i,!1,s.length?s:void 0)}}),this._prDocumentCommentThreads.getDocuments().forEach(i=>{const r=this._prDocumentCommentThreads.getThreadsForDocument(i,!0);if(r){const s=this.getUpdatedThreads(r,e);this._prDocumentCommentThreads.setDocumentThreads(i,!0,s.length?s:void 0)}const n=this._prDocumentCommentThreads.getThreadsForDocument(i,!1);if(n){const s=this.getUpdatedThreads(n,e);this._prDocumentCommentThreads.setDocumentThreads(i,!1,s.length?s:void 0)}})}optimisticallyAddComment(e,i,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),s=new xe(e,i,r,n);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,i){e.comments=i,at(e)}optimisticallyEditComment(e,i){const r=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),n=new xe(e,i.body instanceof l.MarkdownString?i.body.value:i.body,!!i.label,r,i);return e.comments=e.comments.map(s=>s instanceof me&&s.commentId===i.commentId?n:s),n.id}replaceTemporaryComment(e,i,r){e.comments=e.comments.map(n=>n instanceof xe&&n.id===r?new me(i,e):n)}async updateWithNewComment(e,i){i.update(i.comments.concat(e)),this._comments.push(e),await this.update(this._localFileChanges,this._obsoleteFileChanges),this._onDidChangeComments.fire(this._comments)}async createOrReplyComment(e,i,r){const n=e.comments.length,s=r!==void 0?r:this._reposManager.activePullRequest.hasPendingReview,a=this.optimisticallyAddComment(e,i,s);try{const o=this.findMatchedFileByUri(e.uri);if(!o)throw new Error(`Cannot find document ${e.uri.toString()}`);let u;if(!n)u=await this.createNewThread(e,o,i),e.threadId=u.id.toString(),this.addToCommentThreadCache(e);else{const c=e.comments[0];if(c instanceof me)u=await this._reposManager.activePullRequest.createReviewCommentReply(i,c._rawComment);else throw new Error("Cannot reply to temporary comment")}this.replaceTemporaryComment(e,u,a),this.updateWithNewComment(u,o)}catch(o){l.window.showErrorMessage(`Creating comment failed: ${o}`),e.comments=e.comments.map(u=>(u instanceof xe&&u.id===a&&(u.mode=l.CommentMode.Editing),u))}}async editComment(e,i){if(i instanceof me){const r=this.optimisticallyEditComment(e,i);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const n=this.findMatchedFileByUri(e.uri);if(!n)throw new Error("Unable to find matching file");const s=await this._reposManager.activePullRequest.editReviewComment(i._rawComment,i.body instanceof l.MarkdownString?i.body.value:i.body),a=n.comments.findIndex(u=>String(u.id)===i.commentId);a>-1&&n.comments.splice(a,1,s);const o=this._comments.findIndex(u=>String(u.id)===i.commentId);o>-1&&this._comments.splice(o,1,s),this.replaceTemporaryComment(e,s,r),at(e)}catch(n){l.window.showErrorMessage(A(n)),e.comments=e.comments.map(s=>s instanceof xe&&s.id===r?new me(i._rawComment,e):s)}}else this.createOrReplyComment(e,i.body instanceof l.MarkdownString?i.body.value:i.body)}async deleteComment(e,i){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const r=this.findMatchedFileByUri(e.uri);if(!r)throw new Error("Unable to find matching file");if(i instanceof me){await this._reposManager.activePullRequest.deleteReviewComment(i.commentId);const s=r.comments.findIndex(o=>o.id.toString()===i.commentId);s>-1&&(r.comments.splice(s,1),r.update(r.comments));const a=this._comments.findIndex(o=>o.id.toString()===i.commentId);a>-1&&this._comments.splice(a,1),e.comments=e.comments.filter(o=>o instanceof me&&o.commentId!==i.commentId)}else e.comments=e.comments.filter(s=>s instanceof xe&&s.id===i.id);e.comments.length===0?e.dispose():at(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges,this._obsoleteFileChanges)}catch(r){throw new Error(A(r))}}async update(e,i){await this._reposManager.activePullRequest.validateDraftMode();for(const r in this._workspaceFileChangeCommentThreads)this.updateFileChangeCommentThreads(e,r,!1);this._localFileChanges=e;for(const r in this._obsoleteFileChangeCommentThreads)this.updateFileChangeCommentThreads(mi(i),r,!0);this._obsoleteFileChanges=i;for(const r of l.window.visibleTextEditors)await this.updateCommentThreadsForEditor(r)}async updateFileChangeCommentThreads(e,i,r){const n=e.find(s=>s.fileName===i);if(!n)this._workspaceFileChangeCommentThreads[i].forEach(s=>s.dispose()),delete this._workspaceFileChangeCommentThreads[i];else{const s=r?this._obsoleteFileChangeCommentThreads[i]:this._workspaceFileChangeCommentThreads[i],a=r?this.outdatedCommentsToCommentThreads(n,n.comments):await this.getWorkspaceFileThreadDatas(n),o=[];a.forEach(u=>{const c=s.find(h=>h.threadId===u.threadId);c?(o.push(c),c.range=u.range,c.comments=u.comments.map(h=>new me(h,c)),at(c)):o.push(ni(u,this._commentController))}),s.forEach(u=>{a.filter(h=>h.threadId===u.threadId)||u.dispose()}),this._workspaceFileChangeCommentThreads[i]=o}}async toggleReaction(e,i){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const r=this.findMatchedFileByUri(e.parent.uri);if(!r)throw new Error("Unable to find matching file");let n=[];e.reactions&&!e.reactions.find(a=>a.label===i.label&&!!a.authorHasReacted)?n=(await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,i)).addReaction.subject.reactionGroups:n=(await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,i)).removeReaction.subject.reactionGroups;const s=r.comments.findIndex(a=>a.id.toString()===e.commentId);if(s>-1){const a=r.comments[s];a.reactions=Xr(n);const o=Qs(a.reactions),u=r.fileName;[...this._prDocumentCommentThreads.getAllThreadsForDocument(u)||[],...this._reviewDocumentCommentThreads.getAllThreadsForDocument(u)||[],...this._workspaceFileChangeCommentThreads[u]||[],...this._obsoleteFileChangeCommentThreads[u]||[]].filter(h=>!!h.comments.find(b=>b.commentId===e.commentId)).forEach(h=>{h.comments=h.comments.map(b=>(b.commentId===e.commentId&&me.is(b)&&(b.reactions=o),b))})}}catch(r){throw new Error(A(r))}}dispose(){this._commentController&&this._commentController.dispose(),Jn(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Nd=Object.defineProperty,Ne=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Nd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const za=class{constructor(t,e,i,r,n){this._context=t,this._repository=e,this._folderRepoManager=i,this._telemetry=r,this.changesInPrDataProvider=n,Ne(this,"_localToDispose",[]),Ne(this,"_disposables"),Ne(this,"_comments",[]),Ne(this,"_localFileChanges",[]),Ne(this,"_obsoleteFileChanges",[]),Ne(this,"_lastCommitSha"),Ne(this,"_updateMessageShown",!1),Ne(this,"_validateStatusInProgress"),Ne(this,"_reviewCommentController"),Ne(this,"_statusBarItem"),Ne(this,"_prNumber"),Ne(this,"_previousRepositoryState"),Ne(this,"_webviewViewProvider"),Ne(this,"_createPullRequestHelper"),Ne(this,"_switchingToReviewMode"),Ne(this,"justSwitchedToRevieMode",!1),Ne(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Ri(this._repository)},this.registerListeners(),this.updateState(),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,i=this._repository.state.HEAD;if(!e&&!i)return;let r;!e||!i?r=!1:r=e.upstream?i.upstream&&e.upstream.name===i.upstream.name&&e.upstream.remote===i.upstream.remote:!i.upstream;const n=r&&e.ahead===i.ahead&&e.behind===i.behind&&e.commit===i.commit&&e.name===i.name&&e.remote===i.remote&&e.type===i.type,s=Ri(this._repository),a=this._previousRepositoryState.remotes.length===s.length&&this._previousRepositoryState.remotes.every(o=>s.some(u=>o.equals(u)));(!n||!a)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:s},this.updateState(!!e))})),this._disposables.push(l.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(l.window.registerTerminalLinkProvider(new hc(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=l.window.createStatusBarItem(l.StatusBarAlignment.Left)),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const i=this._repository.state.HEAD;if(i){const r=i.upstream?i.upstream.remote:null;r&&(await this._repository.fetch(r,(e=this._repository.state.HEAD)==null?void 0:e.name),(t.head.sha!==this._lastCommitSha||i.behind!==void 0&&i.behind>0)&&!this._updateMessageShown&&(this._updateMessageShown=!0,await l.window.showInformationMessage("There are updates available for this pull request.",{},"Pull")==="Pull"&&(await l.commands.executeCommand("git.pull"),this._updateMessageShown=!1)))}}async updateState(t=!1){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(H.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async e=>await this.validateState(t)),this._validateStatusInProgress):(H.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t),this._validateStatusInProgress)}async validateState(t){if(H.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const e=this._repository.state.HEAD;let i=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!i){H.appendLine(`Review> no matching pull request metadata found for current branch ${e.name}`);const u=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();u&&(Xe.associateBranchWithPullRequest(this._repository,u.model,e.name),i=u)}if(!i){H.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${e.name}`),this.clear(!0);return}const r=e.commit!==this._lastCommitSha&&e.ahead===0&&e.behind===0;if(this._prNumber===i.prNumber&&!r){l.commands.executeCommand("pr.refreshList");return}if(!(e.upstream?e.upstream.remote:null)){H.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}H.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${i.prNumber}`),this.clear(!1),this._prNumber=i.prNumber,this._lastCommitSha=void 0;const{owner:s,repositoryName:a}=i;H.appendLine("Review> Resolving pull request");const o=await this._folderRepoManager.resolvePullRequest(s,a,i.prNumber);if(!o||!o.isResolved()){this._prNumber=void 0,H.appendLine("Review> This PR is no longer valid");return}if(this._folderRepoManager.activePullRequest=o,this._lastCommitSha=o.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(o)),H.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(o),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,o,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,H.appendLine("Review> register comments provider"),await this.registerCommentController(),this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(o):(this._webviewViewProvider=new mc(this._context.extensionUri,this._folderRepoManager,o),this._context.subscriptions.push(l.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(l.commands.registerCommand("pr.refreshActivePullRequest",u=>{var c;(c=this._webviewViewProvider)==null||c.refresh()})),!t&&this._context.workspaceState.get(qt)&&l.env.remoteName==="codespaces"&&this._webviewViewProvider.show()),this.statusBarItem.text=`$(git-branch) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[o]},H.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),l.commands.executeCommand("pr.refreshList"),!t&&this._context.workspaceState.get(qt)&&this.localFileChanges.length>0){let u;for(const c of this.localFileChanges)if(c.status===ne.MODIFY){u=c;break}u=u!=null?u:this.localFileChanges[0],u.openDiff(this._folderRepoManager)}this._validateStatusInProgress=void 0}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const r=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!r||!r.isResolved()){H.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(r),await this.getPullRequestData(r),await this._reviewCommentController.update(this._localFileChanges,this._obsoleteFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,i){const r=[],n=t.mergeBase||t.base.sha,s=t.head.sha;for(let a=0;a<e.length;a++){const o=e[a];let u=[];if(o instanceof ns)u=o.diffHunks;else if(o.status!==ne.RENAME)try{const L=await this._repository.diffBetween(t.base.sha,t.head.sha,o.fileName);u=Nr(L)}catch(L){H.appendLine(`Failed to parse patch for outdated comments: ${L}`)}const c=w.join(this._repository.rootUri.path,o.fileName).replace(/\\/g,"/"),h=this._repository.rootUri.with({path:c}),b=o.status===ne.DELETE?St(h,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):h,R=St(h,o.status===ne.RENAME?o.previousFileName:o.fileName,void 0,o.status===ne.ADD?"":n,!1,{base:!0},this._repository.rootUri),q=new di(this.changesInPrDataProvider.view,this._folderRepoManager,t,o.status,o.fileName,o.blobUrl,b,R,u,i.filter(L=>L.path===o.fileName),s);r.push(q)}return r}async getPullRequestData(t){try{this._comments=await t.getReviewComments();const e=this._comments.filter(o=>o.position),i=this._comments.filter(o=>!o.position),r=await t.getFileChangesInfo(),n=t.mergeBase||t.base.sha,s=await Dr(r,this._repository,n);this._localFileChanges=await this.getLocalChangeNodes(t,s,e);const a=W(i,o=>o.originalCommitId);this._obsoleteFileChanges=[];for(const o in a){const u=a[o],c=W(u,h=>h.path);for(const h in c){let b=[];try{const $=await this._repository.diffBetween(t.base.sha,o,h);b=Nr($)}catch($){H.appendLine(`Failed to parse patch for outdated comments: ${$}`)}const R=c[h],q=l.Uri.file(w.join(`commit~${o.substr(0,8)}`,h)),L=new di(this.changesInPrDataProvider.view,this._folderRepoManager,t,ne.MODIFY,h,void 0,St(q,h,void 0,R[0].originalCommitId,!0,{base:!1},this._repository.rootUri),St(q,h,void 0,R[0].originalCommitId,!0,{base:!0},this._repository.rootUri),b,R,o);this._obsoleteFileChanges.push(L)}}return Promise.resolve(void 0)}catch(e){H.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Pd(this._folderRepoManager,this._repository,this._localFileChanges,this._obsoleteFileChanges,this._comments),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){H.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if(H.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.gitErrorCode&&(e.gitErrorCode===Ct.LocalChangesOverwritten||e.gitErrorCode===Ct.DirtyWorkTree)){l.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}l.window.showErrorMessage(A(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fullfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),H.appendLine(`Review> switch to Pull Request #${t.number} - done`,za.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let i=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!i||t.name===void 0)return;const r=this._folderRepoManager.createGitHubRepository(i,this._folderRepoManager.credentialStore),n=await r.getViewerPermission();if(n===He.Read||n===He.Triage||n===He.Unknown){const a=await this._folderRepoManager.tryOfferToFork(r);if(!a)return;i=this._folderRepoManager.getGitHubRemotes().find(o=>o.remoteName===a)}if(!i)return;const s=i;return new Promise(async a=>{const o=l.window.createInputBox();o.value=t.name,o.ignoreFocusOut=!0,o.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const u=async function(c){try{o.busy=!0,await this._reposManager.getBranch(s,c)?o.validationMessage=`Branch ${c} already exists in ${s.owner}/${s.repositoryName}`:o.validationMessage=void 0}catch(h){o.validationMessage=void 0}o.busy=!1};await u(t.name),o.onDidChangeValue(u.bind(this)),o.onDidAccept(async()=>{o.validationMessage=void 0,o.hide();try{await this._repository.push(s.remoteName,`${t.name}:${o.value}`,!0)}catch(h){throw h.gitErrorCode===Ct.PushRejected&&(l.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),a(void 0)),h.gitErrorCode===Ct.RemoteConnectionError&&(l.window.showWarningMessage(`Could not read from remote repository '${s.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),a(void 0)),h}const c=await this._repository.getBranch(t.name);(!c||!c.upstream)&&a(void 0),a(c)}),o.show()})}async getRemote(t,e,i){if(!t.length){l.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!i)return Va.fromRemote(t[0]);if(t.length===1&&i&&i.owner===t[0].owner&&i.name===t[0].repositoryName)return i;let r=!1;const n=t.map(a=>{const o=Va.fromRemote(a);if(i){const{owner:u,name:c}=i;o.picked=o.owner===u&&o.name===c,o.picked&&(r=!0)}return o});!r&&i&&n.unshift(i);const s=await l.window.showQuickPick(n,{ignoreFocusOut:!0,placeHolder:e});if(!!s)return s}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new od(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState();const i=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Ka(this._context,this._telemetry,e,i,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){l.workspace.getConfiguration(yt).get("focusedMode")&&this._folderRepoManager.activePullRequest?(l.commands.executeCommand("setContext",qt,!0),await this._context.workspaceState.update(qt,!0)):(l.commands.executeCommand("setContext",qt,!1),this._context.workspaceState.update(qt,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],l.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:i}=Ke(t);let r=mi(this._localFileChanges).filter(n=>n.fileName===e).filter(n=>n.sha===i||(n.parentSha?n.parentSha:`${n.sha}^`)===i);if(r.length){const n=r[0],s=i===n.sha?_e.Delete:_e.Add;return n.diffHunks.map(o=>o.diffLines.filter(u=>u.type!==s).map(u=>u.text)).reduce((o,u)=>o.concat(...u),[]).join(`
`)}if(r=mi(this._obsoleteFileChanges).filter(n=>n.fileName===e).filter(n=>n.sha===i||(n.parentSha?n.parentSha:`${n.sha}^`)===i),r.length){const n=r[0],s=i===n.sha?_e.Delete:_e.Add,a=[],o=W(n.comments,u=>String(u.originalPosition));for(const u in o){if(!o[u][0].diffHunks)continue;const c=o[u][0].diffHunks.map(h=>h.diffLines.filter(b=>b.type!==s).map(b=>b.text)).reduce((h,b)=>h.concat(...b),[]);a.push(...c)}return a.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(i=>i._folderRepoManager.gitHubRepositories.some(r=>r.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(i=>i._folderRepoManager===e)}};let Wt=za;Ne(Wt,"ID","Review");const hr=new l.EventEmitter,Td=hr.event;function Pi(t,e){if(e)return e instanceof hi?e.pullRequestModel:e;if(!t.activePullRequest)throw l.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Ka(t,e,i,r,n){const s=Pi(n,i);r==null||r.reveal(r,{select:!0,focus:!0}),wt.createOrShow(t.extensionUri,n,s),e.sendTelemetryEvent("pr.openDescription")}async function Ni(t,e,i){var r;if(t.length===1)return t[0];const n=t.map(s=>({label:e(s),itemValue:s}));return(r=await l.window.showQuickPick(n,i))==null?void 0:r.itemValue}function Dd(t,e,i,r,n,s){t.subscriptions.push(l.commands.registerCommand("auth.signout",async()=>{n.logout()})),t.subscriptions.push(l.commands.registerCommand("pr.openPullRequestOnGitHub",async u=>{if(u)u instanceof hi||u instanceof jt?l.commands.executeCommand("vscode.open",l.Uri.parse(u.pullRequestModel.html_url)):l.commands.executeCommand("vscode.open",l.Uri.parse(u.html_url));else{const c=e.folderManagers.map(h=>h.activePullRequest).filter(h=>!!h);if(c.length>=1){const h=await Ni(c,b=>b.html_url);h&&l.commands.executeCommand("vscode.open",l.Uri.parse(h.html_url))}}r.sendTelemetryEvent("pr.openInGitHub")})),t.subscriptions.push(l.commands.registerCommand("review.suggestDiff",async u=>{try{const c=await Ni(e.folderManagers,Z=>w.basename(Z.repository.rootUri.fsPath));if(!c||!c.activePullRequest)return;const{indexChanges:h,workingTreeChanges:b}=c.repository.state;if(!h.length)if(b.length)if(await l.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.stageAll");else return;else{l.window.showInformationMessage("There are no changes to suggest.");return}const R=await c.repository.diff(!0);let q="";u&&u.inputBox&&u.inputBox.value&&(q=`${u.inputBox.value}
`,u.inputBox.value="");const L=`${q}\`\`\`diff
${R}
\`\`\``;await c.activePullRequest.createIssueComment(L),await l.commands.executeCommand("git.unstageAll");const $=w.join(c.repository.rootUri.path,".git",`${c.activePullRequest.number}.diff`),z=new TextEncoder,Y=l.Uri.parse($);await l.workspace.fs.writeFile(Y,z.encode(R)),await c.repository.apply($,!0),await l.workspace.fs.delete(Y)}catch(c){H.appendLine(`Applying patch failed: ${c}`),l.window.showErrorMessage(`Applying patch failed: ${A(c)}`)}})),t.subscriptions.push(l.commands.registerCommand("pr.openFileOnGitHub",u=>{l.commands.executeCommand("vscode.open",l.Uri.parse(u.blobUrl))})),t.subscriptions.push(l.commands.registerCommand("pr.copyCommitHash",u=>{l.env.clipboard.writeText(u.sha)})),t.subscriptions.push(l.commands.registerCommand("pr.openOriginalFile",async u=>{const c=e.getManagerForIssueModel(u.pullRequest);if(c){const h=await Er(u.parentFilePath,c.repository);l.commands.executeCommand("vscode.open",h||u.parentFilePath)}})),t.subscriptions.push(l.commands.registerCommand("pr.openModifiedFile",u=>{l.commands.executeCommand("vscode.open",u.filePath)})),t.subscriptions.push(l.commands.registerCommand("pr.openDiffView",u=>{const c=e.getManagerForIssueModel(u.pullRequest);!c||u.openDiff(c)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteLocalBranch",async u=>{const c=e.getManagerForIssueModel(u.pullRequestModel);if(!c)return;const h=Pi(c,u),b="delete branch (even if not merged)";let R=null;try{await c.deleteLocalPullRequest(h)}catch(q){if(q.gitErrorCode===Ct.BranchNotFullyMerged){if(await l.window.showErrorMessage(`The branch '${h.localBranchName}' is not fully merged, are you sure you want to delete it? `,b)!==b)return;try{await c.deleteLocalPullRequest(h,!0)}catch($){R=$}}else R=q}R?(r.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure",{message:R}),await l.window.showErrorMessage(`Deleting local pull request branch failed: ${R}`)):(r.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),l.commands.executeCommand("pr.refreshList"))}));function a(u){if(u){const c=l.Uri.file(u).toString();for(const h of i)if(h.repository.rootUri.toString()===c)return h}return Ni(i,c=>w.basename(c.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function o(u){return!!(u==null?void 0:u.rootUri)}t.subscriptions.push(l.commands.registerCommand("pr.create",async u=>{var c,h;o(u)?(c=await a(u.rootUri.fsPath))==null||c.createPullRequest():(h=await a(u==null?void 0:u.repoPath))==null||h.createPullRequest(u==null?void 0:u.compareBranch)})),t.subscriptions.push(l.commands.registerCommand("pr.pick",async u=>{let c;u instanceof hi||u instanceof jt?c=u.pullRequestModel:c=u;const h=u instanceof Ge;return r.sendTelemetryEvent("pr.checkout",{fromDescription:h.toString()}),l.window.withProgress({location:l.ProgressLocation.SourceControl,title:`Switching to Pull Request #${c.number}`},async(b,R)=>{var q;await((q=Wt.getReviewManagerForRepository(i,c.githubRepository))==null?void 0:q.switch(c))})})),t.subscriptions.push(l.commands.registerCommand("pr.exit",async u=>{let c;u instanceof hi||u instanceof jt?c=u.pullRequestModel:c=u;const h=u instanceof Ge;return r.sendTelemetryEvent("pr.exit",{fromDescription:h.toString()}),l.window.withProgress({location:l.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async(b,R)=>{const q=await c.githubRepository.getDefaultBranch(),L=e.getManagerForIssueModel(c);L&&L.checkoutDefaultBranch(q)})})),t.subscriptions.push(l.commands.registerCommand("pr.merge",async u=>{const c=e.getManagerForIssueModel(u==null?void 0:u.pullRequestModel);if(!c)return;const h=Pi(c,u);return l.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async b=>{let R;if(b==="Yes")try{return R=await c.mergePullRequest(h),R}catch(q){return l.window.showErrorMessage(`Unable to merge pull request. ${A(q)}`),R}})})),t.subscriptions.push(l.commands.registerCommand("pr.readyForReview",async u=>{const c=e.getManagerForIssueModel(u==null?void 0:u.pullRequestModel);if(!c)return;const h=Pi(c,u);return l.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async b=>{let R;if(b==="Yes")try{return R=await h.setReadyForReview(),l.commands.executeCommand("pr.refreshList"),R}catch(q){return l.window.showErrorMessage(`Unable to mark pull request as ready to review. ${A(q)}`),R}})})),t.subscriptions.push(l.commands.registerCommand("pr.close",async(u,c)=>{let h;if(u)h=u instanceof Ge?u:u.pullRequestModel;else{const R=e.folderManagers.map(q=>q.activePullRequest).filter(q=>!!q);h=await Ni(R,q=>`${q.number}: ${q.title}`,{placeHolder:"Pull request to close"})}if(!h)return;const b=h;return l.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async R=>{if(R==="Yes")try{let q;c&&(q=await b.createIssueComment(c));const L=await b.close();return l.commands.executeCommand("pr.refreshList"),hr.fire(L),q}catch(q){l.window.showErrorMessage(`Unable to close pull request. ${A(q)}`),hr.fire()}hr.fire()})})),t.subscriptions.push(l.commands.registerCommand("pr.openDescription",async u=>{let c;if(u)c=u instanceof jt?u.pullRequestModel:u;else{const R=e.folderManagers.map(q=>q.activePullRequest).filter(q=>!!q);R.length>=1&&(c=await Ni(R,q=>q.title))}if(!c){H.appendLine("No pull request found.");return}const h=e.getManagerForIssueModel(c);if(!h)return;let b;if(u instanceof jt)b=u;else{const R=Wt.getReviewManagerForFolderManager(i,h);if(!R)return;b=R.changesInPrDataProvider.getDescriptionNode(h)}await Ka(t,r,c,b,h)})),t.subscriptions.push(l.commands.registerCommand("pr.refreshDescription",async()=>{wt.currentPanel&&wt.refresh()})),t.subscriptions.push(l.commands.registerCommand("pr.openDescriptionToTheSide",async u=>{const c=e.getManagerForIssueModel(u.pullRequestModel);if(!c)return;const h=u.pullRequestModel,b=Pi(c,h);u.reveal(u,{select:!0,focus:!0}),wt.createOrShow(t.extensionUri,c,b,!0),r.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(l.commands.registerCommand("pr.signin",async()=>{await e.authenticate()})),t.subscriptions.push(l.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const u of e.folderManagers)await u.deleteLocalBranchesNRemotes()})),t.subscriptions.push(l.commands.registerCommand("pr.signinAndRefreshList",async()=>{await e.authenticate()&&l.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(l.commands.registerCommand("pr.configureRemotes",async()=>l.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} remotes`))),t.subscriptions.push(l.commands.registerCommand("pr.startReview",async u=>{r.sendTelemetryEvent("pr.startReview");const c=Yt(u.thread);c&&c.startReview(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.finishReview",async u=>{r.sendTelemetryEvent("pr.finishReview");const c=Yt(u.thread);c&&await c.finishReview(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteReview",async u=>{if(r.sendTelemetryEvent("pr.deleteReview"),await l.window.showWarningMessage("Delete this review and all associated comments?",{modal:!0},"Delete")){const h=Yt(u.thread);h&&await h.deleteReview(),u.thread.comments.length||u.thread.dispose()}})),t.subscriptions.push(l.commands.registerCommand("pr.createComment",async u=>{r.sendTelemetryEvent("pr.createComment");const c=Yt(u.thread);c&&c.createOrReplyComment(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.editComment",async u=>{r.sendTelemetryEvent("pr.editComment"),u.startEdit()})),t.subscriptions.push(l.commands.registerCommand("pr.cancelEditComment",async u=>{r.sendTelemetryEvent("pr.cancelEditComment"),u.cancelEdit()})),t.subscriptions.push(l.commands.registerCommand("pr.saveComment",async u=>{r.sendTelemetryEvent("pr.saveComment");const c=Yt(u.parent);c&&await c.editComment(u.parent,u)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteComment",async u=>{if(r.sendTelemetryEvent("pr.deleteComment"),await l.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const h=Yt(u.parent);h&&await h.deleteComment(u.parent,u)}})),t.subscriptions.push(l.commands.registerCommand("review.openFile",u=>{var c;const h=u instanceof di?u.openFileCommand():Ua(u);l.commands.executeCommand(h.command,...(c=h.arguments)!=null?c:[])})),t.subscriptions.push(l.commands.registerCommand("pr.refreshChanges",u=>{i.forEach(c=>{c.updateComments(),wt.refresh(),c.changesInPrDataProvider.refresh()})})),t.subscriptions.push(l.commands.registerCommand("pr.setFileListLayoutAsTree",u=>{l.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(l.commands.registerCommand("pr.setFileListLayoutAsFlat",u=>{l.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(l.commands.registerCommand("pr.refreshPullRequest",u=>{var c;const h=e.getManagerForIssueModel(u.pullRequestModel);h&&u.pullRequestModel.equals(h==null?void 0:h.activePullRequest)&&((c=Wt.getReviewManagerForFolderManager(i,h))==null||c.updateComments()),wt.refresh(),s.refresh(u)}))}let Ti;const Fd={};function Id(t){Ti=t.globalState}const Ya=(t,e)=>{if(!Ti)throw new Error("Persistent store not initialized.");return Ti.get(t+":"+e,Fd)},Ja=(t,e,i)=>{if(!Ti)throw new Error("Persistent store not initialized.");return Ti.update(t+":"+e,i)};var df=oe(9035),Ad=Object.defineProperty,Za=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Ad(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);async function Md(t){const e=await vscode.workspace.fs.readFile(vscode.Uri.file(path.join(t,"product.json")));return JSON.parse(e.toString())}async function xd(t){const e=await vscode.workspace.fs.readFile(vscode.Uri.file(path.join(t,"package.json")));return JSON.parse(e.toString())}class Od{constructor(e){this.baseReporter=e,Za(this,"sharedProperties",{})}sendTelemetryEvent(e,i,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...i},r)}sendTelemetryErrorEvent(e,i,r){this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...i})}setSharedProperty(e,i){this.sharedProperties[e]=i}postEvent(e,i){const r={};for(const[n,s]of i)r[n]=s;this.sendTelemetryEvent(e,r)}dispose(){return this.baseReporter.dispose()}}function qd(t){switch(t.quality){case"stable":return TargetPopulation.Public;case"insider":return TargetPopulation.Insiders;case"exploration":return TargetPopulation.Internal;case void 0:return TargetPopulation.Team;default:return TargetPopulation.Public}}class Ud{constructor(){Za(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,i){}getTreatmentVariableAsync(e,i){return Promise.resolve(void 0)}}async function mf(t,e){const i=await xd(t.extensionPath),r=await Md(vscode.env.appRoot),n=qd(r);return i.name==="vscode-pull-request-github"?getExperimentationService(`${i.publisher}.${i.name}`,i.version,n,e,t.globalState):new Ud}function pr(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Ld=oe(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Xa(t){return Object.prototype.toString.call(t)==="[object Object]"}function eo(t){var e,i;return Xa(t)===!1?!1:(e=t.constructor,e===void 0?!0:(i=e.prototype,!(Xa(i)===!1||i.hasOwnProperty("isPrototypeOf")===!1)))}function $d(t){return t?Object.keys(t).reduce((e,i)=>(e[i.toLowerCase()]=t[i],e),{}):{}}function to(t,e){const i=Object.assign({},t);return Object.keys(e).forEach(r=>{eo(e[r])?r in t?i[r]=to(t[r],e[r]):Object.assign(i,{[r]:e[r]}):Object.assign(i,{[r]:e[r]})}),i}function io(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function Rn(t,e,i){if(typeof e=="string"){let[n,s]=e.split(" ");i=Object.assign(s?{method:n,url:s}:{url:n},i)}else i=Object.assign({},e);i.headers=$d(i.headers),io(i),io(i.headers);const r=to(t||{},i);return t&&t.mediaType.previews.length&&(r.mediaType.previews=t.mediaType.previews.filter(n=>!r.mediaType.previews.includes(n)).concat(r.mediaType.previews)),r.mediaType.previews=r.mediaType.previews.map(n=>n.replace(/-preview/,"")),r}function Vd(t,e){const i=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+i+r.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}const Hd=/\{[^}]+\}/g;function Gd(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Bd(t){const e=t.match(Hd);return e?e.map(Gd).reduce((i,r)=>i.concat(r),[]):[]}function ro(t,e){return Object.keys(t).filter(i=>!e.includes(i)).reduce((i,r)=>(i[r]=t[r],i),{})}function no(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function pi(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Di(t,e,i){return e=t==="+"||t==="#"?no(e):pi(e),i?pi(i)+"="+e:e}function fi(t){return t!=null}function Cn(t){return t===";"||t==="&"||t==="?"}function jd(t,e,i,r){var n=t[i],s=[];if(fi(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),r&&r!=="*"&&(n=n.substring(0,parseInt(r,10))),s.push(Di(e,n,Cn(e)?i:""));else if(r==="*")Array.isArray(n)?n.filter(fi).forEach(function(a){s.push(Di(e,a,Cn(e)?i:""))}):Object.keys(n).forEach(function(a){fi(n[a])&&s.push(Di(e,n[a],a))});else{const a=[];Array.isArray(n)?n.filter(fi).forEach(function(o){a.push(Di(e,o))}):Object.keys(n).forEach(function(o){fi(n[o])&&(a.push(pi(o)),a.push(Di(e,n[o].toString())))}),Cn(e)?s.push(pi(i)+"="+a.join(",")):a.length!==0&&s.push(a.join(","))}else e===";"?fi(n)&&s.push(pi(i)):n===""&&(e==="&"||e==="?")?s.push(pi(i)+"="):n===""&&s.push("");return s}function Qd(t){return{expand:Wd.bind(null,t)}}function Wd(t,e){var i=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,n,s){if(n){let o="";const u=[];if(i.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(c){var h=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);u.push(jd(e,o,h[1],h[2]||h[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(u.length!==0?o:"")+u.join(a)}else return u.join(",")}else return no(s)})}function so(t){let e=t.method.toUpperCase(),i=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),n,s=ro(t,["method","baseUrl","url","headers","request","mediaType"]);const a=Bd(i);i=Qd(i).expand(s),/^http/.test(i)||(i=t.baseUrl+i);const o=Object.keys(t).filter(h=>a.includes(h)).concat("baseUrl"),u=ro(s,o);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(h=>h.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const h=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=h.concat(t.mediaType.previews).map(b=>{const R=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${b}-preview${R}`}).join(",")}return["GET","HEAD"].includes(e)?i=Vd(i,u):"data"in u?n=u.data:Object.keys(u).length?n=u:r["content-length"]=0,!r["content-type"]&&typeof n!="undefined"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n=="undefined"&&(n=""),Object.assign({method:e,url:i,headers:r},typeof n!="undefined"?{body:n}:null,t.request?{request:t.request}:null)}function zd(t,e,i){return so(Rn(t,e,i))}function ao(t,e){const i=Rn(t,e),r=zd.bind(null,i);return Object.assign(r,{DEFAULTS:i,defaults:ao.bind(null,i),merge:Rn.bind(null,i),parse:so})}const Kd=`octokit-endpoint.js/6.0.11 ${pr()}`,Yd=ao(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Kd},mediaType:{format:"",previews:[]}});class Jd extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Zd=oe(778),Xd=oe.n(Zd);const em=Xd()(t=>console.warn(t));class Fi extends Error{constructor(e,i,r){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=i,Object.defineProperty(this,"code",{get(){return em(new Jd("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),i}}),this.headers=r.headers||{};const n=Object.assign({},r.request);r.request.headers.authorization&&(n.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}}const tm="5.4.14";function im(t){return t.arrayBuffer()}function oo(t){(eo(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},i,r;return(t.request&&t.request.fetch||sn())(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(s=>{r=s.url,i=s.status;for(const o of s.headers)e[o[0]]=o[1];if(i===204||i===205)return;if(t.method==="HEAD"){if(i<400)return;throw new Fi(s.statusText,i,{headers:e,request:t})}if(i===304)throw new Fi("Not modified",i,{headers:e,request:t});if(i>=400)return s.text().then(o=>{const u=new Fi(o,i,{headers:e,request:t});try{let c=JSON.parse(u.message);Object.assign(u,c);let h=c.errors;u.message=u.message+": "+h.map(JSON.stringify).join(", ")}catch(c){}throw u});const a=s.headers.get("content-type");return/application\/json/.test(a)?s.json():!a||/^text\/|charset=utf-8$/.test(a)?s.text():im(s)}).then(s=>({status:i,url:r,headers:e,data:s})).catch(s=>{throw s instanceof Fi?s:new Fi(s.message,500,{headers:e,request:t})})}function Sn(t,e){const i=t.defaults(e);return Object.assign(function(n,s){const a=i.merge(n,s);if(!a.request||!a.request.hook)return oo(i.parse(a));const o=(u,c)=>oo(i.parse(i.merge(u,c)));return Object.assign(o,{endpoint:i,defaults:Sn.bind(null,i)}),a.request.hook(o,a)},{endpoint:i,defaults:Sn.bind(null,i)})}const fr=Sn(Yd,{headers:{"user-agent":`octokit-request.js/${tm} ${pr()}`}}),rm="4.6.0";class nm extends Error{constructor(e,i){const r=i.data.errors[0].message;super(r);Object.assign(this,i.data),Object.assign(this,{headers:i.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const sm=["method","baseUrl","url","headers","request","query","mediaType"],lo=/\/api\/v3\/?$/;function am(t,e,i){if(typeof e=="string"&&i&&"query"in i)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));const r=typeof e=="string"?Object.assign({query:e},i):e,n=Object.keys(r).reduce((a,o)=>sm.includes(o)?(a[o]=r[o],a):(a.variables||(a.variables={}),a.variables[o]=r[o],a),{}),s=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return lo.test(s)&&(n.url=s.replace(lo,"/api/graphql")),t(n).then(a=>{if(a.data.errors){const o={};for(const u of Object.keys(a.headers))o[u]=a.headers[u];throw new nm(n,{headers:o,data:a.data})}return a.data.data})}function En(t,e){const i=t.defaults(e);return Object.assign((n,s)=>am(i,n,s),{defaults:En.bind(null,i),endpoint:fr.endpoint})}const ff=En(fr,{headers:{"user-agent":`octokit-graphql.js/${rm} ${pr()}`},method:"POST",url:"/graphql"});function om(t){return En(t,{method:"POST",url:"/graphql"})}async function lm(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function um(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function cm(t,e,i,r){const n=e.endpoint.merge(i,r);return n.headers.authorization=um(t),e(n)}const dm=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(lm.bind(null,e),{hook:cm.bind(null,e)})},uo="3.2.5";class Pn{constructor(e={}){const i=new Ld.Collection,r={baseUrl:fr.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:i.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=[e.userAgent,`octokit-core.js/${uo} ${pr()}`].filter(Boolean).join(" "),e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=fr.defaults(r),this.graphql=om(this.request).defaults(r),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=i,e.authStrategy){const{authStrategy:s,...a}=e,o=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:a},e.auth));i.wrap("request",o.hook),this.auth=o}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=dm(e.auth);i.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...r){const n=r[0]||{};if(typeof e=="function"){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var i;const r=this.plugins;return i=class extends this{},i.plugins=r.concat(e.filter(s=>!r.includes(s))),i}}Pn.VERSION=uo,Pn.plugins=[];const mm="1.0.3";function co(t){t.hook.wrap("request",(e,i)=>{t.log.debug("request",i);const r=Date.now(),n=t.request.endpoint.parse(i),s=n.url.replace(i.baseUrl,"");return e(i).then(a=>(t.log.info(`${n.method} ${s} - ${a.status} in ${Date.now()-r}ms`),a)).catch(a=>{throw t.log.info(`${n.method} ${s} - ${a.status} in ${Date.now()-r}ms`),a})})}co.VERSION=mm;const hm="2.10.0";function pm(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const i=t.data.incomplete_results,r=t.data.repository_selection,n=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],a=t.data[s];return t.data=a,typeof i!="undefined"&&(t.data.incomplete_results=i),typeof r!="undefined"&&(t.data.repository_selection=r),t.data.total_count=n,t}function Nn(t,e,i){const r=typeof e=="function"?e.endpoint(i):t.request.endpoint(e,i),n=typeof e=="function"?e:t.request,s=r.method,a=r.headers;let o=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!o)return{done:!0};const u=await n({method:s,url:o,headers:a}),c=pm(u);return o=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}})}}function mo(t,e,i,r){return typeof i=="function"&&(r=i,i=void 0),ho(t,[],Nn(t,e,i)[Symbol.asyncIterator](),r)}function ho(t,e,i,r){return i.next().then(n=>{if(n.done)return e;let s=!1;function a(){s=!0}return e=e.concat(r?r(n.value,a):n.value.data),s?e:ho(t,e,i,r)})}const gf=Object.assign(mo,{iterator:Nn});function po(t){return{paginate:Object.assign(mo.bind(null,t),{iterator:Nn.bind(null,t)})}}po.VERSION=hm;const fm={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},gm="4.12.0";function vm(t,e){const i={};for(const[r,n]of Object.entries(e))for(const[s,a]of Object.entries(n)){const[o,u,c]=a,[h,b]=o.split(/ /),R=Object.assign({method:h,url:b},u);i[r]||(i[r]={});const q=i[r];if(c){q[s]=bm(t,r,s,R,c);continue}q[s]=t.request.defaults(R)}return i}function bm(t,e,i,r,n){const s=t.request.defaults(r);function a(...o){let u=s.endpoint.merge(...o);if(n.mapToData)return u=Object.assign({},u,{data:u[n.mapToData],[n.mapToData]:void 0}),s(u);if(n.renamed){const[c,h]=n.renamed;t.log.warn(`octokit.${e}.${i}() has been renamed to octokit.${c}.${h}()`)}if(n.deprecated&&t.log.warn(n.deprecated),n.renamedParameters){const c=s.endpoint.merge(...o);for(const[h,b]of Object.entries(n.renamedParameters))h in c&&(t.log.warn(`"${h}" parameter is deprecated for "octokit.${e}.${i}()". Use "${b}" instead`),b in c||(c[b]=c[h]),delete c[h]);return s(c)}return s(...o)}return Object.assign(a,s)}function fo(t){return vm(t,fm)}fo.VERSION=gm;const wm="18.2.0",ym=Pn.plugin(co,fo,po).defaults({userAgent:`octokit-rest.js/${wm}`});function km(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:gr(t)},i={kind:"Document",definitions:[e]};return i}function _m(t,e){var i={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:gr(t)},r={kind:"Document",definitions:[i]};return r}function gr(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return gr(t[0]);var e=[];Object.keys(t).forEach(function(r){var n=gr(t[r]),s={kind:"Field",name:{kind:"Name",value:r},selectionSet:n||void 0};e.push(s)});var i={kind:"SelectionSet",selections:e};return i}var Rm={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Cm=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,i){return i===void 0&&(i=!1),this.read({query:e.query,variables:e.variables,optimistic:i})},t.prototype.readFragment=function(e,i){return i===void 0&&(i=!1),this.read({query:ks(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:i})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:ks(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var i=e.id,r=e.data;if(typeof i!="undefined"){var n=null;try{n=this.read({rootId:i,optimistic:!1,query:Rm})}catch(o){}var s=n&&n.__typename||"__ClientData",a=Object.assign({__typename:s},r);this.writeFragment({id:i,fragment:_m(a,s),data:a})}else this.writeQuery({query:km(r),data:r})},t}(),go;(function(t){})(go||(go={}));var Me=null,vo={},Sm=1,Em=function(){return function(){function t(){this.id=["slot",Sm++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Me;e;e=e.parent)if(this.id in e.slots){var i=e.slots[this.id];if(i===vo)break;return e!==Me&&(Me.slots[this.id]=i),!0}return Me&&(Me.slots[this.id]=vo),!1},t.prototype.getValue=function(){if(this.hasValue())return Me.slots[this.id]},t.prototype.withValue=function(e,i,r,n){var s,a=(s={__proto__:null},s[this.id]=e,s),o=Me;Me={parent:o,slots:a};try{return i.apply(n,r)}finally{Me=o}},t.bind=function(e){var i=Me;return function(){var r=Me;try{return Me=i,e.apply(this,arguments)}finally{Me=r}}},t.noContext=function(e,i,r){if(Me){var n=Me;try{return Me=null,e.apply(r,i)}finally{Me=n}}else return e.apply(r,i)},t}()},Tn="@wry/context:Slot",Dn=Array,Fn=Dn[Tn]||function(){var t=Em();try{Object.defineProperty(Dn,Tn,{value:Dn[Tn]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),In=Fn.bind,Pm=Fn.noContext;function vf(t,e){return setTimeout(In(t),e)}function bf(t){return function(){var e=t.apply(this,arguments),i=In(e.next),r=In(e.throw);return new Promise(function(n,s){function a(c,h){try{var b=c.call(e,h)}catch(q){return s(q)}var R=b.done?n:o;Nm(b.value)?b.value.then(R,b.done?s:u):R(b.value)}var o=function(c){return a(i,c)},u=function(c){return a(r,c)};o()})}}function Nm(t){return t&&typeof t.then=="function"}var bo=null;function wf(t){if(bo.indexOf(t)<0){var e=function(i,r){var n=i[r];i[r]=function(){return Pm(n,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),bo.push(t)}return t}function Tm(){}var Dm=function(){function t(e,i){e===void 0&&(e=Infinity),i===void 0&&(i=Tm),this.max=e,this.dispose=i,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var i=this.getEntry(e);return i&&i.value},t.prototype.getEntry=function(e){var i=this.map.get(e);if(i&&i!==this.newest){var r=i.older,n=i.newer;n&&(n.older=r),r&&(r.newer=n),i.older=this.newest,i.older.newer=i,i.newer=null,this.newest=i,i===this.oldest&&(this.oldest=n)}return i},t.prototype.set=function(e,i){var r=this.getEntry(e);return r?r.value=i:(r={key:e,value:i,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var i=this.map.get(e);return i?(i===this.newest&&(this.newest=i.older),i===this.oldest&&(this.oldest=i.newer),i.newer&&(i.newer.older=i.older),i.older&&(i.older.newer=i.newer),this.map.delete(e),this.dispose(i.value,e),!0):!1},t}(),vr=new Fn,Fm=[],An=[],Im=100;function gi(t,e){if(!t)throw new Error(e||"assertion failure")}function Am(t,e){var i=t.length;return i>0&&i===e.length&&t[i-1]===e[i-1]}function wo(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Mm(t){return t.slice(0)}var xm=function(){function t(e,i){this.fn=e,this.args=i,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(gi(!this.recomputing,"already recomputing"),!(!Om(this)&&Mn(this)))return vi(this)?qm(this):wo(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,yo(this),xn(this))},t.prototype.dispose=function(){var e=this;So(this).forEach(Mn),xn(this),this.parents.forEach(function(i){i.setDirty(),Eo(i,e)})},t.count=0,t}();function Om(t){var e=vr.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),vi(t)?_o(e,t):Ro(e,t),e}function qm(t){var e=So(t);return vr.withValue(t,Um,[t]),$m(t)&&Lm(t),e.forEach(Mn),wo(t.value)}function Um(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function vi(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Lm(t){t.dirty=!1,!vi(t)&&ko(t)}function yo(t){t.parents.forEach(function(e){return _o(e,t)})}function ko(t){t.parents.forEach(function(e){return Ro(e,t)})}function _o(t,e){if(gi(t.childValues.has(e)),gi(vi(e)),!t.dirtyChildren)t.dirtyChildren=An.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),yo(t)}function Ro(t,e){gi(t.childValues.has(e)),gi(!vi(e));var i=t.childValues.get(e);i.length===0?t.childValues.set(e,Mm(e.value)):Am(i,e.value)||t.setDirty(),Co(t,e),!vi(t)&&ko(t)}function Co(t,e){var i=t.dirtyChildren;i&&(i.delete(e),i.size===0&&(An.length<Im&&An.push(i),t.dirtyChildren=null))}function Mn(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function So(t){var e=Fm;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(i,r){Eo(t,r),e.push(r)})),gi(t.dirtyChildren===null),e}function Eo(t,e){e.parents.delete(t),t.childValues.delete(e),Co(t,e)}function $m(t){if(typeof t.subscribe=="function")try{xn(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function xn(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var On=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var i=this;return e.forEach(function(r){return i=i.getChildTrie(r)}),i.data||(i.data=Object.create(null))},t.prototype.getChildTrie=function(e){var i=this.weakness&&Vm(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=i.get(e);return r||i.set(e,r=new t(this.weakness)),r},t}();function Vm(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Hm=new On(typeof WeakMap=="function");function Gm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Hm.lookupArray(t)}var qn=new Set;function Ii(t,e){e===void 0&&(e=Object.create(null));var i=new Dm(e.max||Math.pow(2,16),function(a){return a.dispose()}),r=!!e.disposable,n=e.makeCacheKey||Gm;function s(){if(!(r&&!vr.hasValue())){var a=n.apply(null,arguments);if(a===void 0)return t.apply(null,arguments);var o=Array.prototype.slice.call(arguments),u=i.get(a);u?u.args=o:(u=new xm(t,o),i.set(a,u),u.subscribe=e.subscribe,r&&(u.reportOrphan=function(){return i.delete(a)}));var c=u.recompute();return i.set(a,u),qn.add(i),vr.hasValue()||(qn.forEach(function(h){return h.clean()}),qn.clear()),r?void 0:c}}return s.dirty=function(){var a=n.apply(null,arguments),o=a!==void 0&&i.get(a);o&&o.setDirty()},s}var Po=!1;function No(){var t=!Po;return Wr()||(Po=!0),t}var Bm=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,i,r){var n=r.store.get(e.id),s=e.id==="ROOT_QUERY";if(!n)return s;var a=n.__typename,o=a===void 0?s&&"Query":a;return o&&o===i?!0:(No(),"heuristic")},t}(),yf=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,i,r){ce(this.isReady,1);var n=r.store.get(e.id),s=e.id==="ROOT_QUERY";if(!n)return s;var a=n.__typename,o=a===void 0?s&&"Query":a;if(ce(o,2),o===i)return!0;var u=this.possibleTypesMap[i];return!!(o&&u&&u.indexOf(o)>-1)},t.prototype.parseIntrospectionResult=function(e){var i={};return e.__schema.types.forEach(function(r){(r.kind==="UNION"||r.kind==="INTERFACE")&&(i[r.name]=r.possibleTypes.map(function(n){return n.name}))}),i},t}(),To=Object.prototype.hasOwnProperty,bi=function(){function t(e){var i=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Ii(function(r){return i.data[r]},{disposable:!0,makeCacheKey:function(r){return r}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,i){var r=this.data[e];i!==r&&(this.data[e]=i,this.depend.dirty(e))},t.prototype.delete=function(e){To.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var i=this;e?(Object.keys(e).forEach(function(r){i.set(r,e[r])}),Object.keys(this.data).forEach(function(r){To.call(e,r)||i.delete(r)})):Object.keys(this.data).forEach(function(r){i.delete(r)})},t}();function Do(t){return new bi(t)}var jm=function(){function t(e){var i=this,r=e===void 0?{}:e,n=r.cacheKeyRoot,s=n===void 0?new On(Br):n,a=r.freezeResults,o=a===void 0?!1:a,u=this,c=u.executeStoreQuery,h=u.executeSelectionSet,b=u.executeSubSelectedArray;this.freezeResults=o,this.executeStoreQuery=Ii(function(R){return c.call(i,R)},{makeCacheKey:function(R){var q=R.query,L=R.rootValue,$=R.contextValue,z=R.variableValues,Y=R.fragmentMatcher;if($.store instanceof bi)return s.lookup($.store,q,Y,JSON.stringify(z),L.id)}}),this.executeSelectionSet=Ii(function(R){return h.call(i,R)},{makeCacheKey:function(R){var q=R.selectionSet,L=R.rootValue,$=R.execContext;if($.contextValue.store instanceof bi)return s.lookup($.contextValue.store,q,$.fragmentMatcher,JSON.stringify($.variableValues),L.id)}}),this.executeSubSelectedArray=Ii(function(R){return b.call(i,R)},{makeCacheKey:function(R){var q=R.field,L=R.array,$=R.execContext;if($.contextValue.store instanceof bi)return s.lookup($.contextValue.store,q,L,JSON.stringify($.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(K(K({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var i=e.store,r=e.query,n=e.variables,s=e.previousResult,a=e.returnPartialData,o=a===void 0?!0:a,u=e.rootId,c=u===void 0?"ROOT_QUERY":u,h=e.fragmentMatcherFunction,b=e.config,R=ru(r);n=Lr({},Hr(R),n);var q={store:i,dataIdFromObject:b&&b.dataIdFromObject,cacheRedirects:b&&b.cacheRedirects||{}},L=this.executeStoreQuery({query:r,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:q,variableValues:n,fragmentMatcher:h}),$=L.missing&&L.missing.length>0;return $&&!o&&L.missing.forEach(function(z){if(!z.tolerable)throw new De(8)}),s&&Ye(s,L.result)&&(L.result=s),{result:L.result,complete:!$}},t.prototype.executeStoreQuery=function(e){var i=e.query,r=e.rootValue,n=e.contextValue,s=e.variableValues,a=e.fragmentMatcher,o=a===void 0?Qm:a,u=Vr(i),c=zi(i),h=Ki(c),b={query:i,fragmentMap:h,contextValue:n,variableValues:s,fragmentMatcher:o};return this.executeSelectionSet({selectionSet:u.selectionSet,rootValue:r,execContext:b})},t.prototype.executeSelectionSet=function(e){var i=this,r=e.selectionSet,n=e.rootValue,s=e.execContext,a=s.fragmentMap,o=s.contextValue,u=s.variableValues,c={result:null},h=[],b=o.store.get(n.id),R=b&&b.__typename||n.id==="ROOT_QUERY"&&"Query"||void 0;function q(L){var $;return L.missing&&(c.missing=c.missing||[],($=c.missing).push.apply($,L.missing)),L.result}return r.selections.forEach(function(L){var $;if(!!Ur(L,u))if(Tt(L)){var z=q(i.executeField(b,R,L,s));typeof z!="undefined"&&h.push(($={},$[yi(L)]=z,$))}else{var Y=void 0;if(Bi(L))Y=L;else if(Y=a[L.name.value],!Y)throw new De(9);var Z=Y.typeCondition&&Y.typeCondition.name.value,re=!Z||s.fragmentMatcher(n,Z,o);if(re){var te=i.executeSelectionSet({selectionSet:Y.selectionSet,rootValue:n,execContext:s});re==="heuristic"&&te.missing&&(te=K(K({},te),{missing:te.missing.map(function(le){return K(K({},le),{tolerable:!0})})})),h.push(q(te))}}}),c.result=Kr(h),this.freezeResults,c},t.prototype.executeField=function(e,i,r,n){var s=n.variableValues,a=n.contextValue,o=r.name.value,u=qr(r,s),c={resultKey:yi(r),directives:Zl(r,s)},h=Wm(e,i,o,u,a,c);return Array.isArray(h.result)?this.combineExecResults(h,this.executeSubSelectedArray({field:r,array:h.result,execContext:n})):r.selectionSet?h.result==null?h:this.combineExecResults(h,this.executeSelectionSet({selectionSet:r.selectionSet,rootValue:h.result,execContext:n})):(Fo(r,h.result),this.freezeResults,h)},t.prototype.combineExecResults=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r;return e.forEach(function(n){n.missing&&(r=r||[],r.push.apply(r,n.missing))}),{result:e.pop().result,missing:r}},t.prototype.executeSubSelectedArray=function(e){var i=this,r=e.field,n=e.array,s=e.execContext,a;function o(u){return u.missing&&(a=a||[],a.push.apply(a,u.missing)),u.result}return n=n.map(function(u){return u===null?null:Array.isArray(u)?o(i.executeSubSelectedArray({field:r,array:u,execContext:s})):r.selectionSet?o(i.executeSelectionSet({selectionSet:r.selectionSet,rootValue:u,execContext:s})):(Fo(r,u),u)}),this.freezeResults,{result:n,missing:a}},t}();function Fo(t,e){if(!t.selectionSet&&ji(e))throw new De(10)}function Qm(){return!0}function kf(t){invariant(isIdValue(t),11)}function Wm(t,e,i,r,n,s){var a=s.resultKey,o=s.directives,u=i;(r||o)&&(u=ws(u,r,o));var c=void 0;if(t&&(c=t[u],typeof c=="undefined"&&n.cacheRedirects&&typeof e=="string")){var h=n.cacheRedirects[e];if(h){var b=h[i];b&&(c=b(t,r,{getCacheKey:function(R){var q=n.dataIdFromObject(R);return q&&Qi({id:q,typename:R.__typename})}}))}}return typeof c=="undefined"?{result:c,missing:[{object:t,fieldName:u,tolerable:!1}]}:(Yl(c)&&(c=c.json),{result:c})}var br=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,i){this.data[e]=i},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function _f(t){return new br(t)}var zm=function(t){ft(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.type="WriteError",i}return e}(Error);function Km(t,e){var i=new zm(`Error writing result to store for query:
 `+JSON.stringify(e));return i.message+=`
`+t.message,i.stack=t.stack,i}var Ym=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var i=e.query,r=e.result,n=e.store,s=n===void 0?Do():n,a=e.variables,o=e.dataIdFromObject,u=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:r,document:i,store:s,variables:a,dataIdFromObject:o,fragmentMatcherFunction:u})},t.prototype.writeResultToStore=function(e){var i=e.dataId,r=e.result,n=e.document,s=e.store,a=s===void 0?Do():s,o=e.variables,u=e.dataIdFromObject,c=e.fragmentMatcherFunction,h=ei(n);try{return this.writeSelectionSetToStore({result:r,dataId:i,selectionSet:h.selectionSet,context:{store:a,processedData:{},variables:Lr({},Hr(h),o),dataIdFromObject:u,fragmentMap:Ki(zi(n)),fragmentMatcherFunction:c}})}catch(b){throw Km(b,n)}},t.prototype.writeSelectionSetToStore=function(e){var i=this,r=e.result,n=e.dataId,s=e.selectionSet,a=e.context,o=a.variables,u=a.store,c=a.fragmentMap;return s.selections.forEach(function(h){var b;if(!!Ur(h,o))if(Tt(h)){var R=yi(h),q=r[R];if(typeof q!="undefined")i.writeFieldToStore({dataId:n,value:q,field:h,context:a});else{var L=!1,$=!1;h.directives&&h.directives.length&&(L=h.directives.some(function(ve){return ve.name&&ve.name.value==="defer"}),$=h.directives.some(function(ve){return ve.name&&ve.name.value==="client"})),!L&&!$&&a.fragmentMatcherFunction}}else{var z=void 0;Bi(h)?z=h:(z=(c||{})[h.name.value],ce(z,3));var Y=!0;if(a.fragmentMatcherFunction&&z.typeCondition){var Z=n||"self",re=Qi({id:Z,typename:void 0}),te={store:new br((b={},b[Z]=r,b)),cacheRedirects:{}},le=a.fragmentMatcherFunction(re,z.typeCondition.name.value,te);!Ns()&&le==="heuristic",Y=!!le}Y&&i.writeSelectionSetToStore({result:r,selectionSet:z.selectionSet,dataId:n,context:a})}}),u},t.prototype.writeFieldToStore=function(e){var i,r=e.field,n=e.value,s=e.dataId,a=e.context,o=a.variables,u=a.dataIdFromObject,c=a.store,h,b,R=zl(r,o);if(!r.selectionSet||n===null)h=n!=null&&typeof n=="object"?{type:"json",json:n}:n;else if(Array.isArray(n)){var q=s+"."+R;h=this.processArrayValue(n,q,r.selectionSet,a)}else{var L=s+"."+R,$=!0;if(Un(L)||(L="$"+L),u){var z=u(n);ce(!z||!Un(z),4),(z||typeof z=="number"&&z===0)&&(L=z,$=!1)}Ao(L,r,a.processedData)||this.writeSelectionSetToStore({dataId:L,result:n,selectionSet:r.selectionSet,context:a});var Y=n.__typename;h=Qi({id:L,typename:Y},$),b=c.get(s);var Z=b&&b[R];if(Z!==h&&ji(Z)){var re=Z.typename!==void 0,te=Y!==void 0,le=re&&te&&Z.typename!==Y;ce(!$||Z.generated||le,5),ce(!re||te,6),Z.generated&&(le?$||c.delete(Z.id):Io(Z.id,h.id,c))}}b=c.get(s),(!b||!Ye(h,b[R]))&&c.set(s,K(K({},b),(i={},i[R]=h,i)))},t.prototype.processArrayValue=function(e,i,r,n){var s=this;return e.map(function(a,o){if(a===null)return null;var u=i+"."+o;if(Array.isArray(a))return s.processArrayValue(a,u,r,n);var c=!0;if(n.dataIdFromObject){var h=n.dataIdFromObject(a);h&&(u=h,c=!1)}return Ao(u,r,n.processedData)||s.writeSelectionSetToStore({dataId:u,result:a,selectionSet:r,context:n}),Qi({id:u,typename:a.__typename},c)})},t}();function Un(t){return t[0]==="$"}function Io(t,e,i){if(t===e)return!1;var r=i.get(t),n=i.get(e),s=!1;Object.keys(r).forEach(function(o){var u=r[o],c=n[o];ji(u)&&Un(u.id)&&ji(c)&&!Ye(u,c)&&Io(u.id,c.id,i)&&(s=!0)}),i.delete(t);var a=K(K({},r),n);return Ye(a,n)?s:(i.set(e,a),!0)}function Ao(t,e,i){if(!i)return!1;if(i[t]){if(i[t].indexOf(e)>=0)return!0;i[t].push(e)}else i[t]=[e];return!1}var Jm={fragmentMatcher:new Bm,dataIdFromObject:Zm,addTypename:!0,resultCaching:!0,freezeResults:!1};function Zm(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var Xm=Object.prototype.hasOwnProperty,Mo=function(t){ft(e,t);function e(i,r,n){var s=t.call(this,Object.create(null))||this;return s.optimisticId=i,s.parent=r,s.transaction=n,s}return e.prototype.toObject=function(){return K(K({},this.parent.toObject()),this.data)},e.prototype.get=function(i){return Xm.call(this.data,i)?this.data[i]:this.parent.get(i)},e}(br),eh=function(t){ft(e,t);function e(i){i===void 0&&(i={});var r=t.call(this)||this;r.watches=new Set,r.typenameDocumentCache=new Map,r.cacheKeyRoot=new On(Br),r.silenceBroadcast=!1,r.config=K(K({},Jm),i),r.config.customResolvers&&(r.config.cacheRedirects=r.config.customResolvers),r.config.cacheResolvers&&(r.config.cacheRedirects=r.config.cacheResolvers),r.addTypename=!!r.config.addTypename,r.data=r.config.resultCaching?new bi:new br,r.optimisticData=r.data,r.storeWriter=new Ym,r.storeReader=new jm({cacheKeyRoot:r.cacheKeyRoot,freezeResults:i.freezeResults});var n=r,s=n.maybeBroadcastWatch;return r.maybeBroadcastWatch=Ii(function(a){return s.call(r,a)},{makeCacheKey:function(a){if(!a.optimistic&&!a.previousResult&&n.data instanceof bi)return n.cacheKeyRoot.lookup(a.query,JSON.stringify(a.variables))}}),r}return e.prototype.restore=function(i){return i&&this.data.replace(i),this},e.prototype.extract=function(i){return i===void 0&&(i=!1),(i?this.optimisticData:this.data).toObject()},e.prototype.read=function(i){if(typeof i.rootId=="string"&&typeof this.data.get(i.rootId)=="undefined")return null;var r=this.config.fragmentMatcher,n=r&&r.match;return this.storeReader.readQueryFromStore({store:i.optimistic?this.optimisticData:this.data,query:this.transformDocument(i.query),variables:i.variables,rootId:i.rootId,fragmentMatcherFunction:n,previousResult:i.previousResult,config:this.config})||null},e.prototype.write=function(i){var r=this.config.fragmentMatcher,n=r&&r.match;this.storeWriter.writeResultToStore({dataId:i.dataId,result:i.result,variables:i.variables,document:this.transformDocument(i.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:n}),this.broadcastWatches()},e.prototype.diff=function(i){var r=this.config.fragmentMatcher,n=r&&r.match;return this.storeReader.diffQueryAgainstStore({store:i.optimistic?this.optimisticData:this.data,query:this.transformDocument(i.query),variables:i.variables,returnPartialData:i.returnPartialData,previousResult:i.previousResult,fragmentMatcherFunction:n,config:this.config})},e.prototype.watch=function(i){var r=this;return this.watches.add(i),function(){r.watches.delete(i)}},e.prototype.evict=function(i){throw new De(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(i){for(var r=[],n=0,s=this.optimisticData;s instanceof Mo;)s.optimisticId===i?++n:r.push(s),s=s.parent;if(n>0){for(this.optimisticData=s;r.length>0;){var a=r.pop();this.performTransaction(a.transaction,a.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(i,r){var n=this,s=n.data,a=n.silenceBroadcast;this.silenceBroadcast=!0,typeof r=="string"&&(this.data=this.optimisticData=new Mo(r,this.optimisticData,i));try{i(this)}finally{this.silenceBroadcast=a,this.data=s}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(i,r){return this.performTransaction(i,r)},e.prototype.transformDocument=function(i){if(this.addTypename){var r=this.typenameDocumentCache.get(i);return r||(r=au(i),this.typenameDocumentCache.set(i,r),this.typenameDocumentCache.set(r,r)),r}return i},e.prototype.broadcastWatches=function(){var i=this;this.silenceBroadcast||this.watches.forEach(function(r){return i.maybeBroadcastWatch(r)})},e.prototype.maybeBroadcastWatch=function(i){i.callback(this.diff({query:i.query,variables:i.variables,previousResult:i.previousResult&&i.previousResult(),optimistic:i.optimistic}))},e}(Cm);function th(t){return new Je(function(e,i){var r=ds(e,[]);return new Le(function(n){var s;return Promise.resolve(r).then(function(a){return t(a,e.getContext())}).then(e.setContext).then(function(){s=i(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}).catch(n.error.bind(n)),function(){s&&s.unsubscribe()}})})}var ih=oe(3033),rh={includeQuery:!0,includeExtensions:!1},nh={accept:"*/*","content-type":"application/json"},sh={method:"POST"},ah={http:rh,headers:nh,options:sh},xo=function(t,e,i){var r=new Error(i);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=e,r},oh=function(t){return function(e){return e.text().then(function(i){try{return JSON.parse(i)}catch(n){var r=n;return r.name="ServerParseError",r.response=e,r.statusCode=e.status,r.bodyText=i,Promise.reject(r)}}).then(function(i){return e.status>=300&&xo(e,i,"Response not successful: Received status code "+e.status),!Array.isArray(i)&&!i.hasOwnProperty("data")&&!i.hasOwnProperty("errors")&&xo(e,i,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(r){return r.operationName}):t.operationName)+"'."),i})}},lh=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new De(1)}},uh=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},ch=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=K({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;i.forEach(function(b){n=K({},n,b.options,{headers:K({},n.headers,b.headers)}),b.credentials&&(n.credentials=b.credentials),s=K({},s,b.http)});var a=t.operationName,o=t.extensions,u=t.variables,c=t.query,h={operationName:a,variables:u};return s.includeExtensions&&(h.extensions=o),s.includeQuery&&(h.query=(0,ih.S)(c)),{options:n,body:h}},Ln=function(t,e){var i;try{i=JSON.stringify(t)}catch(n){var r=new De(2);throw r.parseError=n,r}return i},dh=function(t,e){var i=t.getContext(),r=i.uri;return r||(typeof e=="function"?e(t):e||"/graphql")},Oo=function(t){t===void 0&&(t={});var e=t.uri,i=e===void 0?"/graphql":e,r=t.fetch,n=t.includeExtensions,s=t.useGETForQueries,a=ds(t,["uri","fetch","includeExtensions","useGETForQueries"]);lh(r),r||(r=fetch);var o={http:{includeExtensions:n},options:a.fetchOptions,credentials:a.credentials,headers:a.headers};return new Je(function(u){var c=dh(u,i),h=u.getContext(),b={};if(h.clientAwareness){var R=h.clientAwareness,q=R.name,L=R.version;q&&(b["apollographql-client-name"]=q),L&&(b["apollographql-client-version"]=L)}var $=K({},b,h.headers),z={http:h.http,options:h.fetchOptions,credentials:h.credentials,headers:$},Y=ch(u,ah,o,z),Z=Y.options,re=Y.body,te;if(!Z.signal){var le=uh(),ve=le.controller,he=le.signal;te=ve,te&&(Z.signal=he)}var ke=function(it){return it.kind==="OperationDefinition"&&it.operation==="mutation"};if(s&&!u.query.definitions.some(ke)&&(Z.method="GET"),Z.method==="GET"){var de=mh(c,re),xt=de.newURI,Vi=de.parseError;if(Vi)return Ms(Vi);c=xt}else try{Z.body=Ln(re,"Payload")}catch(it){return Ms(it)}return new Le(function(it){return r(c,Z).then(function(qe){return u.setContext({response:qe}),qe}).then(oh(u)).then(function(qe){return it.next(qe),it.complete(),qe}).catch(function(qe){qe.name!=="AbortError"&&(qe.result&&qe.result.errors&&qe.result.data&&it.next(qe.result),it.error(qe))}),function(){te&&te.abort()}})})};function mh(t,e){var i=[],r=function(b,R){i.push(b+"="+encodeURIComponent(R))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var n=void 0;try{n=Ln(e.variables,"Variables map")}catch(b){return{parseError:b}}r("variables",n)}if(e.extensions){var s=void 0;try{s=Ln(e.extensions,"Extensions map")}catch(b){return{parseError:b}}r("extensions",s)}var a="",o=t,u=t.indexOf("#");u!==-1&&(a=t.substr(u),o=t.substr(0,u));var c=o.indexOf("?")===-1?"?":"&",h=o+c+i.join("&")+a;return{newURI:h}}var Rf=function(t){ft(e,t);function e(i){return t.call(this,Oo(i).request)||this}return e}(Je),hh=Object.defineProperty,Ai=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?hh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const qo="Try again?",ph="Cancel",Uo="Sign in",fh="Don't show again",Lo="prompt for sign in",$o="login",Vo="github",Ho=["read:user","user:email","repo"];class gh{constructor(e){this._telemetry=e,Ai(this,"_githubAPI"),Ai(this,"_sessionId"),Ai(this,"_disposables"),Ai(this,"_onDidInitialize",new l.EventEmitter),Ai(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(l.authentication.onDidChangeSessions(()=>{if(!this.isAuthenticated())return this.initialize()}))}async initialize(){const e=await l.authentication.getSession(Vo,Ho,{createIfNone:!1});if(e){const i=e.accessToken;this._sessionId=e.id;const r=await this.createHub(i);this._githubAPI=r,await this.setCurrentUser(r),this._onDidInitialize.fire()}else H.debug("No token found.","Authentication")}async reset(){this._githubAPI=void 0,await this.initialize()}isAuthenticated(){return!!this._githubAPI}getHub(){return this._githubAPI}async getHubOrLogin(){var e;return(e=this._githubAPI)!=null?e:await this.login()}async showSignInNotification(){if(Ya(Lo,$o)===!1)return;if(await l.window.showInformationMessage("In order to use the Pull Requests functionality, you must sign in to GitHub",Uo,fh)===Uo)return await this.login();Ja(Lo,$o,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async logout(){this._sessionId&&l.authentication.logout("github",this._sessionId)}async login(){this._telemetry.sendTelemetryEvent("auth.start");let e=!0,i;for(;e;){try{const r=await this.getSessionOrLogin();i=await this.createHub(r)}catch(r){H.appendLine(`Error signing in to GitHub: ${r}`),r instanceof Error&&r.stack&&H.appendLine(r.stack)}i?e=!1:e=await l.window.showErrorMessage("Error signing in to GitHub",qo,ph)===qo}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}isCurrentUser(e){var i,r;return((r=(i=this._githubAPI)==null?void 0:i.currentUser)==null?void 0:r.login)===e}getCurrentUser(){var e;return((e=this._githubAPI)==null?void 0:e.octokit)&&this._githubAPI.currentUser}async setCurrentUser(e){const i=await e.octokit.users.getAuthenticated({});e.currentUser=i.data}async getSessionOrLogin(){const e=await l.authentication.getSession(Vo,Ho,{createIfNone:!0});return this._sessionId=e.id,e.accessToken}async createHub(e){const i=new ym({request:{agent:la},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`}),r=new Gu({link:vh("https://api.github.com",e||""),cache:new eh,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),n={octokit:i,graphql:r};return await this.setCurrentUser(n),n}dispose(){this._disposables.forEach(e=>e.dispose())}}const vh=(t,e)=>th((i,{headers:r})=>({headers:{...r,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Oo({uri:`${t}/graphql`,fetch:sn()}));var bh=Object.defineProperty,Mi=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?bh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Cf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Sf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Ef extends Error{constructor(e,i,r){super();this.branchName=e,this.upstreamRef=i,this.problem=r}get message(){const{upstreamRef:{remote:e,name:i},branchName:r,problem:n}=this;return`The upstream ref ${e}/${i} for branch ${r} ${n}.`}}const Pf="remotes",Nf="No Milestone";class Go{constructor(e,i,r){this._folderManagers=e,this._credentialStore=i,this._telemetry=r,Mi(this,"_subs"),Mi(this,"_onDidChangeState",new l.EventEmitter),Mi(this,"onDidChangeState",this._onDidChangeState.event),Mi(this,"_state",Be.Initializing),this._subs=[],l.commands.executeCommand("setContext",Fa,this._state),this._subs.push(...e.map(n=>n.onDidLoadRepositories(s=>this.state=s)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const i=l.workspace.workspaceFolders;if(i){const r=i.findIndex(n=>n.uri.toString()===e.repository.rootUri.toString());if(r>-1){const n=this._folderManagers.slice(r,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,r),this._folderManagers.push(e),this._folderManagers.push(...n);return}}this._folderManagers.push(e)}removeRepo(e){const i=this._folderManagers.findIndex(r=>r.repository.rootUri.toString()===e.rootUri.toString());if(i>-1){const r=this._folderManagers[i];this._folderManagers.splice(i),r.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const i=e.remote.url.substring(0,e.remote.url.length-w.extname(e.remote.url).length);for(const r of this._folderManagers)if(r.gitHubRepositories.map(n=>n.remote.url.substring(0,n.remote.url.length-w.extname(n.remote.url).length)).includes(i))return r}getManagerForFile(e){for(const i of this._folderManagers){const r=i.repository.rootUri.path,n=e.path.substring(r.length>1?r.length+1:r.length);if(l.Uri.joinPath(i.repository.rootUri,n).path===e.path)return i}}get state(){return this._state}set state(e){const i=e!==this._state;this._state=e,i&&(l.commands.executeCommand("setContext",Fa,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=Be.Initializing}async authenticate(){return!!await this._credentialStore.login()}createGitHubRepository(e,i){return new ri(e,i,this._telemetry)}createGitHubRepositoryFromOwnerName(e,i){const r=`https://github.com/${e}/${i}`;return new ri(new er(i,r,new Ut(r)),this._credentialStore,this._telemetry)}dispose(){this._subs.forEach(e=>e.dispose())}}Mi(Go,"ID","RepositoriesManager");function Tf(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var wh=Object.defineProperty,ct=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?wh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class $n{constructor(e){ct(this,"_onDidOpenRepository",new l.EventEmitter),ct(this,"onDidOpenRepository",this._onDidOpenRepository.event),ct(this,"_onDidCloseRepository",new l.EventEmitter),ct(this,"onDidCloseRepository",this._onDidCloseRepository.event),ct(this,"_onDidChangeState",new l.EventEmitter),ct(this,"onDidChangeState",this._onDidChangeState.event),ct(this,"_onDidPublish",new l.EventEmitter),ct(this,"onDidPublish",this._onDidPublish.event),ct(this,"_gitAPI"),ct(this,"_disposables");const i=e.exports;this._gitAPI=i.getAPI(1),this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(this._gitAPI.onDidOpenRepository(r=>this._onDidOpenRepository.fire(r))),this._disposables.push(this._gitAPI.onDidChangeState(r=>this._onDidChangeState.fire(r))),this._disposables.push(this._gitAPI.onDidPublish(r=>this._onDidPublish.fire(r)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static createProvider(){const e=l.extensions.getExtension("vscode.git");if(e)return new $n(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var yh=Object.defineProperty,Pe=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?yh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class kh{constructor(e){this._liveShareAPI=e,Pe(this,"_onDidOpenRepository",new l.EventEmitter),Pe(this,"onDidOpenRepository",this._onDidOpenRepository.event),Pe(this,"_onDidCloseRepository",new l.EventEmitter),Pe(this,"onDidCloseRepository",this._onDidCloseRepository.event),Pe(this,"_openRepositories",[]),Pe(this,"_sharedServiceProxy"),Pe(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ts)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(l.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async i=>{i.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(i)}),e.removed.forEach(async i=>{i.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(i)})}async _refreshWorkspaces(e){l.workspace.workspaceFolders&&l.workspace.workspaceFolders.forEach(async i=>{i.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(i):await this.closeVSLSRepository(i))})}async openVSLSRepository(e){if(this.getRepository(e))return;const r=new Ch(e,this._sharedServiceProxy),n=new _h,s=new Proxy(r,n);await s.initialize(),this.openRepository(s)}async closeVSLSRepository(e){const i=this.getRepository(e);!i||this.closeRepository(i)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(i=>i!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(i=>i.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class _h{constructor(){}get(e,i){return i in e?e[i]:function(...r){return e.proxy.request(Pr,[i,e.workspaceFolder.uri.toString(),...r])}}}class Rh{constructor(e){Pe(this,"HEAD"),Pe(this,"refs"),Pe(this,"remotes"),Pe(this,"submodules",[]),Pe(this,"rebaseCommit"),Pe(this,"mergeChanges",[]),Pe(this,"indexChanges",[]),Pe(this,"workingTreeChanges",[]),Pe(this,"_onDidChange",new l.EventEmitter),Pe(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Ch{constructor(e,i){this.workspaceFolder=e,this.proxy=i,Pe(this,"rootUri"),Pe(this,"state")}async initialize(){const e=await this.proxy.request(Pr,[is,this.workspaceFolder.uri.toString()]);this.state=new Rh(e),this.rootUri=l.Uri.parse(e.rootUri),this.proxy.onNotify(rs,this._notifyHandler.bind(this))}_notifyHandler(e){var i;(i=this.state)==null||i.update(e)}}var Sh=Object.defineProperty,Bo=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Sh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Eh{constructor(e,i){this._liveShareAPI=e,this._api=i,Bo(this,"_sharedService"),Bo(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ts)||void 0,this._sharedService&&this._sharedService.onRequest(Pr,this._gitHandler.bind(this))}async _gitHandler(e){const i=e[0],r=e[1],n=l.Uri.parse(r),s=this._liveShareAPI.convertSharedUriToLocal(n),a=this._api.getGitProvider(s);if(!a)return;const o=a.repositories.filter(u=>u.rootUri.toString()===s.toString())[0];if(o){const u=e.slice(2);if(i===is)return this._disposables.push(o.state.onDidChange(c=>{this._sharedService.notify(rs,{HEAD:o.state.HEAD,remotes:o.state.remotes,refs:o.state.refs})})),{HEAD:o.state.HEAD,remotes:o.state.remotes,refs:o.state.refs,rootUri:n.toString()};if(i==="show"){const c=u[1],h=n.with({path:c}),b=this._liveShareAPI.convertSharedUriToLocal(h);return u[1]=b.fsPath,o[i](...u)}if(o[i])return o[i](...u)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Ph=Object.defineProperty,xi=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Ph(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);async function Nh(){const t=l.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const i="0.3.967";return e.getApi?e.getApi(i):e.getApiAsync(i)}class Th{constructor(e){this._api=e,xi(this,"_liveShareAPI"),xi(this,"_host"),xi(this,"_guest"),xi(this,"_localDisposables"),xi(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await Nh()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(i=>i.dispose()),e.role===1){this._host=new Eh(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new kh(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function Dh(t){return new Th(t)}function Fh(t,e){const i=$n.createProvider();if(i)return e.registerGitProvider(i),i}var Ih=Object.defineProperty,jo=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Ih(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Ah{constructor(e){this.pullRequestManager=e,jo(this,"onNotifiedEmitter",new l.EventEmitter),jo(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(i=>{i.onDidChangeAssignableUsers(r=>{this.notifySuggestedAccounts(r)})})}async requestAsync(e,i,r){let n=null;switch(e){case"initialize":n={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const s=new Map;for(const a of this.pullRequestManager.folderManagers){const o=a.getAllAssignableUsers();if(!!o)for(const u of o)s.has(u.login)||s.set(u.login,u)}s.size>0&&this.notifySuggestedAccounts(Array.from(s.values()));break;default:throw new Error(`type:${e} not supported`)}return n}async notifySuggestedAccounts(e){let i;try{i=await this.getCurrentUserLogin()}catch(r){}i&&e.findIndex(r=>r.login===i)!==-1&&this.notifySuggestedUsers(e.filter(r=>r.email).map(r=>({id:r.login,displayName:r.name?r.name:r.login,email:r.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const i=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(i){const r=i.hub.currentUser;if(r)return r.login}}notify(e,i){this.onNotifiedEmitter.fire({type:e,body:i})}notifySuggestedUsers(e,i){this.notify("suggestedUsers",{contacts:e,exclusive:i})}}var Mh=Object.defineProperty,Qo=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Mh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class xh{constructor(){Qo(this,"_extensionsDisposable"),Qo(this,"_subscriptions",[]),this._extensionsDisposable=l.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),l.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(i){i.branch.isRemote||l.commands.executeCommand("pr.create",{repoPath:i.repoPath,compareBranch:i.branch.name})}}))}async onExtensionsChanged(){var e;const i=(e=l.extensions.getExtension("eamodio.gitlens"))!=null?e:l.extensions.getExtension("eamodio.gitlens-insiders");if(i)if(this._extensionsDisposable.dispose(),i.isActive)this.register(await i.exports);else{let r=0;const n=setInterval(async()=>{i.isActive?(clearInterval(n),this.register(await i.exports)):(r++,r>60&&clearInterval(n))},1e3)}}}var Oh=Object.defineProperty,zt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Oh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Wo{constructor(e,i,r,n,s){this.issueModel=e,this.manager=i,this.stateManager=r,this.shouldPromptForBranch=s,zt(this,"repoChangeDisposable"),zt(this,"_branchName"),zt(this,"user"),zt(this,"repo"),zt(this,"_repoDefaults"),zt(this,"_onDidChangeCurrentIssueState",new l.EventEmitter),zt(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(n!=null?n:this.issueModel.githubRepository.remote)}setRepo(e){var i;for(let r=0;r<this.stateManager.gitAPI.repositories.length;r++){const n=this.stateManager.gitAPI.repositories[r];for(let s=0;s<n.state.remotes.length;s++){const a=n.state.remotes[s];if(a.name===(e==null?void 0:e.remoteName)&&((i=a.fetchUrl)==null?void 0:i.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=n;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const i=this.manager.getCurrentUser(this.issueModel).login;return l.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(r=>r.login===i))&&(await this.manager.assignIssue(this.issueModel,i),await this.stateManager.refresh()),!0}}catch(i){l.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(i){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(i){return l.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${i.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const i=l.workspace.getConfiguration(Se),r=i.inspect(fa);async function n(s,a){await i.update(ln,s,a),await i.update(fa,void 0,a)}return(r==null?void 0:r.globalValue)&&await n(r.globalValue,l.ConfigurationTarget.Global),(r==null?void 0:r.workspaceValue)&&await n(r.workspaceValue,l.ConfigurationTarget.Workspace),(r==null?void 0:r.workspaceFolderValue)&&await n(r.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),(e=l.workspace.getConfiguration(Se).get(ln))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const i=/[^ \\@\~\^\?\*\[]+/,r=e.match(i);if(r&&r.length>0&&r[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const i="Edit Setting";l.window.showErrorMessage(e,i).then(r=>{r===i&&l.commands.executeCommand("workbench.action.openSettings",`${Se}.${ln}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":l.workspace.getConfiguration(Se).get(ga);if(e==="off")return!0;const i=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:i.branch,!this._branchName){const r=await ur(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const n=this.validateBranchName(r);if(n)return this.showBranchNameError(n),!1;this._branchName=r}else this._branchName=await l.window.showInputBox({value:r,prompt:"Enter the label for the new branch."})}return this._branchName?(i.branch=this._branchName,this.stateManager.setSavedIssueState(this.issueModel,i),await this.createOrCheckoutBranch(this._branchName)||(this._branchName=void 0),!0):!1}async getCommitMessage(){const e=l.workspace.getConfiguration(Se).get(Sc);if(typeof e=="string")return ur(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class zo extends l.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,l.CompletionItemKind.Issue);this.issue=e}}class qh{constructor(e,i,r){this.stateManager=e,this.repositoriesManager=i,this.context=r}async provideCompletionItems(e,i,r,n){var s,a,o,u;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&i.character>0&&n.triggerKind===l.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(i)).match(/#[0-9]*$/))return[];if(i.character<=6&&e.languageId==="markdown"&&e.getText(new l.Range(i.with(void 0,0),i))===new Array(i.character+1).join("#"))return[];if(n.triggerKind===l.CompletionTriggerKind.TriggerCharacter&&l.workspace.getConfiguration(Se).get("ignoreCompletionTrigger",[]).find($=>$===e.languageId))return[];if(e.languageId!=="scminput"&&!await hn(e,i))return[];let c=new l.Range(i,i);i.character-1>=0&&e.getText(new l.Range(i.translate(0,-1),i))==="#"&&(c=new l.Range(i.translate(0,-1),i)),await this.stateManager.tryInitializeAndWait();const h=new Map,b=new Date;let R,q;if(e.languageId==="scminput"?q=Ea(e.uri):e.uri.scheme==="comment"?q=l.window.visibleTextEditors.length>0?(s=l.workspace.getWorkspaceFolder(l.Uri.file(l.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:s.uri:void 0:q=(a=l.workspace.getWorkspaceFolder(e.uri))==null?void 0:a.uri,!q)return[];try{R=await((o=this.repositoriesManager.getManagerForFile(q))==null?void 0:o.getPullRequestDefaults())}catch($){}const L=this.stateManager.getIssueCollection(q);for(const $ of L){const z=(u=await $[1])!=null?u:[];if(z.length!==0)if(z[0]instanceof Fe){let Y=0;for(const Z of z)h.set(li(Z),await this.completionItemFromIssue(R,Z,b,c,e,Y++))}else for(let Y=0;Y<z.length;Y++){const Z=z[Y];for(const re of Z.issues)h.set(li(re),await this.completionItemFromIssue(R,re,b,c,e,Y,Z.milestone))}}return[...h.values()]}async completionItemFromIssue(e,i,r,n,s,a,o){var u;const c=new zo(i);if(s.languageId==="markdown")c.insertText=`[${li(i,e)}](${i.html_url})`;else{const b=l.workspace.getConfiguration(Se).get("issueCompletionFormatScm");s.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof b=="string"?c.insertText=await ur(b,i,e):c.insertText=`${li(i,e)}`}c.documentation=i.body,c.range=n,c.detail=o?o.title:(u=i.milestone)==null?void 0:u.title;let h=(r.getTime()-new Date(i.updatedAt).getTime()).toString();return h=new Array(20-h.length).join("0")+h,c.sortText=`${a} ${h}`,c.filterText=`${c.detail} # ${i.number} ${i.title} ${c.documentation}`,c}async resolveCompletionItem(e,i){return e instanceof zo&&(e.documentation=await dn(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var Uh=Object.defineProperty,Oi=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Uh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const _t="newIssue",Lh="NewIssue.md",wr="Assignees:",qi="Labels:";function Vn(t){const e=JSON.parse(t.query);if(e.origin)return l.Uri.parse(e.origin)}class $h{constructor(){Oi(this,"content"),Oi(this,"createTime",0),Oi(this,"modifiedTime",0),Oi(this,"_onDidChangeFile",new l.EventEmitter),Oi(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,i){const r=this.onDidChangeFile(n=>{n.length===0&&n[0].type===l.FileChangeType.Deleted&&r.dispose()});return r}stat(e){var i,r;return{type:l.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(r=(i=this.content)==null?void 0:i.length)!=null?r:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var i;return(i=this.content)!=null?i:new Uint8Array(0)}writeFile(e,i,r={create:!1,overwrite:!1}){const n=this.content;this.content=i,n===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Changed}]))}delete(e,i){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Deleted}])}rename(e,i,r){}}class Vh{constructor(e){this.manager=e}async provideCompletionItems(e,i,r,n){if(!e.lineAt(i.line).text.startsWith(qi))return[];const s=Vn(e.uri);if(!s)return[];const a=this.manager.getManagerForFile(s);if(!a)return[];const o=await a.getPullRequestDefaults();return(await a.getLabels(void 0,o)).map(c=>{const h=new l.CompletionItem(c.name,l.CompletionItemKind.Color);return h.documentation=`#${c.color}`,h.commitCharacters=[" ",","],h})}}class Hh{constructor(e,i,r,n){this.manager=e,this.stateManager=i,this.context=r,this.telemetry=n}async provideHover(e,i,r){if(!await Sa(e,i))return;let n=e.getWordRangeAtPosition(i,Ci);if(n&&n.start.character>0){n=new l.Range(new l.Position(n.start.line,n.start.character-1),n.end);const a=e.getText(n).match(Ci),o=un(a),u=this.manager.getManagerForFile(e.uri);if(!u)return;if(o&&a&&o.issueNumber<=this.stateManager.maxIssueNumber(u.repository.rootUri))return this.createHover(u,a[0],o,n)}else return}async createHover(e,i,r,n){const s=await Ec(this.stateManager,e,i,r);if(!!s)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new l.Hover(await dn(s,this.context,this.manager,r.commentNumber),n)}}var Gh=Object.defineProperty,Ko=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?Gh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Kt extends l.TreeItem{constructor(e,i,r){super(i,r);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class Bh{constructor(e,i,r){this.stateManager=e,this.manager=i,this.context=r,Ko(this,"_onDidChangeTreeData",new l.EventEmitter),Ko(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),r.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),r.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),r.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var i;let r;return e instanceof Kt?r=e:e instanceof ui?r=new Kt(e.repository.rootUri,w.basename(e.repository.rootUri.fsPath),l.TreeItemCollapsibleState.Expanded):e instanceof Fe?(r=new Kt(void 0,`${e.number}: ${e.title}`,l.TreeItemCollapsibleState.None),r.iconPath=e.isOpen?new l.ThemeIcon("issues",new l.ThemeColor("issues.open")):new l.ThemeIcon("issue-closed",new l.ThemeColor("issues.closed")),((i=this.stateManager.currentIssue(e.uri))==null?void 0:i.issue.number)===e.number?(r.label=`\u2713 ${r.label}`,r.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?r.contextValue="continueissue":r.contextValue="issue",yc(e)&&(r.contextValue="link"+r.contextValue)):r=new Kt(e.uri,e.milestone.title,e.issues.length>0?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.None),r}getChildren(e){return e===void 0&&this.manager.state!==Be.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,i){return i instanceof Fe&&(e.tooltip=await dn(i,this.context,this.manager)),e}getStateChildren(){return this.manager.state===Be.NeedsAuthentication?[]:[new Kt(void 0,"Loading...")]}getQueryItems(e){const i=this.stateManager.getIssueCollection(e.repository.rootUri);if(i.size===1)return Array.from(i.values())[0];const r=Array.from(i.keys()),n=r[0];return r.map(s=>{const a=new Kt(e.repository.rootUri,s);return a.contextValue="query",a.collapsibleState=s===n?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed,a})}getIssuesChildren(e){var i;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof ui?this.getQueryItems(e):e instanceof Kt?e.uri?(i=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?i:[]:[]:e instanceof Fe?[]:e.issues.map(r=>{const n=Object.assign(r);return n.uri=e.uri,n})}}var jh=Object.defineProperty,Qh=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?jh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Wh{constructor(e){Qh(this,"expression"),e.subscriptions.push(l.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=l.workspace.getConfiguration(Se).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,i,r,n){if(this.expression===void 0||r.only&&r.only!==l.CodeActionKind.QuickFix)return[];const s=[];let a=i.start.line;do{const o=e.lineAt(a).text,u=o.substring(0,Rc);if(!u.match(Ci)){const h=u.search(this.expression);if(h>=0){const b=new l.CodeAction("Create GitHub Issue",l.CodeActionKind.QuickFix),R=u.substring(h).search(/\s/),q=h+(R>0?R:u.match(this.expression)[0].length);b.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:a,line:o,insertIndex:q,range:i}]},s.push(b);break}}a++}while(i.end.line>=a);return s}}var zh=Object.defineProperty,je=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?zh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const Kh=["Recovery"],Yh="currentIssue",Hn="issues",Yo="ignoreMilestones",Gn=[{label:"My Issues",query:"default"}];class Df extends null{constructor(){super(...arguments);je(this,"uri")}}class Jh{constructor(e,i,r){this.gitAPI=e,this.manager=i,this.context=r,je(this,"resolvedIssues",new Map),je(this,"_singleRepoStates",new Map),je(this,"_onRefreshCacheNeeded",new l.EventEmitter),je(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),je(this,"_onDidChangeIssueData",new l.EventEmitter),je(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),je(this,"_queries",[]),je(this,"_onDidChangeCurrentIssue",new l.EventEmitter),je(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),je(this,"initializePromise"),je(this,"statusBarItem"),je(this,"isSettingIssue",!1),i.folderManagers.forEach(n=>{this.context.subscriptions.push(n.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var i;let r=(i=this._singleRepoStates.get(e.path))==null?void 0:i.issueCollection;return r||(r=new Map,r)}getOrCreateSingleRepoState(e,i){let r=this._singleRepoStates.get(e.path);return r||(i||(i=this.manager.getManagerForFile(e)),r={issueCollection:new Map,maxIssueNumber:0,folderManager:i},this._singleRepoStates.set(e.path,r),r)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===Be.RepositoriesLoaded)this.doInitialize(),e();else{const i=this.manager.onDidChangeState(()=>{this.manager.state===Be.RepositoriesLoaded&&(this.doInitialize(),i.dispose(),e())});this.context.subscriptions.push(i)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var i;const r=this.getOrCreateSingleRepoState(e.rootUri),n=r.lastHead,s=r.lastBranch,a=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==n&&await this.setIssueData(r.folderManager);const o=(i=e.state.HEAD)==null?void 0:i.name;(n!==a||s!==o)&&(!r.currentIssue||o!==r.currentIssue.branchName)&&(o?r.folderManager&&await this.setCurrentIssueFromBranch(r,o):await this.setCurrentIssue(r,void 0)),r.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,r.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=l.workspace.getConfiguration(Se).get(oi,Gn),this._queries.length===0&&(this._queries=Gn),this.context.subscriptions.push(l.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration(`${Se}.${oi}`)?(this._queries=l.workspace.getConfiguration(Se).get(oi,Gn),this._onRefreshCacheNeeded.fire()):i.affectsConfiguration(`${Se}.${Yo}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const i of this.manager.folderManagers){const r=this.getOrCreateSingleRepoState(i.repository.rootUri,i);r.lastHead=i.repository.state.HEAD?i.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(i.repository.rootUri.path,r);const n=(e=i.repository.state.HEAD)==null?void 0:e.name;!r.currentIssue&&n&&await this.setCurrentIssueFromBranch(r,n)}}cleanIssueState(){const e=this.context.workspaceState.get(Hn),i=e?JSON.parse(e):{issues:[],branches:[]},r=new Date().valueOf()-30*864e5;for(const n in i.issues)i.issues[n].stateModifiedTime<r&&(i.branches&&i.branches[n]&&delete i.branches[n],delete i.issues[n])}async getUsers(e){var i;await this.initializePromise;const r=await((i=this.manager.getManagerForFile(e))==null?void 0:i.getAssignableUsers()),n=new Map;for(const s in r)r[s].forEach(a=>{n.set(a.login,a)});return n}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const i=this.getOrCreateSingleRepoState(e);return i.userMap||(i.userMap=this.getUsers(e)),i.userMap}async getCurrentUser(){var e;return(e=this.manager.credentialStore.getCurrentUser())==null?void 0:e.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var i,r;const n=this.getOrCreateSingleRepoState(e.repository.rootUri,e);n.issueCollection.clear();let s,a;for(const o of this._queries){let u;if(o.query===Cc)u=this.setMilestones(e);else{if(!s)try{s=await e.getPullRequestDefaults()}catch(c){}a||(a=await this.getCurrentUser()),u=this.setIssues(e,await ur(o.query,void 0,s,a))}n.issueCollection.set(o.label,u)}n.maxIssueNumber=await e.getMaxIssue(),n.lastHead=(i=e.repository.state.HEAD)==null?void 0:i.commit,n.lastBranch=(r=e.repository.state.HEAD)==null?void 0:r.name}setIssues(e,i){return new Promise(async r=>{const n=await e.getIssues({fetchNextPage:!1},i);this._onDidChangeIssueData.fire(),r(n.items.map(s=>{const a=s;return a.uri=e.repository.rootUri,a}))})}async setCurrentIssueFromBranch(e,i){if(l.workspace.getConfiguration(Se).get(ga)==="off")return;let n;try{n=await e.folderManager.getPullRequestDefaults()}catch(a){return}if(i===n.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===i)return;const s=this.getSavedState();for(const a in s.branches)if(a===i){const o=await e.folderManager.resolveIssue(s.branches[a].owner,s.branches[a].repositoryName,s.branches[a].number);o&&await this.setCurrentIssue(e,new Wo(o,e.folderManager,this));return}}setMilestones(e){return new Promise(async i=>{const r=new Date,n=l.workspace.getConfiguration(Se).get(Yo,[]),s=await e.getMilestones({fetchNextPage:!1},n.indexOf(Ia)<0);let a;const o=new Map,u=[];for(let c=0;c<s.items.length;c++){const h=s.items[c];h.uri=e.repository.rootUri;const b=s.items[c].milestone;if(h.issues&&h.issues.length<=0||n.indexOf(b.title)>=0)continue;u.push(h);let R=b.dueOn?new Date(b.dueOn):void 0;R||(R=new Date(this.removeDateExcludeStrings(b.title)),isNaN(R.getTime())&&(R=new Date(b.createdAt))),R<r&&(a===void 0||R>a)&&(a=R),o.set(b.id?b.id:b.title,R)}u.sort((c,h)=>{const b=o.get(c.milestone.id?c.milestone.id:c.milestone.title),R=o.get(h.milestone.id?h.milestone.id:h.milestone.title);return a&&b>=a&&R>=a?b<=R?-1:1:b>=R?-1:1}),this._onDidChangeIssueData.fire(),i(u)})}removeDateExcludeStrings(e){return Kh.forEach(i=>e=e.replace(i,"")),e}currentIssue(e){var i;return(i=this._singleRepoStates.get(e.path))==null?void 0:i.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var i,r;return(r=(i=this._singleRepoStates.get(e.path))==null?void 0:i.maxIssueNumber)!=null?r:0}async setCurrentIssue(e,i){if(!(this.isSettingIssue&&i===void 0)){if(this.isSettingIssue=!0,e instanceof ui){const r=this._singleRepoStates.get(e.repository.rootUri.path);if(!r)return;e=r}try{if(e.currentIssue&&(i==null?void 0:i.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),i&&this.context.subscriptions.push(i.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(Yh,i==null?void 0:i.issue.number),(!i||await i.startWorking())&&(e.currentIssue=i,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(r){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),i=e.length>0;if(!i){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}i&&!this.statusBarItem&&(this.statusBarItem=l.window.createStatusBarItem(l.StatusBarAlignment.Left,0));const r=this.statusBarItem;r.text=`$(issues) Issue ${e.map(n=>li(n.issue,n.repoDefaults)).join(", ")}`,r.tooltip=e.map(n=>n.issue.title).join(", "),r.command="issue.statusBar",r.show()}getSavedState(){const e=this.context.workspaceState.get(Hn);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var i;return(i=this.getSavedState().issues[`${e}`])!=null?i:{}}setSavedIssueState(e,i){const r=this.getSavedState();r.issues[`${e.number}`]={...i,stateModifiedTime:new Date().valueOf()},i.branch&&(r.branches||(r.branches=Object.create(null)),r.branches[i.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(Hn,JSON.stringify(r))}}class Zh{constructor(e,i,r){this.stateManager=e,this.manager=i}async provideCompletionItems(e,i,r,n){var s;if(e.languageId!=="scminput"&&e.uri.scheme!==_t&&i.character>0&&n.triggerKind===l.CompletionTriggerKind.Invoke&&e.getText(new l.Range(i.with(void 0,i.character-1),i))!=="@")return[];if(n.triggerKind===l.CompletionTriggerKind.TriggerCharacter&&l.workspace.getConfiguration(Se).get("ignoreUserCompletionTrigger",[]).find(c=>c===e.languageId))return[];if(e.languageId!=="scminput"&&!await hn(e,i))return[];let a=new l.Range(i,i);i.character-1>=0&&e.getText(new l.Range(i.translate(0,-1),i))==="@"&&(a=new l.Range(i.translate(0,-1),i));const o=e.uri.scheme===_t?(s=Vn(e.uri))!=null?s:e.uri:e.languageId==="scminput"?Ea(e.uri):e.uri;if(!o)return[];const u=[];return(await this.stateManager.getUserMap(o)).forEach(c=>{const h=new Nc(c.login,l.CompletionItemKind.User);h.insertText=`@${c.login}`,h.login=c.login,h.uri=o,h.range=a,h.detail=c.name,h.filterText=`@ ${c.login} ${c.name}`,e.uri.scheme===_t&&(h.commitCharacters=[" ",","]),u.push(h)}),u}async resolveCompletionItem(e,i){const r=this.manager.getManagerForFile(e.uri);if(!r)return e;const n=await r.getPullRequestDefaults(),s=await r.resolveUser(n.owner,n.repo,e.login);return s&&(e.documentation=cn(n,s),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class Xh{constructor(e,i){this.manager=e,this.telemetry=i}async provideHover(e,i,r){if(!await Sa(e,i))return;let n=e.getWordRangeAtPosition(i,on);if(n&&n.start.character>0){n=new l.Range(new l.Position(n.start.line,n.start.character),n.end);const a=e.getText(n).match(on);if(a)return this.createHover(e.uri,a[1],n)}else return}async createHover(e,i,r){try{const n=this.manager.getManagerForFile(e);if(!n)return;const s=await n.getPullRequestDefaults(),a=await n.resolveUser(s.owner,s.repo,i);return a&&a.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new l.Hover(cn(s,a),r)):void 0}catch(n){return}}}var ep=Object.defineProperty,Bn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?ep(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const tp="issueCompletions.enabled",ip="userCompletions.enabled";class rp{constructor(e,i,r,n,s){this.gitAPI=e,this.manager=i,this.reviewManagers=r,this.context=n,this.telemetry=s,Bn(this,"_stateManager"),Bn(this,"createIssueInfo"),Bn(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new Jh(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(l.workspace.registerFileSystemProvider(_t,new $h)),this.registerCompletionProviders(),this.context.subscriptions.push(l.languages.registerCompletionItemProvider({scheme:_t},new Vh(this.manager)," ",",")),this.context.subscriptions.push(l.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new Bh(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromSelection",(e,i)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,i)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(l.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(l.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(l.commands.registerCommand("issue.goToLinkedCode",async e=>kc(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(l.languages.registerHoverProvider("*",new Hh(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(l.languages.registerHoverProvider("*",new Xh(this.manager,this.telemetry))),this.context.subscriptions.push(l.languages.registerCodeActionsProvider("*",new Wh(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:qh,trigger:"#",disposable:void 0,configuration:tp},{provider:Zh,trigger:"@",disposable:void 0,configuration:ip}];for(const i of e)l.workspace.getConfiguration(Se).get(i.configuration,!0)&&this.context.subscriptions.push(i.disposable=l.languages.registerCompletionItemProvider(this.documentFilters,new i.provider(this._stateManager,this.manager,this.context),i.trigger));this.context.subscriptions.push(l.workspace.onDidChangeConfiguration(i=>{for(const r of e)if(i.affectsConfiguration(`${Se}.${r.configuration}`)){const n=l.workspace.getConfiguration(Se).get(r.configuration,!0);!n&&r.disposable?(r.disposable.dispose(),r.disposable=void 0):n&&!r.disposable&&this.context.subscriptions.push(r.disposable=l.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));break}}))}async createIssue(){var e,i;let r=(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(r||(r=(i=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:i.repository.rootUri),r)return this.makeNewIssueFile(r)}async createIssueFromFile(){var e,i,r,n;let s;if(!l.window.activeTextEditor||l.window.activeTextEditor.document.uri.scheme!==_t)return;s=l.window.activeTextEditor.document.getText();const a=s.indexOf(`\r
\r
`),o=s.indexOf(`

`);let u;if(a<0&&o<0)return;a<0?u=o:o<0?u=a:u=Math.min(a,o);const c=s.substring(0,u);let h;if(s=s.substring(u+2).trim(),s.startsWith(wr)){const L=s.split(/\r\n|\n/,1);L.length===1&&(h=L[0].substring(wr.length).split(",").map($=>($=$.trim(),$.startsWith("@")&&($=$.substring(1)),$)),s=s.substring(L[0].length).trim())}let b;if(s.startsWith(qi)){const L=s.split(/\r\n|\n/,1);L.length===1&&(b=L[0].substring(qi.length).split(",").map($=>$.trim()).filter($=>$),s=s.substring(L[0].length).trim())}const R=s;if(!c||!R)return;const q=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(i=this.createIssueInfo)==null?void 0:i.newIssue,c,R,h,b,(r=this.createIssueInfo)==null?void 0:r.lineNumber,(n=this.createIssueInfo)==null?void 0:n.insertIndex,Vn(l.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,q&&await l.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const i=l.workspace.getConfiguration(Se),r=i.inspect(oi);let n;if(r==null?void 0:r.workspaceValue)n="workbench.action.openWorkspaceSettingsFile";else{const a=i.get(oi);(r==null?void 0:r.defaultValue)&&JSON.stringify(r==null?void 0:r.defaultValue)===JSON.stringify(a)&&i.update(oi,r.defaultValue,l.ConfigurationTarget.Global),n="workbench.action.openSettingsJson"}await l.commands.executeCommand(n);const s=l.window.activeTextEditor;if(s){const o=s.document.getText().search(e.labelAsString);if(o>=0){const u=s.document.positionAt(o);s.revealRange(new l.Range(u,u)),s.selection=new l.Selection(u,u)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await l.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),l.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof Fe)return l.env.openExternal(l.Uri.parse(e.html_url))}async doStartWorking(e,i,r){if(!e){l.window.showErrorMessage(`There are no repositories open that match ${i.remote.url}`);return}const n=await e.findUpstreamForItem(i);n.needsFork&&await e.tryOfferToFork(i.githubRepository)===void 0||await this._stateManager.setCurrentIssue(e,new Wo(i,e,this._stateManager,n.remote,r))}async startWorking(e){e instanceof Fe&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof Fe&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var i;const r=this.manager.getManagerForIssueModel(e);!r||e instanceof Fe&&((i=this._stateManager.currentIssue(r.repository.rootUri))==null?void 0:i.issue.number)===e.number&&await this._stateManager.setCurrentIssue(r,void 0)}async statusBarActions(e){const i=`$(globe) Open #${e.issue.number} ${e.issue.title}`,r=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let n;try{n=await e.manager.getPullRequestDefaults()}catch(u){}const s=`$(primitive-square) Stop working on #${e.issue.number}`,a=e.branchName&&n?[i,r,s]:[i,r,s];switch(await l.window.showQuickPick(a,{placeHolder:"Current issue options"})){case i:return this.openIssue(e.issue);case r:{const u=Wt.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(u)return $c(e.manager,u,this._stateManager);break}case s:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const i=e.map(n=>({label:`#${n.issue.number} from ${n.issue.githubRepository.remote.owner}/${n.issue.githubRepository.remote.repositoryName}`,currentIssue:n})),r=await l.window.showQuickPick(i);if(r)return this.statusBarActions(r.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof Fe)return l.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof Fe)return l.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await l.env.clipboard.readText())}async createTodoIssue(e,i){let r,n,s,a,o,u;if(!e&&l.window.activeTextEditor)r=l.window.activeTextEditor.document,u=r.getText(l.window.activeTextEditor.selection);else if(e)r=e.document,s=e.insertIndex,a=e.lineNumber,n=e.line.substring(s,e.line.length).trim(),u=r.getText(e.range.isEmpty?r.lineAt(e.range.start.line).range:e.range);else return;const c=u.match(on);c&&c.length===2&&(await this._stateManager.getUserMap(r.uri)).has(c[1])&&(o=[c[1]]);let h;const b=i||(e==null?void 0:e.document.isUntitled)?i:(await mn(this.gitAPI,e)).permalink,R=l.window.createInputBox();R.value=n!=null?n:"",R.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",R.title="Create Issue",R.buttons=[{iconPath:new l.ThemeIcon("edit"),tooltip:"Edit Description"}],R.onDidAccept(async()=>{h=R.value,h&&(R.busy=!0,await this.doCreateIssue(r,e,h,b,o,void 0,a,s),R.busy=!1),R.hide()}),R.onDidTriggerButton(async()=>{h=R.value,R.busy=!0,this.createIssueInfo={document:r,newIssue:e,lineNumber:a,insertIndex:s},this.makeNewIssueFile(r.uri,h,b,o),R.busy=!1,R.hide()}),R.show()}async makeNewIssueFile(e,i,r,n){const s=`?{"origin":"${e.toString()}"}`,a=l.Uri.parse(`${_t}:/${Lh}${s}`);if(l.window.visibleTextEditors.filter($=>$.document.uri.scheme===_t).length>0)return;await l.workspace.fs.delete(a);const o=`${wr} ${n&&n.length>0?n.map($=>"@"+$).join(", ")+" ":""}`,u=`${qi} `,c=`${i!=null?i:"Issue Title"}

${o}
${u}

${r!=null?r:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await l.workspace.fs.writeFile(a,this.stringToUint8Array(c));const h=l.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new l.ThemeColor("issues.newIssueDecoration")}}),b=l.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new l.ThemeColor("issues.newIssueDecoration")}}),R=l.window.onDidChangeActiveTextEditor($=>{if(($==null?void 0:$.document.uri.scheme)===_t){const z=$.document.lineAt(2);z.text.startsWith(wr)&&$.setDecorations(h,[new l.Range(new l.Position(2,0),new l.Position(2,z.text.length))]);const Y=$.document.lineAt(3);Y.text.startsWith(qi)&&$.setDecorations(b,[new l.Range(new l.Position(3,0),new l.Position(3,Y.text.length))])}}),q=await l.window.showTextDocument(a),L=l.workspace.onDidCloseTextDocument($=>{$===q.document&&(R.dispose(),L.dispose())})}async verifyLabels(e,i){var r;if(!i.labels)return!0;const n=(await e.getLabels(void 0,i)).map(o=>o.name),s=[],a=[];if((r=i.labels)==null||r.forEach(o=>{typeof o!="string"&&(o=o.name),n.includes(o)?a.push(o):s.push(o)}),s.length>0){const o="Yes",u="No";switch(await l.window.showInformationMessage(`The following labels don't exist in this repository: ${s.join(", ")}. 
Do you want to create these labels?`,{modal:!0},o,u)){case o:return!0;case u:return i.labels=a,!0;default:return!1}}return!0}async chooseRepo(e){const i=[];for(const n of this.manager.folderManagers)try{const s=await n.getPullRequestDefaults();i.push({label:`${s.owner}/${s.repo}`,repo:n})}catch(s){}if(i.length===0)return;if(i.length===1)return i[0].repo;const r=await l.window.showQuickPick(i,{placeHolder:e});return r==null?void 0:r.repo}async doCreateIssue(e,i,r,n,s,a,o,u,c){let h,b;if(e?b=this.manager.getManagerForFile(e.uri):c?b=this.manager.getManagerForFile(c):b=await this.chooseRepo("Choose where to create the issue."),!b)return!1;try{h=await b.getPullRequestDefaults()}catch($){return l.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const R=n||(i==null?void 0:i.document.isUntitled)?n:(await mn(this.gitAPI,i)).permalink,q={owner:h.owner,repo:h.repo,title:r,body:R,assignees:s,labels:a};if(!await this.verifyLabels(b,q))return!1;const L=await b.createIssue(q);if(L){if(e!==void 0&&u!==void 0&&o!==void 0){const $=new l.WorkspaceEdit,z=l.workspace.getConfiguration(Se).get("createInsertFormat","number")==="number"?`#${L.number}`:L.html_url;$.insert(e.uri,new l.Position(o,u),` ${z}`),await l.workspace.applyEdit($)}else{const $="Copy URL",z="Open Issue";l.window.showInformationMessage("Issue created",$,z).then(async Y=>{switch(Y){case $:await l.env.clipboard.writeText(L.html_url);break;case z:await l.env.openExternal(l.Uri.parse(L.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(){const e=await mn(this.gitAPI);return e.error&&l.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${e.error}`),e.permalink}async copyPermalink(){const e=await this.getPermalinkWithError();if(e)return l.env.clipboard.writeText(e)}getMarkdownLinkText(){if(!l.window.activeTextEditor)return;let e=l.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new l.Range(e.start,new l.Position(e.start.line+1,0)));const i=l.window.activeTextEditor.document.getText(e);if(i)return i;if(e=l.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return l.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),i=this.getMarkdownLinkText();if(e&&i)return l.env.clipboard.writeText(`[${i.trim()}](${e})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e)return l.env.openExternal(l.Uri.parse(e))}}var np=Object.defineProperty,sp=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?np(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class ap{constructor(){sp(this,"_disposables"),this._disposables=[],this._disposables.push(l.window.registerFileDecorationProvider(this))}provideFileDecoration(e,i){const r=es(e);if(r&&r.status!==void 0)return{propagate:!1,badge:this.letter(r.status)};const n=be(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status)}}letter(e){switch(e){case ne.MODIFY:return"M";case ne.ADD:return"A";case ne.DELETE:return"D";case ne.RENAME:return"R";case ne.UNKNOWN:return"U";case ne.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var op=Object.defineProperty,yr=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?op(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class lp extends $e{constructor(e,i,r,n,s){super();this.parent=e,this.pullRequestManager=i,this.pullRequest=r,this.commit=n,this.comments=s,yr(this,"sha"),yr(this,"collapsibleState"),yr(this,"iconPath"),yr(this,"contextValue"),this.label=n.commit.message,this.sha=n.sha,this.collapsibleState=l.TreeItemCollapsibleState.Collapsed;let a;try{n.author&&n.author.avatar_url&&(a=l.Uri.parse(`${n.author.avatar_url}&s=${64}`))}catch(o){}this.iconPath=a,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){const i=(await this.pullRequest.getCommitChangedFiles(this.commit)).map(r=>{const n=this.comments.filter(u=>u.path===r.filename&&u.originalCommitId===this.commit.sha),s=r.filename,a=l.Uri.parse(w.join(`commit~${this.commit.sha.substr(0,8)}`,s)),o=new di(this,this.pullRequestManager,this.pullRequest,Tr(r.status),s,void 0,St(a,s,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),St(a,s,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],n,this.commit.sha);return o.useViewChangesCommand(),o});return Promise.resolve(i)}}var up=Object.defineProperty,Ui=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?up(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class cp extends $e{constructor(e,i,r,n){super();Ui(this,"label","Commits"),Ui(this,"collapsibleState"),Ui(this,"_folderRepoManager"),Ui(this,"_pr"),Ui(this,"_comments"),this.parent=e,this._pr=r,this._folderRepoManager=i,this._comments=n,this.collapsibleState=l.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const i=(await this._pr.getCommits()).map(r=>new lp(this,this._folderRepoManager,this._pr,r,this._comments));return Promise.resolve(i)}catch(e){return Promise.resolve([])}}}var dp=Object.defineProperty,jn=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class mp extends $e{constructor(e,i){super();this.parent=e,this._fileChanges=i,jn(this,"label","Files"),jn(this,"collapsibleState"),jn(this,"directories",[]),this.collapsibleState=l.TreeItemCollapsibleState.Expanded;const r=new Qt(this,"");this._fileChanges.forEach(n=>r.addFile(n)),r.finalize(),r.label===""?this.directories=r.children:this.directories=[r]}getTreeItem(){return this}async getChildren(){let e;return l.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var hp=Object.defineProperty,kr=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?hp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class pp extends jt{constructor(e,i,r,n,s){super(e,i.title,i.userAvatarUri,i);this.parent=e,this._pullRequest=i,this._pullRequestManager=r,this._comments=n,this._localFileChanges=s,kr(this,"_filesCategoryNode"),kr(this,"_commitsCategoryNode"),kr(this,"collapsibleState",l.TreeItemCollapsibleState.Expanded),kr(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(l.window.onDidChangeActiveTextEditor(a=>{const o=a==null?void 0:a.document.uri.toString();this.revealActiveEditorInTree(o)})),this._disposables.push(this.parent.onDidChangeVisibility(a=>{var o;const u=(o=l.window.activeTextEditor)==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(u)}))}revealActiveEditorInTree(e){if(this.parent.visible&&e){const i=this._localFileChanges.find(r=>r.filePath.toString()===e);i&&this.reveal(i,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new mp(this.parent,this._localFileChanges),this._commitsCategoryNode=new cp(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var fp=Object.defineProperty,Li=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?fp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class Jo extends l.Disposable{constructor(e){super(()=>this.dispose());this._context=e,Li(this,"_onDidChangeTreeData",new l.EventEmitter),Li(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Li(this,"_disposables",[]),Li(this,"_pullRequestManagerMap",new Map),Li(this,"_view"),this._view=l.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(l.workspace.onDidChangeConfiguration(async i=>{if(i.affectsConfiguration(`${yt}.fileListLayout`)){this._onDidChangeTreeData.fire();const r=l.workspace.getConfiguration(`${yt}`).get("fileListLayout");await l.commands.executeCommand("setContext","fileListLayout:flat",r==="flat")}else i.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const i=this._pullRequestManagerMap.values().next();i.done||(e=i.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,i,r,n,s){const a=new pp(this._view,i,e,n,r);this._pullRequestManagerMap.set(e,a),this.updateViewTitle(),await l.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),s&&this._view.reveal(a)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await l.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,i){this._view.reveal(e,i)}async getChildren(e){if(e)return await e.getChildren();{const i=[];if(this._pullRequestManagerMap.size>=1)for(const r of this._pullRequestManagerMap.values())i.push(r);return i}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,i){return i instanceof di&&await i.resolve(),i}dispose(){this._disposables.forEach(e=>e.dispose())}}var gp=Object.defineProperty,At=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?gp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),Rt;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(Rt||(Rt={}));class dt extends $e{constructor(e,i,r){super();switch(At(this,"collapsibleState"),At(this,"iconPath"),At(this,"type"),At(this,"command"),this.parent=e,this.type=i,this.collapsibleState=l.TreeItemCollapsibleState.None,i){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[r]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[r]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class Qn extends $e{constructor(e,i,r,n,s,a){super();switch(this.parent=e,this._folderRepoManager=i,this._telemetry=r,this._type=n,this._categoryQuery=a,At(this,"collapsibleState"),At(this,"prs"),At(this,"fetchNextPage",!1),At(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=l.TreeItemCollapsibleState.Collapsed,n){case Te.All:this.label="All Open";break;case Te.Query:this.label=s;break;case Te.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){let e=!1,i=!1,r=!1;if(this._type===Te.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(n){l.window.showErrorMessage(`Fetching local pull requests failed: ${A(n)}`),r=n instanceof Xi}else if(this.fetchNextPage){try{const n=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(n.items),e=n.hasMorePages,i=n.hasUnsearchedRepositories}catch(n){l.window.showErrorMessage(`Fetching pull requests failed: ${A(n)}`),r=n instanceof Xi}this.fetchNextPage=!1}else try{const n=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=n.items,e=n.hasMorePages,i=n.hasUnsearchedRepositories,this._type){case Te.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case Te.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(n){l.window.showErrorMessage(`Fetching pull requests failed: ${A(n)}`),r=n instanceof Xi}if(this.prs&&this.prs.length){const n=this.prs.map(s=>new hi(this,this._folderRepoManager,s,this._type===Te.LocalPullRequest));return e?n.push(new dt(this,1,this)):i&&n.push(new dt(this,2,this)),this.childrenDisposables=n,n}else{const n=r?3:0,s=[new dt(this,n)];return this.childrenDisposables=s,s}}getTreeItem(){return this}}var vp=Object.defineProperty,Zo=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?vp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);const Xo="queries";class $i extends $e{constructor(e,i,r,n){super();this.folderManager=r,this.telemetry=n,Zo(this,"collapsibleState"),Zo(this,"iconPath"),this.parent=e,this.collapsibleState=l.TreeItemCollapsibleState.Expanded,this.label=w.basename(i.fsPath)}static getQueries(e){return l.workspace.getConfiguration(yt,e.repository.rootUri).get(Xo)||[]}getTreeItem(){return this}async getChildren(){return $i.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,i,r){const n=$i.getQueries(e).map(s=>new Qn(r,e,i,Te.Query,s.label,s.query));return[new Qn(r,e,i,Te.LocalPullRequest),...n,new Qn(r,e,i,Te.All)]}}var bp=Object.defineProperty,Mt=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class el{constructor(e){this._telemetry=e,Mt(this,"_onDidChangeTreeData",new l.EventEmitter),Mt(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Mt(this,"_onDidChange",new l.EventEmitter),Mt(this,"_disposables"),Mt(this,"_childrenDisposables"),Mt(this,"_view"),Mt(this,"_reposManager"),Mt(this,"_initialized",!1),this._disposables=[],this._disposables.push(l.workspace.registerTextDocumentContentProvider("pr",ja())),this._disposables.push(l.window.registerFileDecorationProvider(qa)),this._disposables.push(l.commands.registerCommand("pr.refreshList",i=>{this._onDidChangeTreeData.fire()})),this._disposables.push(l.commands.registerCommand("pr.loadMore",i=>{i.fetchNextPage=!0,this._onDidChangeTreeData.fire(i)})),this._view=l.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(l.commands.registerCommand("pr.configurePRViewlet",async()=>{var i;const r=((i=this._reposManager)==null?void 0:i.state)===Be.RepositoriesLoaded;switch(await l.window.showQuickPick(["Configure Remotes...","Configure Queries...",...r?["Sign out of GitHub..."]:[]])){case"Configure Queries...":return l.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} queries`);case"Configure Remotes...":return l.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} remotes`);case"Sign out of GitHub...":return l.commands.executeCommand("auth.signout");default:return}})),this._disposables.push(l.workspace.onDidChangeConfiguration(i=>{i.affectsConfiguration(`${yt}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(i=>i.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(l.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${yt}.${Xo}`)&&this.refresh()}))}async refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===Be.NeedsAuthentication?Promise.resolve([]):l.workspace.getConfiguration(yt).get(fn)?Promise.resolve([new dt(this._view,Rt.NoMatchingRemotes),new dt(this._view,Rt.ConfigureRemotes)]):Promise.resolve([new dt(this._view,Rt.NoRemotes)])}async getChildren(e){if(!this._reposManager)return l.workspace.workspaceFolders?Promise.resolve([new dt(this._view,Rt.NoGitRepositories)]):Promise.resolve([new dt(this._view,Rt.NoOpenFolder)]);if(this._reposManager.state===Be.Initializing)return Promise.resolve([new dt(this._view,Rt.Initializing)]);if(this._reposManager.folderManagers.filter(i=>i.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(r=>r.dispose());let i;return this._reposManager.folderManagers.length===1?$i.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this._view):(i=this._reposManager.folderManagers.map(r=>new $i(this._view,r.repository.rootUri,r,this._telemetry)),this._childrenDisposables=i,Promise.resolve(i))}return this._reposManager.folderManagers.filter(i=>i.repository.state.remotes.length>0).length===0?Promise.resolve([new dt(this._view,Rt.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var wp=Object.defineProperty,tl=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?wp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class yp{constructor(e){this.gitAPI=e,tl(this,"_onDidChange",new l.EventEmitter),tl(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,i){if(!this._fallback)return"";const{path:r,commit:n,rootPath:s}=Ke(e);if(!r||!n)return"";const a=ia(this.gitAPI,l.Uri.file(s));if(!a)return l.window.showErrorMessage(`We couldn't find an open repository for ${n} locally.`),"";const o=w.join(a.rootUri.fsPath,r).replace(/\\/g,"/");let u;try{if(u=await a.show(n,o),!u)throw new Error}catch(c){if(u=await this._fallback(e),!u)try{await a.getCommit(n)}catch(h){l.window.showErrorMessage(`We couldn't find commit ${n} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return u||""}registerTextDocumentContentFallback(e){this._fallback=e}}var kp=Object.defineProperty,il=(t,e,i)=>(typeof e!="symbol"&&(e+=""),e in t?kp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i);class rl{constructor(e,i,r,n,s,a,o){this._context=e,this._reposManager=i,this._reviewManagers=r,this._prsTreeDataProvider=n,this._prFileChangesProvider=s,this._telemetry=a,il(this,"_disposables"),this._disposables=[];const u=new yp(o);u.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(l.workspace.registerTextDocumentContentProvider("review",u)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(l.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new Jo(this._context);for(const i of this._reviewManagers)i.updateState()}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new el(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const i of this._reviewManagers)if(e.fsPath.startsWith(i.repository.rootUri.fsPath))return i.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}il(rl,"ID","Reviews");const _p="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let Ve;const nl="prompts",sl="createPROnPublish";async function al(t,e,i,r,n,s){t.subscriptions.push(H),H.appendLine("Git repository found, initializing review manager and pr tree view."),l.authentication.onDidChangeSessions(async L=>{L.provider.id==="github"&&(await u.clearCredentialCache(),h&&h.forEach($=>$.updateState()))}),t.subscriptions.push(e.onDidPublish(async L=>{if(!L.branch||Ya(nl,sl)===!1)return;const $=h.find(re=>re.repository.rootUri.toString()===L.repository.rootUri.toString());if($==null?void 0:$.isCreatingPullRequest)return;const z="Create Pull Request...",Y="Don't Show Again",Z=await l.window.showInformationMessage(`Would you like to create a Pull Request for branch '${L.branch}'?`,z,Y);Z===z?l.commands.executeCommand("pr.create"):Z===Y&&Ja(nl,sl,!1)})),t.subscriptions.push(l.window.registerUriHandler(vl)),t.subscriptions.push(new ap);const a=l.workspace.workspaceFolders;a&&(r=r.sort((L,$)=>{let z=a.length,Y=a.length;for(let Z=0;Z<a.length&&(a[Z].uri.toString()===L.rootUri.toString()?z=Z:a[Z].uri.toString()===$.rootUri.toString()&&(Y=Z),!(z!==a.length&&Y!==a.length));Z++);return z-Y}));const o=r.map(L=>new ui(L,Ve,e,i));t.subscriptions.push(...o);const u=new Go(o,i,Ve);t.subscriptions.push(u),s.then(L=>{L&&L.registerContactServiceProvider("github-pr",new Ah(u))});const c=new Jo(t);t.subscriptions.push(c);const h=o.map(L=>new Wt(t,L.repository,L,Ve,c)),b=new rl(t,u,h,n,c,Ve,e);t.subscriptions.push(b),n.initialize(u),Dd(t,u,h,Ve,i,n);const R=l.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await l.commands.executeCommand("setContext","fileListLayout:flat",R==="flat"),e.onDidChangeState(()=>{h.forEach(L=>L.updateState())}),e.onDidOpenRepository(L=>{const $=L.state.onDidChange(()=>{const z=new ui(L,Ve,e,i);u.insertFolderManager(z);const Y=new Wt(t,z.repository,z,Ve,c);h.push(Y),n.refresh(),$.dispose()})}),e.onDidCloseRepository(L=>{u.removeRepo(L);const $=h.findIndex(z=>z.repository.rootUri.toString()===L.rootUri.toString());if($){const z=h[$];h.splice($),z.dispose()}n.refresh()});const q=new rp(e,u,h,t,Ve);t.subscriptions.push(q),await q.initialize(),t.subscriptions.push(new xh),await l.commands.executeCommand("setContext","github:initialized",!0),Ve.sendTelemetryEvent("startup")}async function Rp(t){if(Ot==="GitHub.vscode-pull-request-github-insiders"&&l.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");l.commands.registerCommand("pr.preload",async()=>{await l.commands.executeCommand("setContext",qt,!0),await l.commands.executeCommand("github:activePullRequest:welcome.focus")}),nt.initialize(t);const e=new zn,i=l.extensions.getExtension(Ot).packageJSON.version;return Ve=new Od(new F.Z(Ot,i,_p)),t.subscriptions.push(Ve),Cp(t,e),e}async function Cp(t,e){Id(t);const i=new gh(Ve);t.subscriptions.push(i),await i.initialize();const r=Fh(i,e);r&&t.subscriptions.push(r);const n=Dh(e);t.subscriptions.push(n);const s=n.initialize();t.subscriptions.push(e);const a=new el(Ve);t.subscriptions.push(a),H.appendLine("Looking for git repository");const o=e.repositories;o.length>0?await al(t,e,i,o,a,s):_(e.onDidOpenRepository)(async u=>{await al(t,e,i,[u],a,s)})}async function Sp(){Ve&&Ve.dispose()}})(),module.exports=Rr})();
